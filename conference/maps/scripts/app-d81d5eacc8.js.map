{"version":3,"sources":["scripts/app.js"],"names":["angular","module","directive","restrict","templateUrl","link","$scope","getAllAudioVideoDevices","successCallback","failureCallback","navigator","enumerateDevices","window","MediaStreamTrack","getSources","bind","mediaDevices","allMdiaDevices","allAudioDevices","allVideoDevices","audioInputDevices","videoInputDevices","devices","forEach","_device","device","d","skip","id","kind","deviceId","label","push","indexOf","captureUserMedia","mediaConstraints","errorCallback","getUserMedia","then","callback","audio","video","stream","result","length","console","log","allDevices","videoDevices","audioDevices","audioInputDevicesName","deviceVideoInputName","$apply","error","alert","$http","$q","$location","$timeout","scope","max","scale","measureDownloadSpeed","startTime","endTime","deferred","defer","Date","getTime","method","url","imageUrl","response","duration","bitsLoaded","downloadSize","speedDownBps","toFixed","speedDownKbps","speedDownMbps","speedDownMbpsAvg","Number","resolve","promise","measureDownloadSpeedArr","measureDownloadSpeedAverage","i","reduce","previousValue","currentValue","factory","http","$log","isEnabled","start","onIFrameCallback","event","data","chromeMediaSourceId","sourceId","option","getScreenConstraints","chromeExtensionStatus","extStatus","removeEventListener","screen_constraints","mandatory","chromeMediaSource","maxWidth","screen","width","maxHeight","height","optional","postMessage","iframe","isLoaded","contentWindow","captureSourceId","setTimeout","loadIFrame","loadCallback","document","createElement","onload","src","style","display","body","documentElement","appendChild","mozGetUserMedia","webkitGetUserMedia","mozMediaSource","mediaSource","addEventListener","getScreenId","addMember","info","path","param","token","meetingId","member","toJson","postRequest","updateMember","putRequest","removeMember","deleteRequest","listMember","getRequest","login","email","password","trustedLogin","payload","checksum","createMeeting","meeting","updateMeeting","endMeeting","listMeeting","getMeeting","setMeetingConfig","config","getMeetingConfig","uploadPresentation","file","uploadRequest","shareFile","downChannel","upChannel","loginAccount","trainingSocketUrl","ws","WebSocket","exc","conferenceSocketUrl","apiUrl","blockUI","transform","str","p","encodeURIComponent","join","req","headers","Content-Type","transformRequest","timeout","status","stop","params","xhr","XMLHttpRequest","fd","FormData","open","onreadystatechange","readyState","fromJson","responseText","append","send","controller","$rootScope","$routeParams","_","localStorageService","$interval","$sce","$trainingSocket","$window","$document","deviceDetector","iceServers","$recorder","$mdSidenav","$base64","ngAudio","toastr","$route","pdfDelegate","$meeting","$screenShare","RoomMember","profile","this","avail","invited","pubWebRtcEndpoint","pubOfferSdp","pubState","PUB_INITIAL","pubGatherToken","pubTimeoutToken","pubCandidateSendQueue","subWebRtcEndpoint","subOfferSdp","subState","SUB_INITIAL","subGatherToken","subCandidateSendQueue","pubCamera","subVideoSlot","ScreenShare","webRtcEndpoint","offerSdp","state","gatherToken","timeoutToken","candidateSendQueue","camera","init","handUp","notiHandUp","toggleVideoFlag","sound","load","fullScreen","pdfUrl","zoom","countAllocated","get","myProfile","memberProfiles","memberList","videoSlots","chatMessage","fileList","count","each","_id","allocated","videoId","index","me","find","m","getElementById","presenter","role","viewerList","filter","screenShare","sendMessage","message","memberId","jsonMessage","JSON","stringify","location","reload","joinResponse","publish","processPresentation","presentation","processFileShare","fileShare","options","localVideo","onicecandidate","onPublishIceCandidate","oncandidategatheringdone","onPublishComplete","kurentoUtils","WebRtcPeer","WebRtcPeerSendonly","generateOffer","onPublish","PUB_CONNECTING","sendPublishData","GATHER_TIMEOUT","candidate","publishResponse","disconnect","processAnswer","sdpAnswer","candidateList","addIceCandidate","PUB_CONNECTED","cancel","sdpOffer","CALLING_TIMEOUT","unsubscribe","close","e","subscribe","slot","s","SUB_INPROGRESS","remoteCamera","remoteVideo","onSubscribeIceCandidate","onSubscribeComplete","SUB_CONNECTING","sendSubscribeData","WebRtcPeerRecvonly","onSubscribe","subSdpOffer","subscribeResponse","pubId","muted","SUB_CONNECTED","endConference","logoutUrl","base64EncodedString","decodeURIComponent","decode","href","memberStatus","updateMemberList","onlineList","unSubList","subList","shareScreen","curVal","newVal","screenAvail","online","subscribeScreen","unsubscribeScreen","receiveChat","idx","user","text","newMsg","element","querySelector","chatContent","isEmpty","scrollTo","lastIndexInsert","findLastIndex","presentationLast","slice","msg","onWhiteboardEvent","object","getPageInfo","processPresentationEvent","onPresentationEvent","$getByHandle","goToPage","currPage","zoomTo","zoomAmount","getCurrentPage","totalPages","getPageCount","onFileShareEvent","reject","item","onPublishScreenIceCandidate","onPublishScreen","publishScreenResponse","onUnshareScreen","onPublishScreenComplete","sendPublishScreenData","wWebRtcEndpoint","onSubscribeScreenIceCandidate","onSubscribeScreenComplete","sendSubscribeScreenData","onSubscribeScreen","subscribeScreenResponse","PUB_INPROGRESS","connect","loop","play","onmessage","parsedMessage","parse","handDown","processFileShareEvent","resubscribe","publisher","leave","endLesson","toggleAudio","localStream","getLocalStream","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","toggleHand","toggleSidenav","eleId","toggle","toggleMainVideo","changeSizeSlide","memberInvite","inviteeId","memberDiscard","chat","chatInput","sendChatMessage","$event","code","byIndex","$on","next","current","onbeforeunload","recordToken","pdfSwitchPage","offset","prev","zoomOut","zoomIn","name","removeFile","success","source","URL","createObjectURL","videoStream","onended","$member","viMdToast","Fullscreen","trustedLoginKind","loginMeeting","all","set","loginMeetingKeyPress","meetingAuth","$conferenceSocket","$mdDialog","$activityIndicator","markedForSubscription","localCamera","stopAnimating","startAnimating","numOfAllocated","getAllocatedSlots","calcGridSlots","slotsPerRow","slotsList","rows","Math","floor","firstSlot","map","allocatedSlotArr","nextSubscriber","DialogController","hide","answer","$inject","disableState","showSettingDialog","ev","show","parent","targetEvent","clickOutsideToClose","fullscreen","customFullscreen","sharedProperties","getMembersOfRoom","room","deffered","membersList","getRoomsList","roomsList","meetingList","showRoomDetail","gotoEditRoom","reverse","$mdToast","updateRoomsList","updateRoom","meetingRef","welcome","encode","updateMembersList","action","memberIdx","unshift","findIndex","splice","toLowerCase","showMemberForm","save","saveMember","showEditMemberForm","showAddMemberForm","cancelMember","showMemberDetail","createRoom","$auth","auth","emailLogin","passwordLogin","loginAccountKeyPress","utilities","resizeImg","img","degrees","imgWidth","imgHeight","ratio","ratio1","ratio2","canvas","canvasContext","getContext","canvasCopy","copyContext","canvasCopy2","copyContext2","drawImage","rounds","roundRatio","clearRect","translate","rotate","PI","dataURL","toDataURL","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","blob","Blob","type","handleDataAvailable","size","recordedBlobs","browser","recording","superBuffer","File","onFileReady","handleStop","mediaRecorder","mimeType","MediaRecorder","isTypeSupported","onstop","ondataavailable","attrs","which","$eval","keyEnter","preventDefault","$parse","model","fileModel","modelSetter","assign","files","$templateCache","$interpolate","elem","ctrl","clickoutHandlerForDropdown","mousedownOn","hideResults","handleRequired","valid","notEmpty","validState","searchStr","fieldRequired","inputName","$setValidity","requiredClassName","callOrAssign","value","selectedObject","extractValue","obj","key","keys","split","extractTitle","titleField","field","handleInputChange","newval","initial","originalObject","clearResults","showDropdown","results","dd","scrollTop","ie8EventNormalizer","keyCode","callFunctionOrIdentity","fn","setInputString","clearSelected","findMatchString","target","matches","re","RegExp","replace","match","toString","matchClass","trustAsHtml","initResults","displaySearching","currentIndex","focusFirst","searchTimerComplete","minlength","localData","getLocalResults","remoteApiHandler","getRemoteResultsWithCustomHandler","getRemoteResults","keyupHandler","KEY_LF","KEY_RT","KEY_UP","KEY_EN","KEY_DW","searching","KEY_ES","inputField","val","searchTimer","pause","cancelHttpRequest","httpCanceller","handleOverrideSuggestions","overrideSuggestions","dropdownRowOffsetHeight","row","css","getComputedStyle","offsetHeight","parseInt","marginTop","marginBottom","dropdownHeight","getBoundingClientRect","top","dropdownRow","querySelectorAll","dropdownRowTop","paddingTop","dropdownScrollTopTo","updateInputField","title","keydownHandler","rowTop","selectResult","isScrollOn","bottom","KEY_TAB","$digest","processResults","responseData","description","image","formattedText","formattedDesc","subTitleField","descriptionField","imageField","autoMatch","checkExactMatch","desc","displayNoResults","httpSuccessCallbackGen","responseFormatter","remoteUrlDataField","httpErrorCallback","errorRes","remoteUrlErrorCallback","remoteUrl","remoteUrlRequestFormatter","remoteUrlRequestWithCredentials","withCredentials","searchFields","parseInput","showAll","hideTimer","unbindInitialValue","MIN_LENGTH","REQUIRED_CLASS","on","className","$watch","oldval","elementId","onFocusHandler","focusIn","BLUR_TIMEOUT","focusOut","resetHideResults","hoverRow","inputChangeHandler","inputChanged","fieldRequiredClass","PAUSE","initialValue","inputType","textSearching","TEXT_SEARCHING","textNoResults","TEXT_NORESULTS","maxlength","MAX_LENGTH","overflowY","TEMPLATE_URL","put","require","disableInput","remoteUrlResponseFormatter","placeholder","inputClass","compile","tElement","startSym","startSymbol","endSym","endSymbol","interpolatedHtml","html","$routeProvider","$sceDelegateProvider","localStorageServiceProvider","when","controllerAs","otherwise","redirectTo","constant","credential","username","service","objectValue","setObject","getObject","showToast","msgClass","simple","textContent","position","toastClass","hideDelay","timeDelay","errorClass","successClass","run","debug","base64Str","$logProvider","$mdThemingProvider","$mdIconProvider","$translateProvider","toastrConfig","enabledLog","$activityIndicatorProvider","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","closeButton","progressBar","useStaticFilesLoader","prefix","suffix","preferredLanguage","fallbackLanguage","setActivityIndicatorStyle"],"mappings":"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","file":"scripts/app-d81d5eacc8.js","sourcesContent":["'use strict';\r\nangular.module('app', [\r\n    // third-party module\r\n    'ngAnimate', 'ngCookies', 'ngSanitize', 'ngMessages', 'ngAria', 'ngRoute', 'ngLocale',\r\n    'toastr', 'pascalprecht.translate', 'ui.bootstrap', 'ui.router', 'underscore','FBAngular',\r\n    'ui.bootstrap.datetimepicker','pageslide-directive',   'angular-simple-chat','ngAudio',\r\n    'LocalStorageModule', 'ngFileUpload', 'ui.select','ngFileSaver','base64','textAngular','ng.deviceDetector', \r\n    'timer', 'ngMaterial', 'ngMessages', 'pascalprecht.translate','ngActivityIndicator', 'pdf', 'duScroll',\r\n    \r\n    // application module\r\n    'config', 'api',  'mainModule', 'adminModule', 'conferenceModule', 'trainingModule'\r\n]);\r\n\r\n\nangular.module('app')\r\n    .directive('showDevices', function() {\r\n        return{\r\n            restrict: 'E', \r\n            templateUrl: 'app/shared/directives/showDevices/showDevices.html',\r\n            link: function($scope) {\r\n                if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\r\n                    navigator.enumerateDevices = function (callback) {\r\n                        navigator.mediaDevices.enumerateDevices().then(callback);\r\n                    };\r\n                }\r\n                function getAllAudioVideoDevices(successCallback, failureCallback) {\r\n                    if (!navigator.enumerateDevices && window.MediaStreamTrack && window.MediaStreamTrack.getSources) {\r\n                        navigator.enumerateDevices = window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack);\r\n                    }\r\n                    if (!navigator.enumerateDevices && navigator.mediaDevices.enumerateDevices) {\r\n                        navigator.enumerateDevices = navigator.mediaDevices.enumerateDevices.bind(navigator);\r\n                    }\r\n                    if (!navigator.enumerateDevices) {\r\n                        failureCallback(null, 'Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.');\r\n                        return;\r\n                    }\r\n                    var allMdiaDevices = [];\r\n                    var allAudioDevices = [];\r\n                    var allVideoDevices = [];\r\n                    var audioInputDevices = [];\r\n                    var audioOutputDevices = [];\r\n                    var videoInputDevices = [];\r\n                    var videoOutputDevices = [];\r\n                    navigator.enumerateDevices(function (devices) {\r\n                        devices.forEach(function (_device) {\r\n                            var device = {};\r\n                            for (var d in _device) {\r\n                                device[d] = _device[d];\r\n                            }\r\n                            // make sure that we are not fetching duplicate devics\r\n                            var skip;\r\n                            allMdiaDevices.forEach(function (d) {\r\n                                if (d.id === device.id) {\r\n                                    skip = true;\r\n                                }\r\n                            });\r\n                            if (skip) {\r\n                                return;\r\n                            }\r\n                            // if it is MediaStreamTrack.getSources\r\n                            if (device.kind === 'audio') {\r\n                                device.kind = 'audioinput';\r\n                            }\r\n                            if (device.kind === 'video') {\r\n                                device.kind = 'videoinput';\r\n                            }\r\n                            if (!device.deviceId) {\r\n                                device.deviceId = device.id;\r\n                            }\r\n                            if (!device.id) {\r\n                                device.id = device.deviceId;\r\n                            }\r\n                            if (!device.label) {\r\n                                device.label = 'Please invoke getUserMedia once.';\r\n                            }\r\n                            if (device.kind === 'audioinput' || device.kind === 'audio') {\r\n                                audioInputDevices.push(device);\r\n                            }\r\n                            // if (device.kind === 'audiooutput') {\r\n                            //     audioOutputDevices.push(device);\r\n                            // }\r\n                            if (device.kind === 'videoinput' || device.kind === 'video') {\r\n                                videoInputDevices.push(device);\r\n                            }\r\n                            if (device.kind.indexOf('audio') !== -1) {\r\n                                allAudioDevices.push(device);\r\n                            }\r\n                            if (device.kind.indexOf('video') !== -1) {\r\n                                allVideoDevices.push(device);\r\n                            }\r\n                            // there is no 'videoouput' in the spec.\r\n                            // so videoOutputDevices will always be [empty]\r\n                            allMdiaDevices.push(device);\r\n                        });\r\n                        if (successCallback) {\r\n                            successCallback({\r\n                                allMdiaDevices: allMdiaDevices,\r\n                                allVideoDevices: allVideoDevices,\r\n                                allAudioDevices: allAudioDevices,\r\n                                videoInputDevices: videoInputDevices,\r\n                                audioInputDevices: audioInputDevices\r\n                                // audioOutputDevices: audioOutputDevices\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                function captureUserMedia(mediaConstraints, successCallback, errorCallback) {\r\n                    navigator.mediaDevices.getUserMedia(mediaConstraints).then(successCallback).catch(errorCallback);\r\n                }\r\n                captureUserMedia({audio: true, video: true}, function (stream) {\r\n                    getAllAudioVideoDevices(function (result) {\r\n                        if (result.allMdiaDevices.length) {\r\n                            console.log('Number of audio/video devices available:', result.allMdiaDevices.length);\r\n                            $scope.allDevices = result.allMdiaDevices.length;\r\n                        }\r\n                        if (result.allVideoDevices.length) {\r\n                            console.log('Number of video devices available:', result.allVideoDevices.length);\r\n                            $scope.videoDevices = result.allVideoDevices.length;\r\n                        }\r\n                        if (result.allAudioDevices.length) {\r\n                            console.log('Number of audio devices available:', result.allAudioDevices.length);\r\n                            $scope.audioDevices = result.allAudioDevices.length;\r\n                        }\r\n                        if (result.videoInputDevices.length) {\r\n                            console.log('Number of video-input devices available:', result.videoInputDevices.length);\r\n                            $scope.videoInputDevices = result.videoInputDevices.length;\r\n                        }\r\n                        if (result.audioInputDevices.length) {\r\n                            console.log('Number of audio-input devices available:', result.audioInputDevices.length);\r\n                            $scope.audioInputDevices = result.audioInputDevices.length;\r\n                        }\r\n                        // if (result.audioOutputDevices.length) {\r\n                        //     console.log('Number of audio-output devices available:', result.audioOutputDevices.length);\r\n                        //     $scope.audioOutputDevices = result.audioOutputDevices.length;\r\n                        // }\r\n\r\n                        if (result.allMdiaDevices.length && result.allMdiaDevices[0].label === 'Please invoke getUserMedia once.') {\r\n                            console.log('It seems you did not invoke navigator-getUserMedia before using these API.', 'warning');\r\n                        }\r\n\r\n                        $scope.audioInputDevicesName = result.audioInputDevices;\r\n                        // $scope.audioOutputDevices = result.audioOutputDevices;\r\n                        $scope.deviceVideoInputName = result.videoInputDevices;\r\n                        $scope.$apply();\r\n                    }, function (error) {\r\n                        alert(error);\r\n                    });\r\n                }, function (error) {\r\n                    console.log(error);\r\n                });\r\n            }\r\n        }\r\n    });\n/**\r\n * @author thanhvk\r\n * created on 08.10.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('app')\r\n    .directive('showBandwidth', ['$http', '$q', '$location', '$timeout', function($http, $q, $location, $timeout) {\r\n        return {\r\n            restrict: 'E',\r\n            templateUrl: 'app/shared/directives/showBandwidth/showBandwidthView.html',\r\n            scope: {\r\n                max: '=max',\r\n                scale: '=scale'\r\n            },\r\n            link: function($scope) {\r\n                var imageUrl = \"https://localhost:3000/assets/images/hybrid.jpg\"; \r\n                // var imageUrl = $location.protocol() + '://' + $location.host() + ':' + $location.port() + '/assets/images/hybrid.jpg';\r\n                // var imageUrl = \"https://training.demo.vietinterview.com:9444/public/nghiepvu.pdf\";\r\n                var downloadSize = 23670; //bytes\r\n                // var speedDownMbpsAvg = 0;\r\n                var speedDownMbpsArr = [];\r\n                var measureDownloadSpeedArr = [];\r\n\r\n                function measureDownloadSpeed() {\r\n                    var deferred = $q.defer(),\r\n                        startTime, \r\n                        endTime;\r\n                    startTime = (new Date()).getTime();\r\n\r\n                    $http({\r\n                        method: 'GET',\r\n                        url: imageUrl\r\n                    }).then(function successCallback(response) {\r\n                        endTime = (new Date()).getTime();\r\n                        var duration = (endTime - startTime) / 1000;\r\n                        var bitsLoaded = downloadSize * 8;\r\n\r\n                        var speedDownBps = (bitsLoaded / duration).toFixed(2);\r\n                        var speedDownKbps = (speedDownBps / 1024).toFixed(2);\r\n                        var speedDownMbps = (speedDownKbps / 1024).toFixed(2);\r\n\r\n                        $timeout(function() {\r\n                            if ($scope.speedDownMbps === 0) {\r\n                                $scope.speedDownMbpsAvg = Number(speedDownMbps);\r\n                                $scope.speedDownMbps = Number(speedDownMbps);\r\n                            } else {\r\n                                speedDownMbps = ($scope.speedDownMbpsAvg + Number(speedDownMbps)) / 2;\r\n                                $scope.speedDownMbpsAvg = Number(speedDownMbps.toFixed(2));\r\n                                $scope.speedDownMbps = Number(speedDownMbps.toFixed(2));\r\n                            }\r\n\r\n                            deferred.resolve();\r\n                        }, 60);                        \r\n                    }, function errorCallback(response) {\r\n                        deferred.resolve(null);\r\n                    });\r\n\r\n                    return deferred.promise;\r\n                };\r\n\r\n                $scope.measureDownloadSpeedAverage = function() {\r\n                    // speedDownMbpsAvg = 0;\r\n                    $scope.speedDownMbpsAvg = 0;\r\n                    $scope.speedDownMbps = 0;\r\n\r\n                    for (var i = 0; i < 100; i++) {\r\n                        measureDownloadSpeedArr.push(measureDownloadSpeed);\r\n                    }\r\n\r\n                    measureDownloadSpeedArr.reduce(function(previousValue, currentValue) {\r\n                        return previousValue.then(function() {\r\n                            return currentValue();\r\n                        });\r\n                    }, $q.resolve());\r\n                    // .then(function() {\r\n                    //     $scope.speedDownMbps = speedDownMbpsAvg;\r\n                    //     $scope.speedDownMbpsAvg = speedDownMbpsAvg;\r\n                    // });\r\n                };\r\n\r\n                $scope.measureDownloadSpeedAverage();\r\n            }\r\n        };\r\n    }]); \n'use strict';\r\nangular.module('api',['config','blockUI']);\r\n\n\"use strict\";\r\n\r\n/*\r\n * Source: https://webrtcexperiment-webrtc.netdna-ssl.com/getScreenId.js\r\n */\r\nangular.module('api').factory('$screenShare', function(http,$log)\r\n{\r\n    return {\r\n        isEnabled: function(callback) {\r\n            callback(true);\r\n        },\r\n        start: function(callback)\r\n        {\r\n                navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\r\n                if (!!navigator.mozGetUserMedia) {\r\n                    option =  {\r\n                        video: {\r\n                            mozMediaSource: 'window',\r\n                            mediaSource: 'window'\r\n                        }\r\n                    }\r\n                    navigator.getUserMedia(option, function (stream) {\r\n                        callback(true,stream,'firefox')\r\n                    }, function (error) {\r\n                        $log.error('Share screen in firfox failed',error);\r\n                        callback(false);\r\n                    });\r\n                    return;\r\n                } \r\n                postMessage();\r\n                window.addEventListener('message', onIFrameCallback);\r\n\r\n                function onIFrameCallback(event) {\r\n                    if (!event.data) return;\r\n\r\n                    if (event.data.chromeMediaSourceId) {\r\n                        if (event.data.chromeMediaSourceId === 'PermissionDeniedError') {\r\n                            $log.error('permission-denied');\r\n                            callback(false);\r\n                        } else { \r\n                            var sourceId =  event.data.chromeMediaSourceId\r\n                            var option = getScreenConstraints(null, sourceId);\r\n                            navigator.getUserMedia(option, function (stream) {\r\n                                callback(true,stream,sourceId)\r\n                            }, function (error) {\r\n                                $log.error('Share screen in Chome failed',error);\r\n                                callback(false);\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (event.data.chromeExtensionStatus) {\r\n                        var extStatus = event.data.chromeExtensionStatus\r\n                        var option = getScreenConstraints(extStatus);\r\n                        navigator.getUserMedia(option, function (stream) {\r\n                            callback(true,stream,null)\r\n                        }, function (error) {\r\n                            $log.error('Share screen in Chome failed',error);\r\n                            callback(false);\r\n                        });\r\n                    }\r\n\r\n                    // this event listener is no more needed\r\n                    window.removeEventListener('message', onIFrameCallback);\r\n                }\r\n               \r\n\r\n                function getScreenConstraints(error, sourceId) {\r\n                    var screen_constraints = {\r\n                        audio: false,\r\n                        video: {\r\n                            mandatory: {\r\n                                chromeMediaSource: error ? 'screen' : 'desktop',\r\n                                maxWidth: window.screen.width > 1920 ? window.screen.width : 1920,\r\n                                maxHeight: window.screen.height > 1080 ? window.screen.height : 1080\r\n                            },\r\n                            optional: []\r\n                        }\r\n                    };\r\n\r\n                    if (sourceId) {\r\n                        screen_constraints.video.mandatory.chromeMediaSourceId = sourceId;\r\n                    }\r\n\r\n                    return screen_constraints;\r\n                }\r\n\r\n                function postMessage() {\r\n                    if (!iframe) {\r\n                        loadIFrame(postMessage);\r\n                        return;\r\n                    }\r\n\r\n                    if (!iframe.isLoaded) {\r\n                        setTimeout(postMessage, 100);\r\n                        return;\r\n                    }\r\n\r\n                    iframe.contentWindow.postMessage({\r\n                        captureSourceId: true\r\n                    }, '*');\r\n                }\r\n\r\n                function loadIFrame(loadCallback) {\r\n                    if (iframe) {\r\n                        loadCallback();\r\n                        return;\r\n                    }\r\n\r\n                    iframe = document.createElement('iframe');\r\n                    iframe.onload = function() {\r\n                        iframe.isLoaded = true;\r\n\r\n                        loadCallback();\r\n                    };\r\n                    iframe.src = 'https://www.webrtc-experiment.com/getSourceId/'; // https://wwww.yourdomain.com/getScreenId.html\r\n                    iframe.style.display = 'none';\r\n                    (document.body || document.documentElement).appendChild(iframe);\r\n                }\r\n\r\n               var iframe;\r\n\r\n                // this function is used in v3.0\r\n                window.getScreenConstraints = function(callback) {\r\n                    loadIFrame(function() {\r\n                        getScreenId(function(error, sourceId, screen_constraints) {\r\n                            callback(error, (screen_constraints || {}).video);\r\n                        });\r\n                    });\r\n                };\r\n            \r\n        }          \r\n    }\r\n});\n\"use strict\";\r\nangular.module('api').factory('$member', function(http)\r\n{\r\n    return {\r\n       \r\n        addMember: function(info, callback)\r\n        {\r\n            var path = \"/member\";\r\n            var param = {\r\n                token: info.token,\r\n                meetingId: info.meetingId,\r\n                member: angular.toJson(info.member)\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        },\r\n        updateMember: function(info, callback)\r\n        {\r\n            var path = \"/member\";\r\n            var param = {\r\n                token: info.token,\r\n                meetingId: info.meetingId,\r\n                member: angular.toJson(info.member)\r\n            };\r\n            http.putRequest(path, param, callback);\r\n        },\r\n        removeMember: function(info, callback)\r\n        {\r\n            var path = \"/member\";\r\n            var param = {\r\n                token: info.token,\r\n                id: info.id\r\n            };\r\n            http.deleteRequest(path, param, callback);\r\n        },\r\n        listMember: function(info, callback)\r\n        {\r\n            var path = \"/member\";\r\n            var param = {\r\n                token: info.token,\r\n                meetingId: info.meetingId\r\n            };\r\n            http.getRequest(path, param, callback);\r\n        },\r\n        login: function(info, callback)\r\n        {\r\n            var path = \"/member/login\";\r\n            var param = {\r\n                meetingId: info.meetingId,\r\n                email: info.email,\r\n                password: info.password\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        },\r\n        trustedLogin: function(info, callback)\r\n        {\r\n            var path = \"/trusted/login\";\r\n            var param = {\r\n                payload: info.payload,\r\n                checksum: info.checksum\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        }\r\n    };\r\n});\n\"use strict\";\r\nangular.module('api').factory('$meeting', function(http)\r\n{\r\n    return {\r\n        createMeeting: function(info, callback)\r\n        {\r\n            var path = \"/meeting\";\r\n            var param = {\r\n                token: info.token,\r\n                meeting: angular.toJson(info.meeting)\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        },\r\n        updateMeeting: function(info, callback)\r\n        {\r\n            var path = \"/meeting\";\r\n            var param = {\r\n                token: info.token,\r\n                meeting: angular.toJson(info.meeting)\r\n            };\r\n            http.putRequest(path, param, callback);\r\n        },\r\n        endMeeting: function(info, callback)\r\n        {\r\n            var path = \"/meeting/end\";\r\n            var param = {\r\n                token: info.token,\r\n                id: info.meetingId\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        },\r\n        listMeeting: function(info, callback)\r\n        {\r\n            var path = \"/meeting/\";\r\n            var param = {\r\n                token: info.token\r\n            };\r\n            http.getRequest(path, param, callback);\r\n        },\r\n        getMeeting: function(info, callback)\r\n        {\r\n            var path = \"/meeting/\";\r\n            var param = {\r\n                token: info.token,\r\n                id: info.meetingId\r\n            };\r\n            http.getRequest(path, param, callback);\r\n        },\r\n        setMeetingConfig: function(info, callback)\r\n        {\r\n            var path = \"/meeting/config\";\r\n            var param = {\r\n                token: info.token,\r\n                config: info.config\r\n            };\r\n            http.putRequest(path, param, callback);\r\n        },\r\n        getMeetingConfig: function(info, callback)\r\n        {\r\n            var path = \"/meeting/config\";\r\n            var param = {\r\n                token: info.token\r\n            };\r\n            http.getRequest(path, param, callback);\r\n        },\r\n        uploadPresentation: function(info, callback)\r\n        {\r\n            var path = \"/meeting/uploadPresentation\";\r\n            var file = info.file;\r\n            http.uploadRequest(path, file, callback);\r\n        },\r\n        shareFile: function(info, callback)\r\n        {\r\n            var path = \"/meeting/shareFile\";\r\n            var file = info.file;\r\n            http.uploadRequest(path, file, callback);\r\n        }\r\n    };\r\n});\n\"use strict\";\r\nangular.module('api').factory('$measure', function(http)\r\n{\r\n    return {\r\n        downChannel: function(info, callback)\r\n        {\r\n            var path = \"/measure/downChannel\";\r\n            var param = {};\r\n            http.getRequest(path, param, callback);\r\n        },\r\n        upChannel: function(info, callback)\r\n        {\r\n            var path = \"/measure/upChannel\";\r\n            var param = {};\r\n            http.postRequest(path, param, callback);\r\n        },\r\n      \r\n    };\r\n});\n\"use strict\";\r\nangular.module('api').factory('$auth', function(http)\r\n{\r\n    return {\r\n        loginAccount: function(info, callback)\r\n        {\r\n            var path = \"/auth/local\";\r\n            var param = {\r\n                email: info.email,\r\n                password: info.password\r\n            };\r\n            http.postRequest(path, param, callback);\r\n        }          \r\n    };\r\n});\n'use strict';\r\nangular.module('api').factory('$trainingSocket', function($log, trainingSocketUrl)\r\n{\r\n    try {\r\n        var ws = new WebSocket(trainingSocketUrl);\r\n        return ws;\r\n    } catch (exc) {\r\n        $log.error('Cannot connect to server');\r\n        return null;\r\n    }\r\n})\r\n.factory('$conferenceSocket', function($log, conferenceSocketUrl)\r\n{\r\n    try {\r\n        var ws = new WebSocket(conferenceSocketUrl);\r\n        return ws;\r\n    } catch (exc) {\r\n        $log.error('Cannot connect to server');\r\n        return null;\r\n    }\r\n});\n'use strict';\r\nangular.module('api').factory('http', function($http, apiUrl, blockUI, $log)\r\n{\r\n    var transform = function(data){\r\n        var str = [];\r\n        \r\n        for(var p in data) {\r\n            str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(data[p]));\r\n        }\r\n        \r\n        return str.join(\"&\");        \r\n    };\r\n\r\n    return {\r\n        postRequest: function(path, param, callback)\r\n        {\r\n            var url = apiUrl + path;\r\n            var req = {\r\n                method: 'POST',\r\n                url: url,\r\n                headers:\r\n                {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n                },\r\n                transformRequest: transform,\r\n                timeout: 300000,\r\n                data: param\r\n            };\r\n            blockUI.start();\r\n            $log.info('POST request: ' + req.data);\r\n            $http(req).then(function(data)\r\n            {\r\n                if (data.status === 200)\r\n                {\r\n                    blockUI.stop();\r\n                    if (typeof(data.data.result) ===\r\n                        \"boolean\" && !data.data.result)\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: false\r\n                        });\r\n                    }\r\n                    else\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: true,\r\n                            data: data.data\r\n                        });\r\n                    }\r\n                }\r\n            }, function(error)\r\n            {\r\n                blockUI.stop();\r\n                $log.error(error);\r\n                callback(\r\n                {\r\n                    status: false\r\n                });\r\n            });\r\n        },\r\n        getRequest: function(path, param, callback)\r\n        {\r\n            var url = apiUrl + path;\r\n            var req = {\r\n                method: 'GET',\r\n                url: url,\r\n                headers:\r\n                {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n                },\r\n                transformRequest: transform,\r\n                params: param\r\n            };\r\n            blockUI.start();\r\n            $log.info('GET request: ' + req.params);\r\n            $http(req).then(function(data)\r\n            {\r\n                blockUI.stop();\r\n                if (data.status === 200)\r\n                {\r\n                    if (typeof(data.data.result) ===\r\n                        \"boolean\" && !data.data.result)\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: false\r\n                        });\r\n                    }\r\n                    else\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: true,\r\n                            data: data.data\r\n                        });\r\n                    }\r\n                }\r\n            }, function(error)\r\n            {\r\n                blockUI.stop();\r\n                $log.error(error);\r\n                callback(\r\n                {\r\n                    status: false\r\n                });\r\n            });\r\n        },\r\n        putRequest: function(path, param, callback)\r\n        {\r\n            var url = apiUrl + path;\r\n            var req = {\r\n                method: 'PUT',\r\n                url: url,\r\n                headers:\r\n                {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n                },\r\n                transformRequest: transform,\r\n                data: param\r\n            };\r\n            $log.info('PUT request: ' + req.params);\r\n            blockUI.start();\r\n            $http(req).then(function(data)\r\n            {\r\n                blockUI.stop();\r\n                if (data.status === 200)\r\n                {\r\n                    if (typeof(data.data.result) ===\r\n                        \"boolean\" && !data.data.result)\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: false\r\n                        });\r\n                    }\r\n                    else\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: true,\r\n                            data: data.data\r\n                        });\r\n                    }\r\n                }\r\n            }, function(error)\r\n            {\r\n                blockUI.stop();\r\n                $log.error(error);\r\n                callback(\r\n                {\r\n                    status: false\r\n                });\r\n            });\r\n        },\r\n        deleteRequest: function(path, param, callback)\r\n        {\r\n            var url = apiUrl + path;\r\n            var req = {\r\n                method: 'DELETE',\r\n                url: url,\r\n                headers:\r\n                {\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n                },\r\n                transformRequest: transform,\r\n                data: param\r\n            };\r\n            $log.info('DELETE request: ' + req.data);\r\n            blockUI.start();\r\n            $http(req).then(function(data)\r\n            {\r\n                if (data.status === 200)\r\n                {\r\n                    blockUI.stop();\r\n                    if (typeof(data.data.result) ===\r\n                        \"boolean\" && !data.data.result)\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: false\r\n                        });\r\n                    }\r\n                    else\r\n                    {\r\n                        callback(\r\n                        {\r\n                            status: true,\r\n                            data: data.data\r\n                        });\r\n                    }\r\n                }\r\n            }, function(error)\r\n            {\r\n                blockUI.stop();\r\n                $log.error(error);\r\n                callback(\r\n                {\r\n                    status: false\r\n                });\r\n            });\r\n        },\r\n        uploadRequest: function(path, file, callback)\r\n        {\r\n            var url = apiUrl + path;\r\n            var xhr = new XMLHttpRequest();\r\n            var fd = new FormData();\r\n            xhr.open(\"POST\", url, true);\r\n            blockUI.start();\r\n            $log.info('UPLOAD request: ' + path);\r\n            xhr.onreadystatechange = function()\r\n            {\r\n                if (xhr.readyState === 4 && xhr.status === 200)\r\n                {\r\n                    blockUI.stop();\r\n                    callback(\r\n                    {\r\n                        status: true,\r\n                        data: angular.fromJson(xhr.responseText)\r\n                    });\r\n                    \r\n                }\r\n            };\r\n            fd.append('file', file);\r\n            xhr.send(fd);\r\n        }\r\n    };\r\n});\n'use strict';\r\n\r\nangular.module('trainingModule',['api','toastr','config','underscore','LocalStorageModule','pageslide-directive','base64',\r\n                                   'angular-simple-chat','ngAudio','ngActivityIndicator']);\n'use strict';\r\nangular.module('trainingModule').controller('TrainingRoomController', function($scope, $rootScope, $location, $routeParams, _, localStorageService, $log, $interval, $sce, $trainingSocket, $window, $document, deviceDetector, iceServers, $recorder,\r\n    $mdSidenav, $base64, $timeout, ngAudio, toastr, $route, pdfDelegate,$meeting,$screenShare) {\r\n    // publication\r\n    var PUB_INITIAL = 0;\r\n    var PUB_INPROGRESS = 1;\r\n    var PUB_CONNECTING = 2;\r\n    var PUB_CONNECTED = 3;\r\n    \r\n    // subscription\r\n    var SUB_INITIAL = 10;\r\n    var SUB_INPROGRESS = 11;\r\n    var SUB_CONNECTING = 12;\r\n    var SUB_CONNECTED = 13;\r\n    \r\n    var GATHER_TIMEOUT = 30*1000;\r\n    var CALLING_TIMEOUT = 30*1000;\r\n    \r\n    function RoomMember(id,profile)\r\n    {\r\n        this.id = id;\r\n        this.avail = false;\r\n        this.profile = profile;\r\n        this.invited = false;\r\n        this.pubWebRtcEndpoint = null;\r\n        this.pubOfferSdp = null;\r\n        this.pubState = PUB_INITIAL;\r\n        this.pubGatherToken = null;\r\n        this.pubTimeoutToken = null;\r\n        this.pubCandidateSendQueue =  [];\r\n        this.subWebRtcEndpoint = null;\r\n        this.subOfferSdp = null;\r\n        this.subState = SUB_INITIAL;\r\n        this.subGatherToken = null;\r\n        this.subCandidateSendQueue =  [];\r\n        this.pubCamera = null;        \r\n        this.subVideoSlot = null;\r\n    }\r\n    \r\n    function ScreenShare()\r\n    {\r\n        this.webRtcEndpoint = null;\r\n        this.offerSdp = null;\r\n        this.state = PUB_INITIAL;\r\n        this.gatherToken = null;\r\n        this.timeoutToken = null;\r\n        this.candidateSendQueue =  [];\r\n        this.camera = null;\r\n        this.avail = false;\r\n    }\r\n\r\n    function init() {\r\n        $scope.audio = true;\r\n        $scope.video = true;\r\n        $scope.handUp = true;\r\n        $scope.notiHandUp = true;\r\n        $scope.toggleVideoFlag = false;\r\n        $scope.sound = ngAudio.load(\"assets/sounds/ring.mp3\");\r\n        $scope.fullScreen = false;\r\n        $scope.pdfUrl = 'assets/images/Intro.pdf';\r\n        $scope.zoom = 90;\r\n        $scope.countAllocated = 0;\r\n        \r\n        $scope.meeting = localStorageService.get(\"meeting\");\r\n        $scope.myProfile = localStorageService.get(\"member\");\r\n        $scope.memberProfiles = localStorageService.get(\"memberList\");\r\n        $scope.memberList = [];\r\n        $scope.videoSlots = [];\r\n        $scope.chatMessage = [];\r\n        $scope.fileList = [];\r\n        var count = 0;\r\n        _.each($scope.memberProfiles,function(profile) {\r\n            $scope.memberList.push(new RoomMember(profile._id,profile));\r\n            $scope.videoSlots.push({\r\n                allocated: false,\r\n                videoId: 'remoteCamera' + count,\r\n                index: count,\r\n                member:null\r\n            });\r\n            count++;\r\n        });        \r\n        $scope.me = _.find($scope.memberList, function(m) {\r\n            return m.id == $scope.myProfile._id;\r\n        });\r\n        $scope.me.pubCamera = document.getElementById('localCamera');\r\n        $scope.presenter = _.find($scope.memberList, function(m) {\r\n            return m.profile.role == 'presenter';\r\n        });\r\n        $scope.presenter.subVideoSlot = $scope.videoSlots[0]; \r\n        $scope.viewerList = _.filter($scope.memberList, function(m) {\r\n            return m.profile.role != 'presenter';\r\n        });   \r\n        $scope.screenShare = new ScreenShare();\r\n        \r\n    };\r\n    \r\n    $scope.connect = function() {\r\n        if ($trainingSocket.readyState == 1)  {\r\n            sendMessage({ id: 'join'});\r\n            $scope.sound.loop = true;\r\n            $scope.sound.play();\r\n            $scope.me.pubState = PUB_INPROGRESS;\r\n        } else {\r\n            $window.location.reload();\r\n        }\r\n    }\r\n    \r\n    $scope.disconnect = function() {\r\n        $scope.me.pubState = PUB_INITIAL;\r\n        $scope.sound.stop();\r\n        try {\r\n            if ($scope.me.pubWebRtcEndpoint)\r\n                $scope.me.pubWebRtcEndpoint['peerConnection'].close();\r\n            _.each($scope.memberList ,function(member) {\r\n                if (member.subState != SUB_INITIAL)\r\n                    unsubscribe(member);\r\n            });\r\n            if ($scope.screenShare.webRtcEndpoint)\r\n                $scope.screenShare.webRtcEndpoint['peerConnection'].close();\r\n            sendMessage({\r\n                id: 'leave'\r\n            });\r\n        } catch (e) {\r\n            $log.error(e);\r\n        }\r\n    }\r\n    \r\n    $trainingSocket.onmessage = function(message) {\r\n        var parsedMessage = JSON.parse(message.data);\r\n        console.info('Received message: ' + message.data);\r\n        switch (parsedMessage.id) {\r\n            case 'joinResponse':                \r\n                joinResponse(parsedMessage);\r\n                break;\r\n            case 'end':             \r\n                endConference();\r\n                break;\r\n            case 'memberStatus':\r\n                memberStatus(parsedMessage);\r\n                break;\r\n            case 'handUp':\r\n                handUp(parsedMessage);\r\n                break;\r\n            case 'handDown':\r\n                handDown(parsedMessage);\r\n                break;\r\n            case 'publishResponse':\r\n                publishResponse(parsedMessage);\r\n                break;\r\n            case 'publishScreenResponse':\r\n                publishScreenResponse(parsedMessage);\r\n                break;\r\n            case 'subscribeResponse':\r\n                subscribeResponse(parsedMessage);\r\n                break;\r\n            case 'subscribeScreenResponse':\r\n                subscribeScreenResponse(parsedMessage);\r\n                break;\r\n            case 'chat':\r\n                receiveChat(parsedMessage);\r\n                break;\r\n            case 'presentation':\r\n                processPresentationEvent(parsedMessage.event,parsedMessage.object);\r\n                break;\r\n            case 'fileShare':\r\n                processFileShareEvent(parsedMessage.event,parsedMessage.object);\r\n                break;\r\n            default:\r\n                console.error('Unrecognized message', parsedMessage);\r\n            }\r\n        $scope.$apply();\r\n    };\r\n        \r\n    function sendMessage(message) {\r\n        message.memberId = $scope.me.id;\r\n        message.meetingId = $scope.meeting._id;\r\n        var jsonMessage = JSON.stringify(message);\r\n        $log.info('Senging message: ' + jsonMessage);\r\n        try {\r\n            $trainingSocket.send(jsonMessage);\r\n        } catch (exc) {\r\n            $log.info('Error sending message: ' );\r\n            $window.location.reload();\r\n        }\r\n    };\r\n     \r\n    function joinResponse(message) {\r\n        if (message.response == 'accepted') {\r\n            publish();\r\n            processPresentation(message.presentation);\r\n            processFileShare(message.fileShare);\r\n        } else {\r\n            $location.path('/');\r\n        }\r\n    };\r\n\r\n    function publish() {  \r\n        var options = {\r\n            localVideo: $scope.me.pubCamera,\r\n            onicecandidate: onPublishIceCandidate,\r\n            iceServers:iceServers,\r\n            oncandidategatheringdone: onPublishComplete\r\n        };\r\n        $scope.me.pubWebRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(options, function(error) {\r\n            if (error) {\r\n                $log.error(error);\r\n                return;\r\n            }\r\n            this.generateOffer(onPublish);\r\n        });\r\n        $scope.me.pubGatherToken = $timeout(function() {\r\n            if ($scope.me.pubState != PUB_CONNECTING) {\r\n                $scope.me.pubState = PUB_CONNECTING;\r\n                sendPublishData();\r\n            }\r\n        },GATHER_TIMEOUT);\r\n    }\r\n\r\n    function onPublishIceCandidate(candidate) {\r\n        $scope.me.pubCandidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onPublish(error, offerSdp) {\r\n        if (error) {\r\n            $log.info(error);\r\n            return;\r\n        }\r\n        $scope.me.pubOfferSdp = offerSdp;        \r\n    }\r\n\r\n    function publishResponse(message) {\r\n        if (message.response != 'accepted') {\r\n            $log.info('Disconnect due to reject from server');\r\n            $scope.disconnect();\r\n        } else {\r\n            $scope.me.pubWebRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            _.each(message.candidateList,function(candidate) {\r\n                $scope.me.pubWebRtcEndpoint.addIceCandidate(candidate);\r\n            })\r\n            sendMessage({\r\n                id: 'publishAvail'\r\n            });\r\n            $scope.me.pubState = PUB_CONNECTED;\r\n            $scope.sound.stop();\r\n        }\r\n    }\r\n    \r\n    function onPublishComplete() {\r\n        $timeout.cancel($scope.me.pubGatherToken);\r\n        if ($scope.me.pubState != PUB_CONNECTING) {\r\n            $scope.me.pubState = PUB_CONNECTING;\r\n            sendPublishData();\r\n        }\r\n    }\r\n    \r\n    function sendPublishData() {\r\n        if (!$scope.me.pubOfferSdp || !$scope.me.pubCandidateSendQueue.length) {\r\n            $log.info('Disconnect due to device error');\r\n            $scope.disconnect();\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'publish',\r\n                sdpOffer: $scope.me.pubOfferSdp,\r\n                candidateList: $scope.me.pubCandidateSendQueue\r\n         };\r\n        sendMessage(message);\r\n        $scope.me.pubOfferSdp = null;\r\n        $scope.me.pubCandidateSendQueue = [];\r\n        $scope.me.pubTimeoutToken = $timeout(function() {\r\n            if ($scope.me.pubState != PUB_CONNECTED) {\r\n                $log.info('Disconnect due to calling timeout');\r\n                $scope.disconnect();\r\n            }\r\n        },CALLING_TIMEOUT);\r\n    }\r\n    \r\n    $scope.resubscribe = function(pubId) {\r\n        var publisher = _.find($scope.memberList, function(m) {\r\n            return m.id == pubId;\r\n        });\r\n        if (publisher.invited && publisher.avail) {\r\n            unsubscribe(publisher);\r\n            subscribe(publisher);\r\n        }\r\n    }\r\n\r\n    function unsubscribe(member) {\r\n        if (member.subVideoSlot) {            \r\n            member.subState = SUB_INITIAL;\r\n            if (member.id!= $scope.presenter.id) {\r\n                if (member.subVideoSlot.allocated) {\r\n                    $scope.countAllocated--;\r\n                }                \r\n                member.subVideoSlot.allocated = false;\r\n                member.subVideoSlot.member = null;\r\n                member.subVideoSlot = null;    \r\n            }            \r\n            if (member.subGatherToken)\r\n                $timeout.cancel(member.subGatherToken);\r\n            try {\r\n                if (member.subWebRtcEndpoint)\r\n                    member.subWebRtcEndpoint['peerConnection'].close();\r\n            } catch (e) {\r\n                $log.error(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    function subscribe(member) {        \r\n        if (!$scope.me.avail) {\r\n            return;\r\n        }\r\n        var slot = null;\r\n        if (member.subVideoSlot) {\r\n            slot = member.subVideoSlot;\r\n        } else {\r\n            slot = _.find($scope.videoSlots, function(s) {\r\n                return !s.allocated  && s.index > 0;\r\n            });\r\n        }\r\n        if (!slot) return;\r\n        if (member.id !== $scope.presenter.id) {\r\n            $scope.countAllocated++;\r\n        }\r\n        member.subVideoSlot = slot;\r\n        slot.member = member;\r\n        slot.allocated = true;\r\n        member.subState = SUB_INPROGRESS;\r\n        var remoteCamera = document.getElementById(slot.videoId);\r\n        var options = {\r\n            remoteVideo: remoteCamera,\r\n            onicecandidate: onSubscribeIceCandidate.bind({member:member }),\r\n            iceServers: iceServers,\r\n            oncandidategatheringdone: onSubscribeComplete.bind({member:member})\r\n        }\r\n        member.subGatherToken = $timeout(function(m) {\r\n            if (m.subState != SUB_CONNECTING) {\r\n                sendSubscribeData(m);\r\n                m.subState = SUB_CONNECTING;\r\n            }\r\n        },GATHER_TIMEOUT,true,member);\r\n        \r\n        member.subWebRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(options, function(error) {\r\n            if (error) {\r\n                $log.error(error);\r\n                return;\r\n            }\r\n            this.generateOffer(onSubscribe.bind({\r\n                member: member\r\n            }));\r\n        });\r\n    }\r\n\r\n    function onSubscribeIceCandidate(candidate) {\r\n        this.member.subCandidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onSubscribe(error, offerSdp) {\r\n        if (error) {\r\n            $log.error(error);\r\n            return;\r\n        }\r\n        this.member.subSdpOffer = offerSdp;\r\n    }\r\n\r\n    function subscribeResponse(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.pubId;\r\n        });\r\n        if (message.response != 'accepted') {\r\n            member.subState = SUB_INITIAL;\r\n            toastr.error('Server error, please try again later');\r\n        } \r\n        else {            \r\n            member.subWebRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            if (member.id == $scope.me.id) {\r\n                member.subWebRtcEndpoint.remoteVideo.muted = true;\r\n            }\r\n            if (member.subVideoSlot) {\r\n                member.subState = SUB_CONNECTED;\r\n                _.each(message.candidateList,function(candidate) {\r\n                    member.subWebRtcEndpoint.addIceCandidate(candidate);\r\n                });\r\n                sendMessage({\r\n                    id: 'subscribeAvail',\r\n                    pubId:message.pubId\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    function onSubscribeComplete() {\r\n        $timeout.cancel(this.member.subGatherToken);\r\n        if (this.member.subState != SUB_CONNECTING) {\r\n            sendSubscribeData(this.member);\r\n            this.member.subState = SUB_CONNECTING;\r\n        }\r\n        \r\n    }\r\n    \r\n    function sendSubscribeData(member) {\r\n        if (!member.subSdpOffer || !member.subCandidateSendQueue.length) {\r\n            toastr.error(\"Device error\");\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'subscribe',\r\n                pubId: member.id,\r\n                sdpOffer: member.subSdpOffer,\r\n                candidateList:member.subCandidateSendQueue\r\n            }\r\n        sendMessage(message);\r\n        member.subSdpOffer = null;\r\n        member.subCandidateSendQueue = [];\r\n    }\r\n\r\n    function endConference(message) {\r\n        var url = '/';\r\n        \r\n        if ($scope.meeting.logoutUrl) {\r\n            var base64EncodedString = decodeURIComponent($scope.meeting.logoutUrl);\r\n            url = $base64.decode(base64EncodedString);\r\n        }\r\n        \r\n        $window.location.href = url;\r\n    };\r\n\r\n    function memberStatus(message) {\r\n        updateMemberList(message.onlineList);\r\n    };\r\n    \r\n\r\n    function updateMemberList(onlineList) {\r\n        var unSubList = [];\r\n        var subList = [];\r\n        var shareScreen = false;\r\n        _.each($scope.memberList, function(curVal) {\r\n            var newVal = _.find(onlineList, function(m) {\r\n                return curVal.id == m._id;\r\n            });\r\n            if (newVal) {\r\n                curVal.avail = newVal.avail;\r\n                curVal.screenAvail = newVal.screenAvail;\r\n                curVal.invited = newVal.invited;\r\n                curVal.online = true;\r\n                if (curVal.invited) {\r\n                    if (curVal.avail) {\r\n                        if (!curVal.subVideoSlot)\r\n                            subList.push(curVal);\r\n                        if (curVal.subVideoSlot && curVal.subState==SUB_INITIAL)\r\n                            subList.push(curVal);\r\n                    } else {\r\n                        if (curVal.subVideoSlot )\r\n                            unSubList.push(curVal);\r\n                    }\r\n                    if (curVal.screenAvail) {\r\n                        if ( $scope.screenShare.state==SUB_INITIAL)\r\n                            shareScreen =  true;\r\n                    } \r\n                } else {\r\n                    unSubList.push(curVal);\r\n                }\r\n            } else {\r\n                if (curVal.invited) \r\n                    unSubList.push(curVal);\r\n                curVal.invited = false;\r\n                curVal.avail = false;\r\n                curVal.screenAvail = false;\r\n                curVal.online = false;\r\n            }\r\n        });        \r\n        _.each(unSubList, function(member) {\r\n            unsubscribe(member);\r\n        });\r\n        _.each(subList, function(member) {\r\n            if (member.id != $scope.me.id || $scope.me.profile.role !='presenter')\r\n                subscribe(member);\r\n        });\r\n        if ( $scope.me.profile.role!='presenter'  ) {\r\n            if (shareScreen) \r\n                subscribeScreen();\r\n            else\r\n                unsubscribeScreen();\r\n        }\r\n    }\r\n    $scope.leave = function() {\r\n        var url = '/';\r\n        \r\n        if ($scope.meeting.logoutUrl) {\r\n            var base64EncodedString = decodeURIComponent($scope.meeting.logoutUrl);\r\n            url = $base64.decode(base64EncodedString);\r\n        }\r\n\r\n        sendMessage({\r\n            id: 'leave'\r\n        });\r\n\r\n        $window.location.href = url;        \r\n    }\r\n    $scope.endLesson = function() {\r\n        sendMessage({\r\n            id: 'end'\r\n        });\r\n    }\r\n    $scope.toggleAudio = function() {\r\n        var localStream = $scope.me.pubWebRtcEndpoint.getLocalStream();\r\n        if (localStream) {\r\n            var audioTrack = localStream.getAudioTracks()[0];\r\n            $scope.audio = !$scope.audio;\r\n            audioTrack.enabled = $scope.audio;\r\n        }\r\n    };\r\n    $scope.toggleVideo = function() {\r\n        var localStream = $scope.me.pubWebRtcEndpoint.getLocalStream();\r\n        if (localStream) {\r\n            var videoTrack = localStream.getVideoTracks()[0];\r\n            $scope.video = !$scope.video;\r\n            videoTrack.enabled = $scope.video;\r\n        }\r\n    };\r\n    $scope.toggleHand = function() {\r\n        $scope.handUp = !$scope.handUp;\r\n        $scope.notiHandUp = false;\r\n        if (!$scope.handUp) {\r\n            sendMessage({id: 'handUp'});\r\n        } else {\r\n            sendMessage({id: 'handDown'});\r\n        }\r\n    };\r\n    $scope.toggleSidenav = function(eleId) {\r\n        $mdSidenav(eleId).toggle();\r\n    };\r\n    $scope.toggleMainVideo = function() {\r\n        $scope.toggleVideoFlag = !$scope.toggleVideoFlag;\r\n    }\r\n    $scope.changeSizeSlide = function() {\r\n        $scope.fullScreen = !$scope.fullScreen;\r\n    }\r\n    $scope.memberInvite = function(memberId) {\r\n        if ($scope.countAllocated > 3) {\r\n            return;\r\n        }\r\n        $scope.notiHandUp = true;\r\n\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == memberId;\r\n        });\r\n        member.handUp = false;\r\n\r\n        if (!member.invited && member.online) {\r\n            sendMessage({\r\n                id: 'invite',\r\n                'inviteeId': member.id\r\n            });\r\n        }\r\n    }\r\n    $scope.memberDiscard = function(slot) {\r\n        var member = slot.member;\r\n        if (member) {\r\n            $scope.countAllocated--;\r\n            member.handUp = false;\r\n            sendMessage({\r\n                id: 'discard',\r\n                'inviteeId': member.id\r\n            });\r\n        }\r\n    }\r\n    var handUp = function(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.memberId;\r\n        });\r\n        member.handUp = true;\r\n    }\r\n    var handDown = function(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.memberId;\r\n        });\r\n        member.handUp = false;\r\n    }\r\n    $scope.chat = function() {\r\n        var message = {\r\n            id: 'chat',\r\n            text: $scope.chatInput\r\n        }\r\n        sendMessage(message);\r\n        $scope.chatInput = \"\";\r\n    }\r\n\r\n    $scope.sendChatMessage = function($event) {\r\n        if (event.code === 'Enter') {\r\n            $scope.chat();\r\n        }\r\n    };\r\n\r\n    function receiveChat(message) {\r\n        var idx = $scope.chatMessage.length; \r\n\r\n        message.idx = 'message_' + idx;\r\n        $scope.chatMessage.push({\r\n            'user': message.user,\r\n            'text': message.text,\r\n            'idx': message.idx\r\n        });\r\n        \r\n        var newMsg = angular.element(document.querySelector('#message_' + (idx - 1)));\r\n        var chatContent = angular.element(document.querySelector('#chat-content'));\r\n        if (!(_.isEmpty(newMsg))) {\r\n            chatContent.scrollTo(newMsg, 0, 500);\r\n        }                    \r\n    }\r\n\r\n    $scope.byIndex = function(slot) {\r\n        return slot.index > 0;\r\n    };\r\n\r\n    $rootScope.$on('$routeChangeStart', function(event, next, current) {\r\n        if (!current) {\r\n            $trainingSocket.close();\r\n        }\r\n    });\r\n    $window.onbeforeunload = function() {\r\n        $trainingSocket.close();\r\n        $interval.cancel(recordToken);\r\n    };\r\n\r\n    init();\r\n    \r\n    function processPresentation(presentation) {\r\n        var lastIndexInsert = _.findLastIndex(presentation, {\r\n            event:'insertSlide'\r\n        });\r\n        var presentationLast = [];\r\n        if(lastIndexInsert && presentation) {\r\n            presentationLast = presentation.slice(lastIndexInsert);\r\n            _.each(presentationLast,function(msg){\r\n                onWhiteboardEvent(msg.event, msg.object);\r\n                getPageInfo();\r\n            });\r\n        }                \r\n    }\r\n\r\n    function receiveWhiteboardEvent(event,object) {\r\n        onWhiteboardEvent(event,object);\r\n\r\n        _.each(presentation.slice(lastIndexInsert),function(msg){\r\n            onPresentationEvent(msg.event,msg.object);\r\n            getPageInfo();\r\n        });        \r\n    }\r\n\r\n    function processPresentationEvent(event,object) {\r\n        onPresentationEvent(event,object);\r\n        getPageInfo();\r\n    }\r\n    \r\n    function onPresentationEvent(event,object) {\r\n        if (event=='insertSlide') {\r\n            pdfDelegate\r\n                    .$getByHandle('my-pdf-container')\r\n                    .load(object);\r\n        }\r\n        if (event=='switchPage') {\r\n            pdfDelegate.$getByHandle('my-pdf-container').goToPage(object.currPage);\r\n        }\r\n        if (event=='zoomOutSlide') {\r\n            pdfDelegate.$getByHandle('my-pdf-container').zoomTo(object.zoomAmount);\r\n        }\r\n        if (event=='zoomInSlide') {\r\n            pdfDelegate.$getByHandle('my-pdf-container').zoomTo(object.zoomAmount);\r\n        }\r\n    }\r\n\r\n    // Pdf viewer\r\n    function getPageInfo() {\r\n        $scope.currPage = pdfDelegate.$getByHandle('my-pdf-container').getCurrentPage();\r\n        $scope.totalPages = pdfDelegate.$getByHandle('my-pdf-container').getPageCount();\r\n    }\r\n\r\n    $scope.pdfSwitchPage = function(offset) {\r\n        var info = {\r\n            currPage: 0,\r\n            totalPages: pdfDelegate.$getByHandle('my-pdf-container').getPageCount()\r\n        };       \r\n        if (offset == 1) {\r\n            pdfDelegate.$getByHandle('my-pdf-container').next();\r\n        } else {\r\n            pdfDelegate.$getByHandle('my-pdf-container').prev();\r\n        }        \r\n        getPageInfo();\r\n        info.currPage = pdfDelegate.$getByHandle('my-pdf-container').getCurrentPage();\r\n        sendMessage({id:'presentation',event:'switchPage',object:info});\r\n    }\r\n\r\n\r\n    $scope.zoomOut = function() {\r\n        pdfDelegate.$getByHandle('my-pdf-container').zoomOut();\r\n        $scope.zoom = ($scope.zoom === 50) ? 50 : ($scope.zoom - 10);\r\n    }\r\n\r\n    $scope.zoomIn = function() {\r\n        pdfDelegate.$getByHandle('my-pdf-container').zoomIn();\r\n        $scope.zoom += 10;\r\n    }\r\n\r\n    // Upload file\r\n    // upload on file select or drop\r\n    $scope.uploadPresentation = function (file) {\r\n        if (!file) {\r\n            return;\r\n        }\r\n        $meeting.uploadPresentation({file:file},function(result) {\r\n            if (result.status && result.data.status) {\r\n                console.log('url', result.data.url);\r\n                 $scope.pdfUrl = result.data.url;\r\n                 $scope.$apply();\r\n                 pdfDelegate\r\n                    .$getByHandle('my-pdf-container')\r\n                    .load(result.data.url);\r\n                sendMessage({id:'presentation',event:'insertSlide',object:result.data.url});\r\n            }\r\n        })\r\n    };\r\n    \r\n    function processFileShare(fileShare) {\r\n        _.each(fileShare,function(msg){\r\n            onFileShareEvent(msg.event,msg.object)\r\n        });        \r\n    }\r\n    \r\n    function onFileShareEvent(event,object) {\r\n        if (event=='addFile') {\r\n            $scope.fileList.push(object);\r\n        }\r\n        if (event=='removeFile') {\r\n            $scope.fileList = _.reject($scope.fileList,function(item) {\r\n                return item.url == object.url\r\n            });\r\n        }\r\n\r\n    }\r\n    \r\n    $scope.shareFile = function (file) {\r\n        if (!file) {\r\n            return;\r\n        }\r\n        console.log(file);\r\n        $meeting.shareFile({file:file},function(result) {\r\n            if (result.status && result.data.status) {\r\n                console.log('url', result.data.url);\r\n                 $scope.fileList.push({name:file.name,url:result.data.url});\r\n                 $scope.$apply();\r\n                sendMessage({id:'fileShare',event:'addFile',object:{name:file.name,url:result.data.url}});\r\n            }\r\n        })\r\n    }\r\n    \r\n    $scope.removeFile = function (file) {\r\n        if (!file) {\r\n            return;\r\n        }\r\n        $scope.fileList = _.reject($scope.fileList,function(item) {\r\n            return item.url == file.url\r\n        });\r\n        sendMessage({id:'fileShare',event:'removeFile',object:file});\r\n           \r\n    }\r\n    \r\n    $scope.shareScreen =  function() {\r\n        if ($scope.screenShare.state != PUB_INITIAL)\r\n            onUnshareScreen();\r\n        $scope.screenShare.camera = document.getElementById('screenCamera');\r\n        $screenShare.start(function (success, stream, source) {\r\n            $scope.screenShare.camera.src = URL.createObjectURL(stream);\r\n            var options = {\r\n                            localVideo: $scope.screenShare.camera,\r\n                            iceServers:iceServers,\r\n                            videoStream: stream,\r\n                            onicecandidate: onPublishScreenIceCandidate,\r\n                            oncandidategatheringdone: onPublishScreenComplete\r\n                          };\r\n            stream.getVideoTracks()[0].onended = function () {\r\n                onUnshareScreen();\r\n              };\r\n            $scope.screenShare.webRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(options, function(error) {\r\n                if (error) {\r\n                    $log.error(error);\r\n                    return;\r\n                }\r\n                this.generateOffer(onPublishScreen);\r\n            });\r\n            $scope.screenShare.gatherToken = $timeout(function() {\r\n                if ($scope.screenShare.state != PUB_CONNECTING) {\r\n                    $scope.screenShare.state = PUB_CONNECTING;\r\n                    sendPublishScreenData();\r\n                }\r\n            },GATHER_TIMEOUT);\r\n        });\r\n    }\r\n    \r\n    function onPublishScreenIceCandidate(candidate) {\r\n        $scope.screenShare.candidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onPublishScreen(error, offerSdp) {\r\n        if (error) {\r\n            $log.info(error);\r\n            return;\r\n        }\r\n        $scope.screenShare.offerSdp = offerSdp;\r\n    }\r\n\r\n    function publishScreenResponse(message) {\r\n        if (message.response != 'accepted') {\r\n            $log.info('Disconnect due to reject from server');\r\n            $scope.disconnect();\r\n        } else {\r\n            $scope.screenShare.webRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            _.each(message.candidateList,function(candidate) {\r\n                $scope.screenShare.webRtcEndpoint.addIceCandidate(candidate);\r\n            })\r\n            sendMessage({\r\n                id: 'publishScreenAvail'\r\n            });\r\n            $scope.screenShare.state = PUB_CONNECTED;\r\n        }\r\n    }\r\n    \r\n    function onUnshareScreen() {\r\n        console.log('Unshare screen');\r\n        if ($scope.screenShare.gatherToken)\r\n            $timeout.cancel($scope.screenShare.gatherToken);\r\n        if ($scope.screenShare.timeoutToken)\r\n            $timeout.cancel($scope.screenShare.timeoutToken);\r\n        sendMessage({\r\n            id: 'publishScreenUnavail'\r\n        });\r\n        $scope.screenShare.state = PUB_INITIAL;\r\n        \r\n    }\r\n    \r\n    function onPublishScreenComplete() {\r\n        $timeout.cancel($scope.screenShare.gatherToken);\r\n        if ($scope.screenShare.state != PUB_CONNECTING) {\r\n            $scope.screenShare.state = PUB_CONNECTING;\r\n            sendPublishScreenData();\r\n        }\r\n    }\r\n    \r\n    function sendPublishScreenData() {\r\n        if (!$scope.screenShare.offerSdp || !$scope.screenShare.candidateSendQueue.length) {\r\n            $log.info('Disconnect due to device error');\r\n            $scope.disconnect();\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'publishScreen',\r\n                sdpOffer: $scope.screenShare.offerSdp,\r\n                candidateList: $scope.screenShare.candidateSendQueue\r\n         };\r\n        sendMessage(message);\r\n        $scope.screenShare.offerSdp = null;\r\n        $scope.screenShare.candidateSendQueue = [];\r\n        $scope.screenShare.timeoutToken = $timeout(function() {\r\n            if ($scope.screenShare.state != PUB_CONNECTED) {\r\n                $log.info('Disconnect due to calling timeout');\r\n                $scope.disconnect();\r\n            }\r\n        },CALLING_TIMEOUT);\r\n    }\r\n    \r\n    function unsubscribeScreen() {\r\n        $scope.screenShare.state = SUB_INITIAL;          \r\n        if ($scope.screenShare.gatherToken)\r\n            $timeout.cancel($scope.screenShare.gatherToken);\r\n        try {\r\n            if ($scope.screenShare.webRtcEndpoint)\r\n                $scope.screenShare.wWebRtcEndpoint['peerConnection'].close();\r\n        } catch (e) {\r\n            $log.error(e);\r\n        }\r\n    }\r\n\r\n    function subscribeScreen() {        \r\n        if (!$scope.me.avail) {\r\n            return;\r\n        }\r\n        $scope.screenShare.state = SUB_INPROGRESS;\r\n        $scope.screenShare.camera = document.getElementById('screenCamera');\r\n        var options = {\r\n            remoteVideo: $scope.screenShare.camera,\r\n            onicecandidate: onSubscribeScreenIceCandidate,\r\n            iceServers: iceServers,\r\n            oncandidategatheringdone: onSubscribeScreenComplete\r\n        }\r\n        $scope.screenShare.gatherToken = $timeout(function() {\r\n            if ($scope.screenShare.state != SUB_CONNECTING) {\r\n                sendSubscribeScreenData();\r\n                $scope.screenShare.state = SUB_CONNECTING;\r\n            }\r\n        },GATHER_TIMEOUT);\r\n        \r\n        $scope.screenShare.webRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(options, function(error) {\r\n            if (error) {\r\n                $log.error(error);\r\n                return;\r\n            }\r\n            this.generateOffer(onSubscribeScreen);\r\n        });\r\n    }\r\n\r\n    function onSubscribeScreenIceCandidate(candidate) {\r\n        $scope.screenShare.candidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onSubscribeScreen(error, offerSdp) {\r\n        if (error) {\r\n            $log.error(error);\r\n            return;\r\n        }\r\n        $scope.screenShare.sdpOffer = offerSdp;\r\n    }\r\n\r\n    function subscribeScreenResponse(message) {\r\n        if (message.response != 'accepted') {\r\n            $scope.screenShare.state = SUB_INITIAL;\r\n            toastr.error('Server error, please try again later');\r\n        } \r\n        else {            \r\n            $scope.screenShare.webRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            $scope.screenShare.state = SUB_CONNECTED;\r\n            _.each(message.candidateList,function(candidate) {\r\n                $scope.screenShare.webRtcEndpoint.addIceCandidate(candidate);\r\n            });\r\n            sendMessage({\r\n                id: 'subscribeScreenAvail',\r\n                pubId:$scope.presenter.id\r\n            });    \r\n        }\r\n    }\r\n    \r\n    function onSubscribeScreenComplete() {\r\n        $timeout.cancel($scope.screenShare.gatherToken);\r\n        if ($scope.screenShare.state != SUB_CONNECTING) {\r\n            sendSubscribeScreenData();\r\n            $scope.screenShare.state = SUB_CONNECTING;\r\n        }        \r\n    }\r\n    \r\n    function sendSubscribeScreenData() {\r\n        if (!$scope.screenShare.sdpOffer || !$scope.screenShare.candidateSendQueue.length) {\r\n            toastr.error(\"Device error\");\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'subscribeScreen',\r\n                sdpOffer: $scope.screenShare.sdpOffer,\r\n                candidateList:$scope.screenShare.candidateSendQueue,\r\n                pubId:$scope.presenter.id\r\n            }\r\n        sendMessage(message);\r\n        $scope.screenShare.sdpOffer = null;\r\n        $scope.screenShare.candidateSendQueue = [];\r\n    }\r\n});\n'use strict';\r\nangular.module('mainModule', ['api', 'toastr', 'config', 'underscore', 'LocalStorageModule',\r\n    'pascalprecht.translate','base64'\r\n]);\n'use strict';\r\n\r\n/**\r\n * @ngdoc function\r\n * @name conferenceApp.controller:MainCtrl\r\n * @description\r\n * # MainCtrl\r\n * Controller of the conferenceApp\r\n */\r\nangular.module('mainModule')\r\n    .controller('TrustedLoginController', function ($rootScope, $scope, $member, $location, $log, $routeParams,viMdToast, \r\n            Fullscreen, localStorageService,$base64) {\r\n        $scope.trustedLoginKind = 'training';\r\n        \r\n        // Login to room\r\n        $scope.loginMeeting = function () {\r\n            Fullscreen.all();\r\n            var info = {\r\n                payload: $base64.decode($routeParams.payload),\r\n                checksum: $routeParams.checksum\r\n            };\r\n\r\n            $member.trustedLogin(info, function(result) {\r\n                if (result.status && result.data.status) {\r\n                    localStorageService.set(\"meeting\",result.data.meeting);\r\n                    localStorageService.set(\"member\",result.data.member);\r\n                    localStorageService.set(\"memberList\",result.data.memberList);\r\n                    \r\n                    if ($routeParams.kind === 'conference') {\r\n                        $location.path('/room');\r\n                    } else {                        \r\n                        $location.path('/training');\r\n                    } \r\n                } else {\r\n                    $log.error(result);\r\n                    viMdToast.error(' c li xy ra!');\r\n                }\r\n            });  \r\n        };\r\n\r\n        $scope.loginMeetingKeyPress = function(event) {\r\n            if (event.code === 'Enter') {\r\n                $scope.loginMeeting();\r\n            }\r\n        };\r\n    });\r\n\n'use strict';\r\n\r\n/**\r\n * @ngdoc function\r\n * @name conferenceApp.controller:MainCtrl\r\n * @description\r\n * # MainCtrl\r\n * Controller of the conferenceApp\r\n */\r\nangular.module('mainModule')\r\n    .controller('HomeController', function ($rootScope, $scope, $member, $location, $log, viMdToast, Fullscreen, localStorageService) {\r\n        $scope.meetingAuth = {kind: 'conference'};\r\n\r\n        // Login to room\r\n\t    $scope.loginMeeting = function () {\r\n\t\t    Fullscreen.all();\r\n            var info = {\r\n                meetingId: $scope.meetingAuth.meetingId,\r\n                email: $scope.meetingAuth.email,\r\n                password: $scope.meetingAuth.password\r\n            };\r\n\r\n            $member.login(info, function(result) {\r\n                if (result.status && result.data.status) {\r\n                    localStorageService.set(\"meeting\",result.data.meeting);\r\n                    localStorageService.set(\"member\",result.data.member);\r\n                    localStorageService.set(\"memberList\",result.data.memberList);\r\n                    \r\n                    if ($scope.meetingAuth.kind === 'training') {\r\n                        $location.path('/training');\r\n                    } else {\r\n                        $location.path('/room');\r\n                    }                    \r\n                } else {\r\n                    $log.error(result);\r\n                    viMdToast.error('Input incorrect!');\r\n                }\r\n            });  \r\n\t    };\r\n\r\n        $scope.loginMeetingKeyPress = function(event) {\r\n            if (event.code === 'Enter') {\r\n                $scope.loginMeeting();\r\n            }\r\n        };\r\n    });\r\n\n'use strict';\r\n\r\nangular.module('conferenceModule',['api','toastr','config','underscore','LocalStorageModule','pageslide-directive','base64',\r\n                                   'angular-simple-chat','ngAudio','ngActivityIndicator']);\n'use strict';\r\nangular.module('conferenceModule').controller('RoomController', function($scope, $rootScope, $location, $routeParams, _, localStorageService, $log, $interval, $sce, $conferenceSocket, $window, $mdDialog, deviceDetector, iceServers, $recorder,  $mdSidenav,$base64,$timeout,ngAudio,$activityIndicator,toastr,$route) {\r\n    // publication\r\n    var PUB_INITIAL = 0;\r\n    var PUB_INPROGRESS = 1;\r\n    var PUB_CONNECTING = 2;\r\n    var PUB_CONNECTED = 3;\r\n    \r\n    // subscription\r\n    var SUB_INITIAL = 0;\r\n    var SUB_INPROGRESS = 1;\r\n    var SUB_CONNECTING = 2;\r\n    var SUB_CONNECTED = 3;\r\n    \r\n    var GATHER_TIMEOUT = 30*1000;\r\n    var CALLING_TIMEOUT = 30*1000;\r\n    \r\n    function RoomMember(id,profile)\r\n    {\r\n        this.id = id;\r\n        this.avail = false;\r\n        this.profile = profile;\r\n        this.invited = false;\r\n        this.pubWebRtcEndpoint = null;\r\n        this.pubOfferSdp = null;\r\n        this.pubState = PUB_INITIAL;\r\n        this.pubGatherToken = null;\r\n        this.pubTimeoutToken = null;\r\n        this.pubCandidateSendQueue =  [];\r\n        this.subWebRtcEndpoint = null;\r\n        this.subOfferSdp = null;\r\n        this.subState = SUB_INITIAL;\r\n        this.subGatherToken = null;\r\n        this.subCandidateSendQueue =  [];\r\n        this.pubCamera = null;        \r\n        this.subVideoSlot = null;\r\n        this.markedForSubscription = false;\r\n    }\r\n\r\n    function init() {\r\n        $scope.audio = true;\r\n        $scope.video = true;\r\n        $scope.handUp = true;\r\n        $scope.notiHandUp = true;\r\n        $scope.sound = ngAudio.load(\"assets/sounds/ring.mp3\")\r\n        \r\n        $scope.meeting = localStorageService.get(\"meeting\");\r\n        $scope.myProfile = localStorageService.get(\"member\");\r\n        $scope.memberProfiles = localStorageService.get(\"memberList\");\r\n        $scope.memberList = [];\r\n        $scope.videoSlots = [];\r\n        $scope.chatMessage = [];\r\n        var count = 0;\r\n        _.each($scope.memberProfiles,function(profile) {\r\n            $scope.memberList.push(new RoomMember(profile._id,profile));\r\n            $scope.videoSlots.push({\r\n                allocated: false,\r\n                videoId: 'remoteCamera' + count,\r\n                index: count,\r\n                member:null,\r\n                width: 0\r\n            });\r\n            count++;\r\n        });        \r\n        $scope.me = _.find($scope.memberList, function(m) {\r\n            return m.id == $scope.myProfile._id;\r\n        });\r\n        $scope.me.pubCamera = document.getElementById('localCamera');\r\n        $scope.presenter = _.find($scope.memberList, function(m) {\r\n            return m.profile.role == 'presenter';\r\n        });\r\n        $scope.presenter.subVideoSlot = $scope.videoSlots[0]; \r\n        $scope.viewerList = _.filter($scope.memberList, function(m) {\r\n            return m.profile.role != 'presenter';\r\n        });      \r\n    };\r\n    \r\n    $scope.connect = function() {\r\n        if ($conferenceSocket.readyState == 1)  {\r\n            sendMessage({ id: 'join'});\r\n            $scope.sound.loop = true;\r\n            $scope.sound.play();\r\n            $scope.me.pubState = PUB_INPROGRESS;\r\n        } else\r\n            $window.location.reload();\r\n    }\r\n    \r\n    $scope.disconnect = function() {\r\n        $scope.me.pubState = PUB_INITIAL;\r\n        $scope.sound.stop();\r\n        try {\r\n            if ($scope.me.pubWebRtcEndpoint)\r\n                $scope.me.pubWebRtcEndpoint['peerConnection'].close();\r\n            _.each($scope.memberList ,function(member) {\r\n                if (member.subState != SUB_INITIAL)\r\n                    unsubscribe(member);\r\n            });\r\n            sendMessage({\r\n                id: 'leave'\r\n            });\r\n        } catch (e) {\r\n            $log.error(e);\r\n        }\r\n    }\r\n    \r\n    $conferenceSocket.onmessage = function(message) {\r\n        var parsedMessage = JSON.parse(message.data);\r\n        console.info('Received message: ' + message.data);\r\n        switch (parsedMessage.id) {\r\n            case 'joinResponse':                \r\n                joinResponse(parsedMessage);\r\n                break;\r\n            case 'end':             \r\n                endConference();\r\n                break;\r\n            case 'memberStatus':\r\n                memberStatus(parsedMessage);\r\n                break;\r\n            case 'handUp':\r\n                handUp(parsedMessage);\r\n                break;\r\n            case 'handDown':\r\n                handDown(parsedMessage);\r\n                break;\r\n            case 'publishResponse':\r\n                publishResponse(parsedMessage);\r\n                break;\r\n            case 'subscribeResponse':\r\n                subscribeResponse(parsedMessage);\r\n                break;\r\n            case 'chat':\r\n                receiveChat(parsedMessage);\r\n                break;\r\n            default:\r\n                console.error('Unrecognized message', parsedMessage);\r\n            }\r\n        $scope.$apply();\r\n    };\r\n        \r\n    function sendMessage(message) {\r\n        message.memberId = $scope.me.id;\r\n        message.meetingId = $scope.meeting._id;\r\n        var jsonMessage = JSON.stringify(message);\r\n        $log.info('Senging message: ' + jsonMessage);\r\n        try {\r\n            $conferenceSocket.send(jsonMessage);\r\n        } catch (exc) {\r\n            $log.info('Error sending message: ' );\r\n            $window.location.reload();\r\n        }\r\n    };\r\n     \r\n    function joinResponse(message) {\r\n        if (message.response == 'accepted') {\r\n            publish();\r\n        } else {\r\n            $location.path('/');\r\n        }\r\n    };\r\n\r\n    function publish() {  \r\n        var options = {\r\n            localVideo: localCamera,\r\n            onicecandidate: onPublishIceCandidate,\r\n            iceServers:iceServers,\r\n            oncandidategatheringdone: onPublishComplete\r\n        };\r\n        $scope.me.pubWebRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(options, function(error) {\r\n            if (error) {\r\n                $activityIndicator.stopAnimating();\r\n                $log.error(error);\r\n                return;\r\n            }\r\n            this.generateOffer(onPublish);\r\n        });\r\n        $activityIndicator.startAnimating();\r\n        $scope.me.pubGatherToken = $timeout(function() {\r\n            $log.info('Time out gather publishing data');\r\n            if ($scope.me.pubState != PUB_CONNECTING) {\r\n                $scope.me.pubState = PUB_CONNECTING;\r\n                sendPublishData();\r\n            }\r\n        },GATHER_TIMEOUT);\r\n    }\r\n\r\n    function onPublishIceCandidate(candidate) {\r\n        $scope.me.pubCandidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onPublish(error, offerSdp) {\r\n        if (error) {\r\n            $activityIndicator.stopAnimating();\r\n            $log.info(error);\r\n            return;\r\n        }\r\n        $scope.me.pubOfferSdp = offerSdp;\r\n    }\r\n\r\n    function publishResponse(message) {\r\n        $activityIndicator.stopAnimating();\r\n        if (message.response != 'accepted') {\r\n            $log.info('Disconnect due to reject from server');\r\n            $scope.disconnect();\r\n        } else {\r\n            $scope.me.pubWebRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            _.each(message.candidateList,function(candidate) {\r\n                $scope.me.pubWebRtcEndpoint.addIceCandidate(candidate);\r\n            })\r\n            sendMessage({\r\n                id: 'publishAvail'\r\n            });\r\n            $scope.me.pubState = PUB_CONNECTED;\r\n            $scope.sound.stop();\r\n        }\r\n    }\r\n    \r\n    function onPublishComplete() {\r\n        $timeout.cancel($scope.me.pubGatherToken);\r\n        if ($scope.me.pubState != PUB_CONNECTING) {\r\n            $scope.me.pubState = PUB_CONNECTING;\r\n            sendPublishData();\r\n        }\r\n    }\r\n    \r\n    function sendPublishData() {\r\n        if (!$scope.me.pubOfferSdp || !$scope.me.pubCandidateSendQueue.length) {\r\n            $log.info('Disconnect due to device error');\r\n            $scope.disconnect();\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'publish',\r\n                sdpOffer: $scope.me.pubOfferSdp,\r\n                candidateList: $scope.me.pubCandidateSendQueue\r\n         };\r\n        sendMessage(message);\r\n        $scope.me.pubOfferSdp = null;\r\n        $scope.me.pubCandidateSendQueue = [];\r\n        $scope.me.pubTimeoutToken = $timeout(function() {\r\n            if ($scope.me.pubState != PUB_CONNECTED) {\r\n                $log.info('Disconnect due to calling timeout');\r\n                $scope.disconnect();\r\n            }\r\n        },CALLING_TIMEOUT);\r\n    }\r\n\r\n    function unsubscribe(member) {\r\n        member.markedForSubscription =  false;\r\n        if (member.subVideoSlot) {\r\n            member.subState = SUB_INITIAL;\r\n            if (member.id!= $scope.presenter.id) {\r\n                member.subVideoSlot.allocated = false;\r\n                member.subVideoSlot.member = null;\r\n                member.subVideoSlot = null;    \r\n            }            \r\n            if (member.subGatherToken)\r\n                $timeout.cancel(member.subGatherToken);\r\n            try {\r\n                if (member.subWebRtcEndpoint)\r\n                    member.subWebRtcEndpoint['peerConnection'].close();\r\n            } catch (e) {\r\n                $log.error(e);\r\n            }\r\n        }\r\n    }\r\n    \r\n    $scope.resubscribe = function(pubId) {\r\n        $scope.disableState = true;\r\n        var publisher = _.find($scope.memberList, function(m) {\r\n            return m.id == pubId;\r\n        });\r\n\r\n        if (publisher.invited && publisher.avail) {\r\n            unsubscribe(publisher);\r\n            subscribe(publisher);\r\n        }\r\n\r\n        $timeout(function() {\r\n            $scope.disableState = false;\r\n        }, 30000)\r\n    }\r\n\r\n    function subscribe(member) {\r\n        if (!$scope.me.avail) {\r\n            return;\r\n        }\r\n        var slot = null;\r\n        if (member.subVideoSlot) {\r\n            slot = member.subVideoSlot;\r\n        } else {\r\n            slot = _.find($scope.videoSlots, function(s) {\r\n                return !s.allocated  && s.index > 0;\r\n            });\r\n        }\r\n        if (!slot) return;\r\n        member.subVideoSlot = slot;\r\n        slot.member = member;\r\n        slot.allocated = true;\r\n        member.subState = SUB_INPROGRESS;\r\n        $scope.numOfAllocated = getAllocatedSlots($scope.videoSlots).length;\r\n        calcGridSlots(3, $scope.numOfAllocated, $scope.videoSlots);\r\n        var remoteCamera = document.getElementById(slot.videoId);\r\n        var options = {\r\n            remoteVideo: remoteCamera,\r\n            onicecandidate: onSubscribeIceCandidate.bind({member:member }),\r\n            iceServers: iceServers,\r\n            oncandidategatheringdone: onSubscribeComplete.bind({member:member})\r\n        }\r\n        member.subGatherToken = $timeout(function(m) {\r\n            $log.info('Time out gather subscribing data');\r\n            if (m.subState != SUB_CONNECTING) {\r\n                sendSubscribeData(m);\r\n                m.subState = SUB_CONNECTING;\r\n            }\r\n        },GATHER_TIMEOUT,true,member);\r\n        \r\n        member.subWebRtcEndpoint = kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(options, function(error) {\r\n            if (error) {\r\n                $log.error(error);\r\n                return;\r\n            }\r\n            this.generateOffer(onSubscribe.bind({\r\n                member: member\r\n            }));\r\n        });\r\n    }\r\n\r\n    function calcGridSlots(slotsPerRow, numOfAllocated, slotsList) {\r\n        var rows = Math.floor(numOfAllocated / slotsPerRow);\r\n        var itemsModulus = numOfAllocated % slotsPerRow;\r\n        if (rows === 0) {\r\n            if (numOfAllocated === 1) {\r\n                $scope.firstSlot = 100;\r\n            } else if (numOfAllocated === 2) {\r\n                $scope.firstSlot = Math.floor(100 / 2);\r\n                slotsList.map(function(slot) {\r\n                    if (slot.allocated) {\r\n                        slot.width = Math.floor(100 / 2);\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            slotsList.map(function(slot) {\r\n                if (slot.allocated) {\r\n                    slot.width = Math.floor(100 / slotsPerRow);\r\n                    $scope.firstSlot = slot.width;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function getAllocatedSlots(memberList) {\r\n        var allocatedSlotArr = _.filter(memberList, function(member) {\r\n            return member.allocated;\r\n        })\r\n\r\n        return allocatedSlotArr;\r\n    }\r\n\r\n    function onSubscribeIceCandidate(candidate) {\r\n        this.member.subCandidateSendQueue.push(candidate);\r\n    }\r\n\r\n    function onSubscribe(error, offerSdp) {\r\n        if (error) {\r\n            $log.error(error);\r\n            return;\r\n        }\r\n        this.member.subSdpOffer = offerSdp;\r\n    }\r\n\r\n    function subscribeResponse(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.pubId;\r\n        });\r\n        if (message.response != 'accepted') {\r\n            member.subState = SUB_INITIAL;\r\n            toastr.error('Server error, please try again later');\r\n        } \r\n        else {            \r\n            member.subWebRtcEndpoint.processAnswer(message.sdpAnswer);\r\n            if (member.id == $scope.me.id) {\r\n                member.subWebRtcEndpoint.remoteVideo.muted = true;\r\n            }\r\n            if (member.subVideoSlot) {\r\n                member.subState = SUB_CONNECTED;\r\n                _.each(message.candidateList,function(candidate) {\r\n                    member.subWebRtcEndpoint.addIceCandidate(candidate);\r\n                });\r\n                sendMessage({\r\n                    id: 'subscribeAvail',\r\n                    pubId:message.pubId\r\n                });\r\n            }\r\n            nextSubscriber();\r\n        }\r\n    }\r\n    \r\n    function onSubscribeComplete() {\r\n        $timeout.cancel(this.member.subGatherToken);\r\n        if (this.member.subState != SUB_CONNECTING) {\r\n            sendSubscribeData(this.member);\r\n            this.member.subState = SUB_CONNECTING;\r\n        }\r\n        \r\n    }\r\n    \r\n    function sendSubscribeData(member) {\r\n        if (!member.subSdpOffer || !member.subCandidateSendQueue.length) {\r\n            toastr.error(\"Device error\");\r\n            return;\r\n        }\r\n        var message = {\r\n                id: 'subscribe',\r\n                pubId: member.id,\r\n                sdpOffer: member.subSdpOffer,\r\n                candidateList:member.subCandidateSendQueue\r\n            }\r\n        sendMessage(message);\r\n        member.subSdpOffer = null;\r\n        member.subCandidateSendQueue = [];\r\n    }\r\n\r\n    function endConference(message) {\r\n        var url = '/';\r\n        \r\n        if ($scope.meeting.logoutUrl) {\r\n            var base64EncodedString = decodeURIComponent($scope.meeting.logoutUrl);\r\n            url = $base64.decode(base64EncodedString);\r\n        }\r\n\r\n        $window.location.href = url;\r\n    };\r\n\r\n    function memberStatus(message) {\r\n        updateMemberList(message.onlineList);\r\n    };\r\n    \r\n    function nextSubscriber() {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.markedForSubscription;\r\n        });\r\n        if (member) {\r\n            member.markedForSubscription =  false;\r\n            subscribe(member);\r\n        }\r\n    }\r\n\r\n    function updateMemberList(onlineList) {\r\n        var unSubList = [];\r\n        _.each($scope.memberList, function(curVal) {\r\n            var newVal = _.find(onlineList, function(m) {\r\n                return curVal.id == m._id;\r\n            });\r\n            if (newVal) {\r\n                curVal.avail = newVal.avail;\r\n                curVal.invited = newVal.invited;\r\n                curVal.online = true;\r\n                if (curVal.invited) {\r\n                    if (curVal.avail) {\r\n                        if (!curVal.subVideoSlot)\r\n                            curVal.markedForSubscription =  true;\r\n                        if (curVal.subVideoSlot && curVal.subState==SUB_INITIAL)\r\n                            curVal.markedForSubscription =  true;\r\n                    } else {\r\n                        if (curVal.subVideoSlot )\r\n                            unSubList.push(curVal);\r\n                    }\r\n                } else {\r\n                    unSubList.push(curVal);\r\n                }\r\n            } else {\r\n                if (curVal.invited) \r\n                    unSubList.push(curVal);\r\n                curVal.invited = false;\r\n                curVal.avail = false;\r\n                curVal.online = false;\r\n            }\r\n        });        \r\n        _.each(unSubList, function(member) {\r\n            unsubscribe(member);\r\n        });\r\n        nextSubscriber();\r\n    }\r\n    $scope.leave = function() {\r\n        var url = '/';\r\n        \r\n        if ($scope.meeting.logoutUrl) {\r\n            var base64EncodedString = decodeURIComponent($scope.meeting.logoutUrl);\r\n            url = $base64.decode(base64EncodedString);\r\n        }\r\n\r\n        sendMessage({\r\n            id: 'leave'\r\n        });\r\n\r\n        $window.location.href = url;        \r\n    }\r\n    $scope.endLesson = function() {\r\n        sendMessage({\r\n            id: 'end'\r\n        });\r\n    }\r\n    $scope.toggleAudio = function() {\r\n        var localStream = $scope.me.pubWebRtcEndpoint.getLocalStream();\r\n        if (localStream) {\r\n            var audioTrack = localStream.getAudioTracks()[0];\r\n            $scope.audio = !$scope.audio;\r\n            audioTrack.enabled = $scope.audio;\r\n        }\r\n    };\r\n    $scope.toggleVideo = function() {\r\n        var localStream = $scope.me.pubWebRtcEndpoint.getLocalStream();\r\n        if (localStream) {\r\n            var videoTrack = localStream.getVideoTracks()[0];\r\n            $scope.video = !$scope.video;\r\n            videoTrack.enabled = $scope.video;\r\n        }\r\n    };\r\n    $scope.toggleHand = function() {\r\n        $scope.handUp = !$scope.handUp;\r\n        if ($scope.handUp) {\r\n            sendMessage({id: 'handUp'});\r\n        } else {\r\n            sendMessage({id: 'handDown'});\r\n        }\r\n    };\r\n    $scope.toggleSidenav = function(eleId) {\r\n        $mdSidenav(eleId).toggle();\r\n    };\r\n    $scope.memberInvite = function(memberId) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == memberId;\r\n        });\r\n        member.handUp = false;\r\n        if (!member.invited && member.online) {\r\n            sendMessage({\r\n                id: 'invite',\r\n                'inviteeId': member.id\r\n            });\r\n        }\r\n    }\r\n    $scope.memberDiscard = function(slot) {\r\n        var member = slot.member;\r\n        if (member) {\r\n            member.handUp = false;\r\n            sendMessage({\r\n                id: 'discard',\r\n                'inviteeId': member.id\r\n            });\r\n        }\r\n    }\r\n    var handUp = function(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.memberId;\r\n        });\r\n        member.handUp = true;\r\n    }\r\n    var handDown = function(message) {\r\n        var member = _.find($scope.memberList, function(m) {\r\n            return m.id == message.memberId;\r\n        });\r\n        member.handUp = false;\r\n    }\r\n    $scope.chat = function() {\r\n        var message = {\r\n            id: 'chat',\r\n            text: $scope.chatInput\r\n        }\r\n        sendMessage(message);\r\n        $scope.chatInput = \"\";\r\n    }\r\n\r\n    $scope.sendChatMessage = function($event) {\r\n        if (event.code === 'Enter') {\r\n            $scope.chat();\r\n        }\r\n    };\r\n\r\n    function receiveChat(message) {\r\n        var idx = $scope.chatMessage.length; \r\n\r\n        message.idx = 'message_' + idx;\r\n        $scope.chatMessage.push({\r\n            'user': message.user,\r\n            'text': message.text,\r\n            'idx': message.idx\r\n        });\r\n        \r\n        var newMsg = angular.element(document.querySelector('#message_' + (idx - 1)));\r\n        var chatContent = angular.element(document.querySelector('#chat-content'));\r\n        if (!(_.isEmpty(newMsg))) {\r\n            chatContent.scrollTo(newMsg, 0, 500);\r\n        }   \r\n    }\r\n    $scope.byIndex = function(slot) {\r\n        return slot.index > 0;\r\n    };\r\n\r\n    $rootScope.$on('$routeChangeStart', function(event, next, current) {\r\n        if (!current) {\r\n            $conferenceSocket.close();\r\n        }\r\n    });\r\n    $window.onbeforeunload = function() {\r\n        $conferenceSocket.close();\r\n        $interval.cancel(recordToken);\r\n    };\r\n\r\n    $scope.showSettingDialog = function(ev) {\r\n        $mdDialog.show({\r\n            templateUrl: 'app/modules/conference/views/settingDialog.html',\r\n            parent: angular.element(document.body),\r\n            targetEvent: ev,\r\n            clickOutsideToClose:true,\r\n            fullscreen: $scope.customFullscreen, \r\n            controller: DialogController\r\n        })\r\n        .then(function(answer) {\r\n          $scope.status = 'You said the information was \"' + answer + '\".';\r\n        }, function() {\r\n          $scope.status = 'You cancelled the dialog.';\r\n        });\r\n    }\r\n\r\n    function DialogController($scope, $mdDialog) {\r\n        \r\n        $scope.hide = function() {\r\n            $mdDialog.hide();\r\n        };\r\n\r\n        $scope.cancel = function() {\r\n            $mdDialog.cancel();\r\n        };\r\n\r\n        $scope.answer = function(answer) {\r\n            $mdDialog.hide(answer);\r\n        };\r\n    }\r\n\r\n    init();\r\n});\n/**\r\n * @author thanhvk\r\n * created on 29.09.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('mainModule')\r\n.controller('AdminRoomsListCtrl', function ($meeting, $member, $rootScope, $scope, $q, $location, $log, $mdSidenav, $base64, sharedProperties, localStorageService) {\r\n    $scope.token = localStorageService.get('tokenConference');\r\n    $scope.room = null;\r\n\r\n    function getMembersOfRoom(room) {\r\n        var deffered    = $q.defer(),\r\n            membersList = null,\r\n            info        = {\r\n                token: $scope.token,\r\n                meetingId: room._id\r\n            };\r\n\r\n        $member.listMember(info, function(result) {\r\n            if (result.status) {\r\n                membersList = result.data.memberList;\r\n            } else {\r\n                $log.error('Error get list member:', result);\r\n            }\r\n\r\n            deffered.resolve(membersList);\r\n        });\r\n\r\n        return deffered.promise;\r\n    }\r\n\r\n    $scope.toggleSidenav = function(eleId) {\r\n        $mdSidenav(eleId).toggle();\r\n    };\r\n\r\n    $scope.showRoomDetail = function(room) {\r\n        $scope.room = room;\r\n\r\n        getMembersOfRoom(room)\r\n        .then(function(membersList) {\r\n            $scope.room.membersList = membersList ? membersList : [];\r\n        });\r\n    };\r\n\r\n    $scope.gotoEditRoom = function() {\r\n        localStorageService.set('roomAdmin', $scope.room);\r\n        $location.path('/admin/rooms/edit');\r\n    };\r\n\r\n    function getRoomsList() {\r\n        var deffered    = $q.defer(),\r\n            roomsList   = null,\r\n            info        = {\r\n                token: $scope.token\r\n            };\r\n\r\n        $meeting.listMeeting(info, function(result) {\r\n            if (result.status) {\r\n                roomsList = result.data.meetingList;\r\n            } else {\r\n                $log.error('Error get rooms list:', result);\r\n            }   \r\n\r\n            deffered.resolve(roomsList);                   \r\n        });\r\n        \r\n        return deffered.promise;\r\n    }\r\n\r\n    getRoomsList()\r\n    .then(function(roomsList) {\r\n        $scope.roomsList = roomsList ? roomsList.reverse() : [];\r\n    });\r\n});\n/**\r\n * @author thanhvk\r\n * created on 30.09.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('mainModule')\r\n.controller('AdminEditRoomCtrl', function ($meeting, $member, $rootScope, $scope, $q, $location, $log, $mdToast, $mdSidenav, $base64, viMdToast, sharedProperties, localStorageService, _) {\r\n    $scope.token = localStorageService.get('tokenConference');\r\n    $scope.room = localStorageService.get('roomAdmin');\r\n    if ($scope.room.logoutUrl) {\r\n        var base64EncodedString = decodeURIComponent($scope.room.logoutUrl);\r\n        $scope.room.logoutUrl = $base64.decode(base64EncodedString);\r\n    }    \r\n    $scope.member = null;\r\n    $scope.showMemberForm = false;\r\n\r\n    // Functions init\r\n    function getRoomsList() {\r\n        var deffered    = $q.defer(),\r\n            roomsList   = null,\r\n            info        = {\r\n                token: $scope.token\r\n            };\r\n\r\n        $meeting.listMeeting(info, function(result) {\r\n            if (result.status) {\r\n                roomsList = result.data.meetingList;\r\n            } else {\r\n                $log.error('Error get rooms list');\r\n            }   \r\n\r\n            deffered.resolve(roomsList);                   \r\n        });\r\n        \r\n        return deffered.promise;\r\n    }\r\n\r\n    function getMembersOfRoom() {\r\n        var deffered    = $q.defer(),\r\n            membersList = null,\r\n            info        = {\r\n                token: $scope.token,\r\n                meetingId: $scope.room._id\r\n            };\r\n\r\n        $member.listMember(info, function(result) {\r\n            if (result.status) {\r\n                membersList = result.data.memberList;\r\n            } else {\r\n                $log.error('Error get list member');\r\n            }\r\n\r\n            deffered.resolve(membersList);\r\n        });\r\n\r\n        return deffered.promise;\r\n    }\r\n\r\n    getRoomsList()\r\n    .then(function(roomsList) {\r\n        $scope.roomsList = roomsList ? roomsList.reverse() : [];\r\n    })\r\n    .then(function() {\r\n        return getMembersOfRoom();\r\n    })\r\n    .then(function(membersList) {\r\n        $scope.membersList = membersList ? membersList.reverse() : [];\r\n    });\r\n\r\n    // Functions of room\r\n    function updateRoomsList() {\r\n        $scope.roomsList = $scope.roomsList.map(function(room) {\r\n            return (room = (room._id === $scope.room._id) ? $scope.room : room);\r\n        });\r\n    }\r\n\r\n    function updateRoom() {\r\n        var info = {\r\n            token: $scope.token,\r\n            meeting: {\r\n                id: $scope.room._id,\r\n                name: $scope.room.name,\r\n                meetingRef: $scope.room.meetingRef,\r\n                welcome: $scope.room.welcome,\r\n                duration: $scope.room.duration,\r\n                logoutUrl: $scope.room.logoutUrl,\r\n            }\r\n        };\r\n\r\n        if (info.meeting.logoutUrl) {\r\n            var base64EncodedString = $base64.encode(info.meeting.logoutUrl);\r\n            info.meeting.logoutUrl = encodeURIComponent(base64EncodedString);\r\n        }  \r\n\r\n        $meeting.updateMeeting(info, function(result) {\r\n            if (result.status) {\r\n                viMdToast.success('Update room success!');\r\n                updateRoomsList();\r\n                localStorageService.set('roomAdmin', $scope.roomsList[0]);                \r\n            } else {\r\n                viMdToast.error('Update room error!');\r\n            }\r\n        });\r\n    } \r\n\r\n    $scope.cancel = function() {\r\n        $location.path('/admin/rooms');\r\n    };\r\n\r\n    $scope.save = function() {\r\n        updateRoom();\r\n    };   \r\n\r\n    $scope.showRoomDetail = function(room) {\r\n        $scope.showMemberForm = false;\r\n        $scope.room = room;\r\n\r\n        getMembersOfRoom()\r\n        .then(function(membersList) {\r\n            $scope.membersList = membersList ? membersList.reverse() : [];\r\n        });\r\n    };\r\n\r\n    // Functions of member\r\n    function updateMembersList(action, memberId) {\r\n        var memberIdx;\r\n        if (action === 'create' && memberId) {\r\n            $scope.member._id = memberId;\r\n            $scope.membersList.unshift($scope.member);\r\n        } else if (action === 'remove' && memberId) {\r\n            memberIdx = _.findIndex($scope.membersList, {_id: memberId});\r\n            if (memberIdx !== -1) {\r\n                $scope.membersList.splice(memberIdx, 1);\r\n            }\r\n        } else {\r\n            memberIdx = _.findIndex($scope.membersList, {_id: memberId});\r\n            if (memberIdx !== -1) {\r\n                $scope.membersList[memberId] = $scope.member;\r\n            }\r\n        }\r\n    }\r\n\r\n    function addMember() {\r\n        var deffered = $q.defer(),\r\n            info = {\r\n                token: $scope.token,\r\n                meetingId: $scope.room._id,\r\n                member: $scope.member\r\n            };\r\n\r\n        $member.addMember(info, function(result) {\r\n            var member = null;\r\n\r\n            if (result.status && result.data.status) {\r\n                viMdToast.success('Add member success!');\r\n                member = result.data;\r\n            } else {\r\n                viMdToast.error('Add member error!');\r\n            }\r\n\r\n            deffered.resolve(member);\r\n        });\r\n\r\n        return deffered.promise;\r\n    }\r\n\r\n    function updateMember() {\r\n        $scope.member.role = $scope.member.role.toLowerCase();\r\n        var deffered    = $q.defer(),\r\n            member      = null,\r\n            info        = {\r\n                token: $scope.token,\r\n                meetingId: $scope.room._id,\r\n                member: $scope.member\r\n            };\r\n\r\n        $member.updateMember(info, function(result) {\r\n            if (result.status && result.data.status) {\r\n                viMdToast.success('Update member success!');\r\n                member = result.data;\r\n            } else {\r\n                viMdToast.error('Update member error!');\r\n            }\r\n\r\n            deffered.resolve(member);\r\n        });\r\n\r\n        return deffered.promise;\r\n    }\r\n\r\n    $scope.saveMember = function() {\r\n        if ($scope.member && $scope.member._id) {\r\n            updateMember()\r\n            .then(function(result) {\r\n                if (result) {\r\n                    updateMembersList('update', null);\r\n                }\r\n            });\r\n        } else {\r\n            addMember()\r\n            .then(function(result) {\r\n                if (result) {\r\n                    updateMembersList('create', result.id);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    function removeMember() {\r\n        var deffered    = $q.defer(),\r\n            info        = {\r\n                token: $scope.token,\r\n                id: $scope.member._id\r\n            };\r\n\r\n        $member.removeMember(info, function(result) {\r\n            if (result.status) {\r\n                viMdToast.success('Delete member success!');\r\n            } else {\r\n                viMdToast.error('Delete member error!');\r\n            }\r\n            deffered.resolve($scope.member._id);\r\n        });\r\n\r\n        return deffered.promise;\r\n    }\r\n\r\n    $scope.removeMember = function() {\r\n        removeMember()\r\n        .then(function(memberId) {\r\n            $scope.member = null;\r\n            updateMembersList('remove', memberId);\r\n        });\r\n    };\r\n\r\n    $scope.showEditMemberForm = function() {\r\n        $scope.showMemberForm = true;\r\n    };\r\n\r\n    $scope.showAddMemberForm = function() {\r\n        $scope.showMemberForm = true;\r\n        $scope.member = {};\r\n    };\r\n\r\n    $scope.cancelMember = function() {\r\n        $scope.showMemberForm = false;\r\n    };\r\n\r\n    $scope.showMemberDetail = function(member) {\r\n        $scope.showMemberForm = false;\r\n        $scope.member = member;\r\n    };\r\n\r\n    $scope.toggleSidenav = function(eleId) {\r\n        $mdSidenav(eleId).toggle();\r\n    };\r\n});\n/**\r\n * @author thanhvk\r\n * created on 30.09.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('mainModule')\r\n.controller('AdminCreateRoomCtrl', function ($meeting, $rootScope, $scope, $q, $location, $log, $mdSidenav, $base64, viMdToast, Fullscreen, localStorageService) {\r\n    $scope.token = localStorageService.get('tokenConference');\r\n    $scope.room = {};\r\n\r\n    if (!$scope.token) {\r\n        $location.path('/admin');\r\n    }\r\n\r\n    function createRoom() {\r\n        var info     = {\r\n            token: $scope.token,\r\n            meeting: $scope.room            \r\n        };  \r\n\r\n        if ($scope.room.logoutUrl) {\r\n            var base64EncodedString = $base64.encode($scope.room.logoutUrl);\r\n            info.meeting.logoutUrl = encodeURIComponent(base64EncodedString);\r\n        }              \r\n\r\n        $meeting.createMeeting(info, function(result) {\r\n            if (result.status && result.data.status) {\r\n                viMdToast.success('Create room success!');\r\n                $scope.room._id = result.data.id;\r\n                localStorageService.set('roomAdmin', $scope.room);\r\n                $location.path('/admin/rooms/edit');\r\n            } else {\r\n                viMdToast.error('Create room error!');\r\n            }\r\n        });  \r\n    }\r\n\r\n    $scope.save = function() {\r\n        createRoom();\r\n    };\r\n\r\n    $scope.cancel = function() {\r\n        $location.path('/admin/rooms');\r\n    };\r\n\r\n    function getRoomsList() {\r\n        var deffered    = $q.defer(),\r\n            roomsList   = null,\r\n            info        = {\r\n                token: $scope.token\r\n            };\r\n\r\n        $meeting.listMeeting(info, function(result) {\r\n            if (result.status) {\r\n                roomsList = result.data.meetingList;\r\n            } else {\r\n                $log.error('Error get rooms list:', result);\r\n            }   \r\n\r\n            deffered.resolve(roomsList);                   \r\n        });\r\n        \r\n        return deffered.promise;\r\n    }\r\n\r\n    getRoomsList()\r\n    .then(function(roomsList) {\r\n        $scope.roomsList = roomsList ? roomsList.reverse() : [];\r\n    });\r\n\r\n    $scope.toggleSidenav = function(eleId) {\r\n        $mdSidenav(eleId).toggle();\r\n    };\r\n});\n/**\r\n * @author thanhvk\r\n * created on 28.09.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('mainModule')\r\n.controller('AdminAuthCtrl', function ($auth, $rootScope, $scope, $q, $location, $mdToast, viMdToast, Fullscreen, localStorageService) {\r\n  $scope.auth = {\r\n    emailLogin: '',\r\n    passwordLogin: ''\r\n  };\r\n\r\n  $scope.loginAccount = function() {\r\n    var info = {};\r\n    info.email = $scope.auth.emailLogin;\r\n    info.password = $scope.auth.passwordLogin;\r\n\r\n    $auth.loginAccount(info, function(result) {\r\n      if (result.status) {\r\n        localStorageService.set('tokenConference', result.data.token);\r\n        $location.path('/admin/rooms');\r\n      } else {\r\n        viMdToast.error('Email or password incorrect!');\r\n      }\r\n    });\r\n  };\r\n\r\n  $scope.loginAccountKeyPress = function(event) {\r\n    if (event.code === 'Enter') {\r\n      $scope.loginAccount();\r\n    }\r\n  };\r\n});\r\n\n'use strict';\r\n\r\n\r\nangular.module('app')\r\n  .factory('$utilities', function () {\r\n    var utilities = {\r\n     resizeImg: function(img, maxWidth, maxHeight, degrees) {\r\n      var imgWidth = img.width,\r\n        imgHeight = img.height;\r\n\r\n      var ratio = 1,\r\n        ratio1 = 1,\r\n        ratio2 = 1;\r\n      ratio1 = maxWidth / imgWidth;\r\n      ratio2 = maxHeight / imgHeight;\r\n\r\n      // Use the smallest ratio that the image best fit into the maxWidth x maxHeight box.\r\n      if (ratio1 < ratio2) {\r\n        ratio = ratio1;\r\n      } else {\r\n        ratio = ratio2;\r\n      }\r\n      var canvas = document.createElement(\"canvas\");\r\n      var canvasContext = canvas.getContext(\"2d\");\r\n      var canvasCopy = document.createElement(\"canvas\");\r\n      var copyContext = canvasCopy.getContext(\"2d\");\r\n      var canvasCopy2 = document.createElement(\"canvas\");\r\n      var copyContext2 = canvasCopy2.getContext(\"2d\");\r\n      canvasCopy.width = imgWidth;\r\n      canvasCopy.height = imgHeight;\r\n      copyContext.drawImage(img, 0, 0);\r\n\r\n      // init\r\n      canvasCopy2.width = imgWidth;\r\n      canvasCopy2.height = imgHeight;\r\n      copyContext2.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvasCopy2.width, canvasCopy2.height);\r\n\r\n\r\n      var rounds = 1;\r\n      var roundRatio = ratio * rounds;\r\n      for (var i = 1; i <= rounds; i++) {\r\n\r\n        // tmp\r\n        canvasCopy.width = imgWidth * roundRatio / i;\r\n        canvasCopy.height = imgHeight * roundRatio / i;\r\n\r\n        copyContext.drawImage(canvasCopy2, 0, 0, canvasCopy2.width, canvasCopy2.height, 0, 0, canvasCopy.width, canvasCopy.height);\r\n\r\n        // copy back\r\n        canvasCopy2.width = imgWidth * roundRatio / i;\r\n        canvasCopy2.height = imgHeight * roundRatio / i;\r\n        copyContext2.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvasCopy2.width, canvasCopy2.height);\r\n\r\n      } // end for\r\n\r\n      canvas.width = imgWidth * roundRatio / rounds;\r\n      canvas.height = imgHeight * roundRatio / rounds;\r\n      canvasContext.drawImage(canvasCopy2, 0, 0, canvasCopy2.width, canvasCopy2.height, 0, 0, canvas.width, canvas.height);\r\n\r\n\r\n      if (degrees == 90 || degrees == 270) {\r\n        canvas.width = canvasCopy2.height;\r\n        canvas.height = canvasCopy2.width;\r\n      } else {\r\n        canvas.width = canvasCopy2.width;\r\n        canvas.height = canvasCopy2.height;\r\n      }\r\n\r\n      canvasContext.clearRect(0, 0, canvas.width, canvas.height);\r\n      if (degrees == 90 || degrees == 270) {\r\n        canvasContext.translate(canvasCopy2.height / 2, canvasCopy2.width / 2);\r\n      } else {\r\n        canvasContext.translate(canvasCopy2.width / 2, canvasCopy2.height / 2);\r\n      }\r\n      canvasContext.rotate(degrees * Math.PI / 180);\r\n      canvasContext.drawImage(canvasCopy2, -canvasCopy2.width / 2, -canvasCopy2.height / 2);\r\n\r\n\r\n      var dataURL = canvas.toDataURL();\r\n      return dataURL;\r\n    },\r\n    b64toBlob: function(b64Data, contentType, sliceSize) {\r\n      contentType = contentType || '';\r\n      sliceSize = sliceSize || 512;\r\n\r\n      var byteCharacters = atob(b64Data);\r\n      var byteArrays = [];\r\n\r\n      for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        var slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        var byteNumbers = new Array(slice.length);\r\n        for (var i = 0; i < slice.length; i++) {\r\n          byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        var byteArray = new Uint8Array(byteNumbers);\r\n\r\n        byteArrays.push(byteArray);\r\n      }\r\n\r\n      var blob = new Blob(byteArrays, { type: contentType });\r\n      return blob;\r\n    },\r\n    };\r\n    return utilities;\r\n  });\r\n'use strict';\r\n\r\n\r\nangular.module('app')\r\n  .factory('$utilities', function () {\r\n    var utilities = {\r\n     resizeImg: function(img, maxWidth, maxHeight, degrees) {\r\n      var imgWidth = img.width,\r\n        imgHeight = img.height;\r\n\r\n      var ratio = 1,\r\n        ratio1 = 1,\r\n        ratio2 = 1;\r\n      ratio1 = maxWidth / imgWidth;\r\n      ratio2 = maxHeight / imgHeight;\r\n\r\n      // Use the smallest ratio that the image best fit into the maxWidth x maxHeight box.\r\n      if (ratio1 < ratio2) {\r\n        ratio = ratio1;\r\n      } else {\r\n        ratio = ratio2;\r\n      }\r\n      var canvas = document.createElement(\"canvas\");\r\n      var canvasContext = canvas.getContext(\"2d\");\r\n      var canvasCopy = document.createElement(\"canvas\");\r\n      var copyContext = canvasCopy.getContext(\"2d\");\r\n      var canvasCopy2 = document.createElement(\"canvas\");\r\n      var copyContext2 = canvasCopy2.getContext(\"2d\");\r\n      canvasCopy.width = imgWidth;\r\n      canvasCopy.height = imgHeight;\r\n      copyContext.drawImage(img, 0, 0);\r\n\r\n      // init\r\n      canvasCopy2.width = imgWidth;\r\n      canvasCopy2.height = imgHeight;\r\n      copyContext2.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvasCopy2.width, canvasCopy2.height);\r\n\r\n\r\n      var rounds = 1;\r\n      var roundRatio = ratio * rounds;\r\n      for (var i = 1; i <= rounds; i++) {\r\n\r\n        // tmp\r\n        canvasCopy.width = imgWidth * roundRatio / i;\r\n        canvasCopy.height = imgHeight * roundRatio / i;\r\n\r\n        copyContext.drawImage(canvasCopy2, 0, 0, canvasCopy2.width, canvasCopy2.height, 0, 0, canvasCopy.width, canvasCopy.height);\r\n\r\n        // copy back\r\n        canvasCopy2.width = imgWidth * roundRatio / i;\r\n        canvasCopy2.height = imgHeight * roundRatio / i;\r\n        copyContext2.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvasCopy2.width, canvasCopy2.height);\r\n\r\n      } // end for\r\n\r\n      canvas.width = imgWidth * roundRatio / rounds;\r\n      canvas.height = imgHeight * roundRatio / rounds;\r\n      canvasContext.drawImage(canvasCopy2, 0, 0, canvasCopy2.width, canvasCopy2.height, 0, 0, canvas.width, canvas.height);\r\n\r\n\r\n      if (degrees == 90 || degrees == 270) {\r\n        canvas.width = canvasCopy2.height;\r\n        canvas.height = canvasCopy2.width;\r\n      } else {\r\n        canvas.width = canvasCopy2.width;\r\n        canvas.height = canvasCopy2.height;\r\n      }\r\n\r\n      canvasContext.clearRect(0, 0, canvas.width, canvas.height);\r\n      if (degrees == 90 || degrees == 270) {\r\n        canvasContext.translate(canvasCopy2.height / 2, canvasCopy2.width / 2);\r\n      } else {\r\n        canvasContext.translate(canvasCopy2.width / 2, canvasCopy2.height / 2);\r\n      }\r\n      canvasContext.rotate(degrees * Math.PI / 180);\r\n      canvasContext.drawImage(canvasCopy2, -canvasCopy2.width / 2, -canvasCopy2.height / 2);\r\n\r\n\r\n      var dataURL = canvas.toDataURL();\r\n      return dataURL;\r\n    },\r\n    b64toBlob: function(b64Data, contentType, sliceSize) {\r\n      contentType = contentType || '';\r\n      sliceSize = sliceSize || 512;\r\n\r\n      var byteCharacters = atob(b64Data);\r\n      var byteArrays = [];\r\n\r\n      for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        var slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        var byteNumbers = new Array(slice.length);\r\n        for (var i = 0; i < slice.length; i++) {\r\n          byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        var byteArray = new Uint8Array(byteNumbers);\r\n\r\n        byteArrays.push(byteArray);\r\n      }\r\n\r\n      var blob = new Blob(byteArrays, { type: contentType });\r\n      return blob;\r\n    },\r\n    };\r\n    return utilities;\r\n  });\n'use strict';\r\nangular.module('api').factory('$recorder', function( $log)\r\n{\r\n    var mediaRecorder;\r\n    var recordedBlobs;\r\n    var sourceBuffer;\r\n    var onFileReady;\r\n    \r\n    function handleDataAvailable(event) {\r\n        if (event.data && event.data.size > 0) {\r\n            recordedBlobs.push(event.data);\r\n        }\r\n        if (deviceDetector.browser == 'firefox' && !$scope.recording) {\r\n            var superBuffer = new Blob(recordedBlobs, {\r\n                type: 'video/webm'\r\n            });\r\n            var file = new File([superBuffer], \"upload.webm\");\r\n            $log.info(\"Broadcast firefox\");\r\n            onFileReady(file);\r\n        }\r\n    };\r\n\r\n    function handleStop(event) {\r\n        $log.info('Recorder stopped: ', event);\r\n    };\r\n    \r\n    return {\r\n        start: function(stream)\r\n        {\r\n            recordedBlobs = [];\r\n            var options = {\r\n                mimeType: 'video/webm;codecs=vp8'\r\n            };\r\n            if (!MediaRecorder.isTypeSupported(options.mimeType)) {\r\n                $log.info(options.mimeType + ' is not Supported');\r\n                options = {\r\n                    mimeType: 'video/webm;codecs=vp8'\r\n                };\r\n                if (!MediaRecorder.isTypeSupported(options.mimeType)) {\r\n                    $log.info(options.mimeType + ' is not Supported');\r\n                    options = {\r\n                        mimeType: 'video/webm'\r\n                    };\r\n                    if (!MediaRecorder.isTypeSupported(options.mimeType)) {\r\n                        $log.info(options.mimeType + ' is not Supported');\r\n                        options = {\r\n                            mimeType: ''\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            try {\r\n                mediaRecorder = new MediaRecorder(stream, options);\r\n            } catch (e) {\r\n                console.error('Exception while creating MediaRecorder: ' + e);\r\n                alert('Exception while creating MediaRecorder: ' + e + '. mimeType: ' + options.mimeType);\r\n                return;\r\n            }\r\n            $log.info('Created MediaRecorder', mediaRecorder, 'with options', options);\r\n            mediaRecorder.onstop = handleStop;\r\n            mediaRecorder.ondataavailable = handleDataAvailable;\r\n            mediaRecorder.start();\r\n        },\r\n        stop: function(callback)\r\n        {\r\n            onFileReady =  callback;\r\n            mediaRecorder.stop();\r\n            $log.info(\"Stop recording\", recordedBlobs);\r\n            // For Firefox, the browser buffere media data and release upon stop recording\r\n            // For Chrome, the browser release data whenver it is available\r\n            if (deviceDetector.browser == 'chrome') {\r\n                var superBuffer = new Blob(recordedBlobs, {\r\n                    type: 'video/webm'\r\n                });\r\n                var file = new File([superBuffer], \"upload.webm\");\r\n                $log.info(\"Broadcast chrome\");\r\n                onFileReady(file);\r\n            }\r\n            \r\n        }\r\n    };\r\n});\nangular.module('app').directive('keyEnter', function () {\r\n    return function (scope, element, attrs) {\r\n        element.bind(\"keydown keypress\", function (event) {\r\n            if(event.which === 13) {\r\n                scope.$apply(function (){\r\n                    scope.$eval(attrs.keyEnter);\r\n                });\r\n\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    };\r\n});\nangular.module('app').directive('fileModel', ['$parse', function ($parse) {\r\n   return {\r\n      restrict: 'A',\r\n      link: function(scope, element, attrs) {\r\n         var model = $parse(attrs.fileModel);\r\n         var modelSetter = model.assign;\r\n         \r\n         element.bind('change', function(){\r\n            scope.$apply(function(){\r\n               modelSetter(scope, element[0].files[0]);\r\n            });\r\n         });\r\n      }\r\n   };\r\n}]);\n'use strict';\r\n\r\nangular.module('app').directive('angucompleteAlt', ['$q', '$parse', '$http', '$sce', '$timeout', '$templateCache', '$interpolate', function ($q, $parse, $http, $sce, $timeout, $templateCache, $interpolate) {\r\n    // keyboard events\r\n    var KEY_DW  = 40;\r\n    var KEY_RT  = 39;\r\n    var KEY_UP  = 38;\r\n    var KEY_LF  = 37;\r\n    var KEY_ES  = 27;\r\n    var KEY_EN  = 13;\r\n    var KEY_TAB =  9;\r\n\r\n    var MIN_LENGTH = 3;\r\n    var MAX_LENGTH = 524288;  // the default max length per the html maxlength attribute\r\n    var PAUSE = 500;\r\n    var BLUR_TIMEOUT = 200;\r\n\r\n    // string constants\r\n    var REQUIRED_CLASS = 'autocomplete-required';\r\n    var TEXT_SEARCHING = 'Searching...';\r\n    var TEXT_NORESULTS = 'No results found';\r\n    var TEMPLATE_URL = '/angucomplete-alt/index.html';\r\n\r\n    // Set the default template for this directive\r\n    $templateCache.put(TEMPLATE_URL,\r\n        '<div class=\"angucomplete-holder\" ng-class=\"{\\'angucomplete-dropdown-visible\\': showDropdown}\">' +\r\n        '  <input style=\"margin: 0px; border: none; height: 34px; width: 90%;\" id=\"{{id}}_value\" name=\"{{inputName}}\" ng-class=\"{\\'angucomplete-input-not-empty\\': notEmpty}\" ng-model=\"searchStr\" ng-disabled=\"disableInput\" type=\"{{inputType}}\" placeholder=\"{{placeholder}}\" maxlength=\"{{maxlength}}\" ng-focus=\"onFocusHandler()\" class=\"{{inputClass}}\" ng-focus=\"resetHideResults()\" ng-blur=\"hideResults($event)\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" ng-change=\"inputChangeHandler(searchStr)\"/>' +\r\n        '  <div id=\"{{id}}_dropdown\" class=\"angucomplete-dropdown\" ng-show=\"showDropdown\">' +\r\n        '    <div class=\"angucomplete-searching\" ng-show=\"searching\" ng-bind=\"textSearching\"></div>' +\r\n        '    <div class=\"angucomplete-searching\" ng-show=\"!searching && (!results || results.length == 0)\" ng-bind=\"textNoResults\"></div>' +\r\n        '    <div class=\"angucomplete-row\" ng-repeat=\"result in results\" ng-click=\"selectResult(result)\" ng-mouseenter=\"hoverRow($index)\" ng-class=\"{\\'angucomplete-selected-row\\': $index == currentIndex}\">' +\r\n        '      <div ng-if=\"imageField\" class=\"angucomplete-image-holder\">' +\r\n        '        <img ng-if=\"result.image && result.image != \\'\\'\" ng-src=\"{{result.image}}\" class=\"angucomplete-image\"/>' +\r\n        '        <div ng-if=\"!result.image && result.image != \\'\\'\" class=\"angucomplete-image-default\"></div>' +\r\n        '      </div>' +\r\n        '      <div class=\"angucomplete-title\" ng-if=\"matchClass\" ng-bind-html=\"result.title\"></div>' +\r\n        '      <div class=\"angucomplete-title\" ng-if=\"!matchClass\">{{ result.title }}</div>' +\r\n        '      <div ng-if=\"matchClass && result.description && result.description != \\'\\'\" class=\"angucomplete-description\" ng-bind-html=\"result.description\"></div>' +\r\n        '      <div ng-if=\"!matchClass && result.description && result.description != \\'\\'\" class=\"angucomplete-description\">{{result.description}}</div>' +\r\n        '    </div>' +\r\n        '  </div>' +\r\n        '</div>'\r\n    );\r\n\r\n    function link(scope, elem, attrs, ctrl) {\r\n      var inputField = elem.find('input');\r\n      var minlength = MIN_LENGTH;\r\n      var searchTimer = null;\r\n      var hideTimer;\r\n      var requiredClassName = REQUIRED_CLASS;\r\n      var responseFormatter;\r\n      var validState = null;\r\n      var httpCanceller = null;\r\n      var dd = elem[0].querySelector('.angucomplete-dropdown');\r\n      var isScrollOn = false;\r\n      var mousedownOn = null;\r\n      var unbindInitialValue;\r\n      var displaySearching;\r\n      var displayNoResults;\r\n\r\n      // #194 dropdown list not consistent in collapsing (bug).\r\n      function clickoutHandlerForDropdown(event) {\r\n        mousedownOn = null;\r\n        scope.hideResults(event);\r\n        document.body.removeEventListener('click', clickoutHandlerForDropdown);\r\n      }\r\n\r\n      elem.on('mousedown', function(event) {\r\n        if (event.target.id) {\r\n          mousedownOn = event.target.id;\r\n          if (mousedownOn === scope.id + '_dropdown') {\r\n            document.body.addEventListener('click', clickoutHandlerForDropdown);\r\n          }\r\n        }\r\n        else {\r\n          mousedownOn = event.target.className;\r\n        }\r\n      });\r\n\r\n      scope.currentIndex = scope.focusFirst ? 0 : null;\r\n      scope.searching = false;\r\n\r\n      function handleRequired(valid) {\r\n        scope.notEmpty = valid;\r\n        validState = scope.searchStr;\r\n        if (scope.fieldRequired && ctrl && scope.inputName) {\r\n          ctrl[scope.inputName].$setValidity(requiredClassName, valid);\r\n        }\r\n      }\r\n\r\n      function callOrAssign(value) {\r\n        if (typeof scope.selectedObject === 'function') {\r\n          scope.selectedObject(value);\r\n        }\r\n        else {\r\n          scope.selectedObject = value;\r\n        }\r\n\r\n        if (value) {\r\n          handleRequired(true);\r\n        }\r\n        else {\r\n          handleRequired(false);\r\n        }\r\n      }\r\n\r\n      function extractValue(obj, key) {\r\n        var keys, result;\r\n        if (key) {\r\n          keys= key.split('.');\r\n          result = obj;\r\n          for (var i = 0; i < keys.length; i++) {\r\n            result = result[keys[i]];\r\n          }\r\n        }\r\n        else {\r\n          result = obj;\r\n        }\r\n        return result;\r\n      }\r\n\r\n      function extractTitle(data) {\r\n        // split title fields and run extractValue for each and join with ' '\r\n        return scope.titleField.split(',')\r\n          .map(function(field) {\r\n            return extractValue(data, field);\r\n          })\r\n          .join(' ');\r\n      }\r\n\r\n      function handleInputChange(newval, initial) {\r\n        if (newval) {\r\n          if (typeof newval === 'object') {\r\n            scope.searchStr = extractTitle(newval);\r\n            callOrAssign({originalObject: newval});\r\n          } else if (typeof newval === 'string' && newval.length > 0) {\r\n            scope.searchStr = newval;\r\n          } else {\r\n            if (console && console.error) {\r\n              console.error('Tried to set ' + (!!initial ? 'initial' : '') + ' value of angucomplete to', newval, 'which is an invalid value');\r\n            }\r\n          }\r\n\r\n          handleRequired(true);\r\n        }\r\n      }\r\n\r\n      unbindInitialValue = scope.$watch('initialValue', function(newval) {\r\n        if (newval) {\r\n          // remove scope listener\r\n          unbindInitialValue();\r\n          // change input\r\n          handleInputChange(newval, true);\r\n        }\r\n      });\r\n\r\n      scope.$watch('fieldRequired', function(newval, oldval) {\r\n        if (newval !== oldval) {\r\n          if (!newval) {\r\n            ctrl[scope.inputName].$setValidity(requiredClassName, true);\r\n          }\r\n          else if (!validState || scope.currentIndex === -1) {\r\n            handleRequired(false);\r\n          }\r\n          else {\r\n            handleRequired(true);\r\n          }\r\n        }\r\n      });\r\n\r\n      function clearResults() {\r\n        scope.showDropdown = false;\r\n        scope.results = [];\r\n        if (dd) {\r\n          dd.scrollTop = 0;\r\n        }\r\n      }\r\n\r\n      scope.$on('angucomplete-alt:clearInput', function (event, elementId) {\r\n        if (!elementId || elementId === scope.id) {\r\n          scope.searchStr = null;\r\n          callOrAssign();\r\n          handleRequired(false);\r\n          clearResults();\r\n        }\r\n      });\r\n\r\n      scope.$on('angucomplete-alt:changeInput', function (event, elementId, newval) {\r\n        if (!!elementId && elementId === scope.id) {\r\n          handleInputChange(newval);\r\n        }\r\n      });\r\n\r\n      // for IE8 quirkiness about event.which\r\n      function ie8EventNormalizer(event) {\r\n        return event.which ? event.which : event.keyCode;\r\n      }\r\n\r\n      function callFunctionOrIdentity(fn) {\r\n        return function(data) {\r\n          return scope[fn] ? scope[fn](data) : data;\r\n        };\r\n      }\r\n\r\n      function setInputString(str) {\r\n        callOrAssign({originalObject: str});\r\n\r\n        if (scope.clearSelected) {\r\n          scope.searchStr = null;\r\n        }\r\n        clearResults();\r\n      }\r\n\r\n      function findMatchString(target, str) {\r\n        var result, matches, re;\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\r\n        // Escape user input to be treated as a literal string within a regular expression\r\n        re = new RegExp(str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'i');\r\n        if (!target) { return; }\r\n        if (!target.match || !target.replace) { target = target.toString(); }\r\n        matches = target.match(re);\r\n        if (matches) {\r\n          result = target.replace(re,\r\n              '<span class=\"'+ scope.matchClass +'\">'+ matches[0] +'</span>');\r\n        }\r\n        else {\r\n          result = target;\r\n        }\r\n        return $sce.trustAsHtml(result);\r\n      }\r\n\r\n      function initResults() {\r\n        scope.showDropdown = displaySearching;\r\n        scope.currentIndex = scope.focusFirst ? 0 : -1;\r\n        scope.results = [];\r\n      }\r\n\r\n      function searchTimerComplete(str) {\r\n        // Begin the search\r\n        if (!str || str.length < minlength) {\r\n          return;\r\n        }\r\n        if (scope.localData) {\r\n          scope.$apply(function() {\r\n            getLocalResults(str);\r\n          });\r\n        }\r\n        else if (scope.remoteApiHandler) {\r\n          getRemoteResultsWithCustomHandler(str);\r\n        } else {\r\n          getRemoteResults(str);\r\n        }\r\n      }\r\n\r\n      function keyupHandler(event) {\r\n        var which = ie8EventNormalizer(event);\r\n        if (which === KEY_LF || which === KEY_RT) {\r\n          // do nothing\r\n          return;\r\n        }\r\n\r\n        if (which === KEY_UP || which === KEY_EN) {\r\n          event.preventDefault();\r\n        }\r\n        else if (which === KEY_DW) {\r\n          event.preventDefault();\r\n          if (!scope.showDropdown && scope.searchStr && scope.searchStr.length >= minlength) {\r\n            initResults();\r\n            scope.searching = true;\r\n            searchTimerComplete(scope.searchStr);\r\n          }\r\n        }\r\n        else if (which === KEY_ES) {\r\n          clearResults();\r\n          scope.$apply(function() {\r\n            inputField.val(scope.searchStr);\r\n          });\r\n        }\r\n        else {\r\n          if (minlength === 0 && !scope.searchStr) {\r\n            return;\r\n          }\r\n\r\n          if (!scope.searchStr || scope.searchStr === '') {\r\n            scope.showDropdown = false;\r\n          } else if (scope.searchStr.length >= minlength) {\r\n            initResults();\r\n\r\n            if (searchTimer) {\r\n              $timeout.cancel(searchTimer);\r\n            }\r\n\r\n            scope.searching = true;\r\n\r\n            searchTimer = $timeout(function() {\r\n              searchTimerComplete(scope.searchStr);\r\n            }, scope.pause);\r\n          }\r\n\r\n          if (validState && validState !== scope.searchStr && !scope.clearSelected) {\r\n            scope.$apply(function() {\r\n              callOrAssign();\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      function cancelHttpRequest() {\r\n        if (httpCanceller) {\r\n          httpCanceller.resolve();\r\n        }\r\n      }\r\n\r\n      function handleOverrideSuggestions(event) {\r\n        if (scope.overrideSuggestions &&\r\n            !(scope.selectedObject && scope.selectedObject.originalObject === scope.searchStr)) {\r\n          if (event) {\r\n            event.preventDefault();\r\n          }\r\n\r\n          // cancel search timer\r\n          $timeout.cancel(searchTimer);\r\n          // cancel http request\r\n          cancelHttpRequest();\r\n\r\n          setInputString(scope.searchStr);\r\n        }\r\n      }\r\n\r\n      function dropdownRowOffsetHeight(row) {\r\n        var css = getComputedStyle(row);\r\n        return row.offsetHeight +\r\n          parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\r\n      }\r\n\r\n      function dropdownHeight() {\r\n        return dd.getBoundingClientRect().top +\r\n          parseInt(getComputedStyle(dd).maxHeight, 10);\r\n      }\r\n\r\n      function dropdownRow() {\r\n        return elem[0].querySelectorAll('.angucomplete-row')[scope.currentIndex];\r\n      }\r\n\r\n      function dropdownRowTop() {\r\n        return dropdownRow().getBoundingClientRect().top -\r\n          (dd.getBoundingClientRect().top +\r\n           parseInt(getComputedStyle(dd).paddingTop, 10));\r\n      }\r\n\r\n      function dropdownScrollTopTo(offset) {\r\n        dd.scrollTop = dd.scrollTop + offset;\r\n      }\r\n\r\n      function updateInputField(){\r\n        var current = scope.results[scope.currentIndex];\r\n        if (scope.matchClass) {\r\n          inputField.val(extractTitle(current.originalObject));\r\n        }\r\n        else {\r\n          inputField.val(current.title);\r\n        }\r\n      }\r\n\r\n      function keydownHandler(event) {\r\n        var which = ie8EventNormalizer(event);\r\n        var row = null;\r\n        var rowTop = null;\r\n\r\n        if (which === KEY_EN && scope.results) {\r\n          if (scope.currentIndex >= 0 && scope.currentIndex < scope.results.length) {\r\n            event.preventDefault();\r\n            scope.selectResult(scope.results[scope.currentIndex]);\r\n          } else {\r\n            handleOverrideSuggestions(event);\r\n            clearResults();\r\n          }\r\n          scope.$apply();\r\n        } else if (which === KEY_DW && scope.results) {\r\n          event.preventDefault();\r\n          if ((scope.currentIndex + 1) < scope.results.length && scope.showDropdown) {\r\n            scope.$apply(function() {\r\n              scope.currentIndex ++;\r\n              updateInputField();\r\n            });\r\n\r\n            if (isScrollOn) {\r\n              row = dropdownRow();\r\n              if (dropdownHeight() < row.getBoundingClientRect().bottom) {\r\n                dropdownScrollTopTo(dropdownRowOffsetHeight(row));\r\n              }\r\n            }\r\n          }\r\n        } else if (which === KEY_UP && scope.results) {\r\n          event.preventDefault();\r\n          if (scope.currentIndex >= 1) {\r\n            scope.$apply(function() {\r\n              scope.currentIndex --;\r\n              updateInputField();\r\n            });\r\n\r\n            if (isScrollOn) {\r\n              rowTop = dropdownRowTop();\r\n              if (rowTop < 0) {\r\n                dropdownScrollTopTo(rowTop - 1);\r\n              }\r\n            }\r\n          }\r\n          else if (scope.currentIndex === 0) {\r\n            scope.$apply(function() {\r\n              scope.currentIndex = -1;\r\n              inputField.val(scope.searchStr);\r\n            });\r\n          }\r\n        } else if (which === KEY_TAB) {\r\n          if (scope.results && scope.results.length > 0 && scope.showDropdown) {\r\n            if (scope.currentIndex === -1 && scope.overrideSuggestions) {\r\n              // intentionally not sending event so that it does not\r\n              // prevent default tab behavior\r\n              handleOverrideSuggestions();\r\n            }\r\n            else {\r\n              if (scope.currentIndex === -1) {\r\n                scope.currentIndex = 0;\r\n              }\r\n              scope.selectResult(scope.results[scope.currentIndex]);\r\n              scope.$digest();\r\n            }\r\n          }\r\n          else {\r\n            // no results\r\n            // intentionally not sending event so that it does not\r\n            // prevent default tab behavior\r\n            if (scope.searchStr && scope.searchStr.length > 0) {\r\n              handleOverrideSuggestions();\r\n            }\r\n          }\r\n        } else if (which === KEY_ES) {\r\n          // This is very specific to IE10/11 #272\r\n          // without this, IE clears the input text\r\n          event.preventDefault();\r\n        }\r\n      }\r\n \r\n      function processResults(responseData, str) {\r\n        var i, description, image, text, formattedText, formattedDesc;\r\n\r\n        if (responseData && responseData.length > 0) {\r\n          scope.results = [];\r\n\r\n          for (i = 0; i < responseData.length; i++) {\r\n            if (scope.titleField && scope.titleField !== '') {\r\n              text = formattedText = extractTitle(responseData[i]);\r\n            }\r\n\r\n            if(scope.subTitleField && scope.subTitleField !== ''){\r\n              var subTitleField = extractValue(responseData[i], scope.subTitleField);\r\n              if(subTitleField){\r\n                text += \"- \" + subTitleField;\r\n              }\r\n            }\r\n\r\n            description = '';\r\n            if (scope.descriptionField) {\r\n              description = formattedDesc = extractValue(responseData[i], scope.descriptionField);\r\n            }\r\n\r\n            image = '';\r\n            if (scope.imageField) {\r\n              image = extractValue(responseData[i], scope.imageField);\r\n            }\r\n\r\n            if (scope.matchClass) {\r\n              formattedText = findMatchString(text, str);\r\n              formattedDesc = findMatchString(description, str);\r\n            }\r\n\r\n            scope.results[scope.results.length] = {\r\n              title: formattedText,\r\n              description: formattedDesc,\r\n              image: image,\r\n              originalObject: responseData[i]\r\n            };\r\n          }\r\n\r\n        } else {\r\n          scope.results = [];\r\n        }\r\n\r\n        if (scope.autoMatch && scope.results.length === 1 &&\r\n            checkExactMatch(scope.results[0],\r\n              {title: text, desc: description || ''}, scope.searchStr)) {\r\n          scope.showDropdown = false;\r\n        } else if (scope.results.length === 0 && !displayNoResults) {\r\n          scope.showDropdown = false;\r\n        } else {\r\n          scope.showDropdown = true;\r\n        }\r\n        // return results limit lenght = 15\r\n        scope.results = scope.results.slice(0,15)\r\n      }\r\n\r\n      function httpSuccessCallbackGen(str) {\r\n        return function(responseData, status, headers, config) {\r\n          // normalize return obejct from promise\r\n          if (!status && !headers && !config && responseData.data) {\r\n            responseData = responseData.data;\r\n          }\r\n          scope.searching = false;\r\n          processResults(\r\n            extractValue(responseFormatter(responseData), scope.remoteUrlDataField),\r\n            str);\r\n        };\r\n      }\r\n\r\n      function httpErrorCallback(errorRes, status, headers, config) {\r\n        // cancelled/aborted\r\n        if (status === 0 || status === -1) { return; }\r\n\r\n        // normalize return obejct from promise\r\n        if (!status && !headers && !config) {\r\n          status = errorRes.status;\r\n        }\r\n        if (scope.remoteUrlErrorCallback) {\r\n          scope.remoteUrlErrorCallback(errorRes, status, headers, config);\r\n        }\r\n        else {\r\n          if (console && console.error) {\r\n            console.error('http error');\r\n          }\r\n        }\r\n      }\r\n\r\n      function getRemoteResults(str) {\r\n        var params = {},\r\n            url = scope.remoteUrl + encodeURIComponent(str);\r\n        if (scope.remoteUrlRequestFormatter) {\r\n          params = {params: scope.remoteUrlRequestFormatter(str)};\r\n          url = scope.remoteUrl;\r\n        }\r\n        if (!!scope.remoteUrlRequestWithCredentials) {\r\n          params.withCredentials = true;\r\n        }\r\n        cancelHttpRequest();\r\n        httpCanceller = $q.defer();\r\n        params.timeout = httpCanceller.promise;\r\n        $http.get(url, params)\r\n          .success(httpSuccessCallbackGen(str))\r\n          .error(httpErrorCallback);\r\n      }\r\n\r\n      function getRemoteResultsWithCustomHandler(str) {\r\n        cancelHttpRequest();\r\n\r\n        httpCanceller = $q.defer();\r\n\r\n        scope.remoteApiHandler(str, httpCanceller.promise)\r\n          .then(httpSuccessCallbackGen(str))\r\n          .catch(httpErrorCallback);\r\n\r\n        /* IE8 compatible\r\n        scope.remoteApiHandler(str, httpCanceller.promise)\r\n          ['then'](httpSuccessCallbackGen(str))\r\n          ['catch'](httpErrorCallback);\r\n        */\r\n      }\r\n\r\n      function getLocalResults(str) {\r\n        var i, match, s, value,\r\n            searchFields = scope.searchFields.split(','),\r\n            matches = [];\r\n        if (typeof scope.parseInput() !== 'undefined') {\r\n          str = scope.parseInput()(str);\r\n        }\r\n        for (i = 0; i < scope.localData.length; i++) {\r\n          match = false;\r\n\r\n          for (s = 0; s < searchFields.length; s++) {\r\n            value = extractValue(scope.localData[i], searchFields[s]) || '';\r\n            match = match || (value.toString().toLowerCase().indexOf(str.toString().toLowerCase()) >= 0);\r\n          }\r\n\r\n          if (match) {\r\n            matches[matches.length] = scope.localData[i];\r\n          }\r\n        }\r\n\r\n        scope.searching = false;\r\n        processResults(matches, str);\r\n      }\r\n\r\n      function checkExactMatch(result, obj, str){\r\n        if (!str) { return false; }\r\n        for(var key in obj){\r\n          if(obj[key].toLowerCase() === str.toLowerCase()){\r\n            scope.selectResult(result);\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n\r\n      function showAll() {\r\n        if (scope.localData) {\r\n          processResults(scope.localData, '');\r\n        }\r\n        else if (scope.remoteApiHandler) {\r\n          getRemoteResultsWithCustomHandler('');\r\n        }\r\n        else {\r\n          getRemoteResults('');\r\n        }\r\n      }\r\n\r\n      scope.onFocusHandler = function() {\r\n        if (scope.focusIn) {\r\n          scope.focusIn();\r\n        }\r\n        if (minlength === 0 && (!scope.searchStr || scope.searchStr.length === 0)) {\r\n          scope.currentIndex = scope.focusFirst ? 0 : scope.currentIndex;\r\n          scope.showDropdown = true;\r\n          showAll();\r\n        }\r\n      };\r\n\r\n      scope.hideResults = function() {\r\n        if (mousedownOn &&\r\n            (mousedownOn === scope.id + '_dropdown' ||\r\n             mousedownOn.indexOf('angucomplete') >= 0)) {\r\n          mousedownOn = null;\r\n        }\r\n        else {\r\n          hideTimer = $timeout(function() {\r\n            clearResults();\r\n            scope.$apply(function() {\r\n              if (scope.searchStr && scope.searchStr.length > 0) {\r\n                inputField.val(scope.searchStr);\r\n              }\r\n            });\r\n          }, BLUR_TIMEOUT);\r\n          cancelHttpRequest();\r\n\r\n          if (scope.focusOut) {\r\n            scope.focusOut();\r\n          }\r\n\r\n          if (scope.overrideSuggestions) {\r\n            if (scope.searchStr && scope.searchStr.length > 0 && scope.currentIndex === -1) {\r\n              handleOverrideSuggestions();\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      scope.resetHideResults = function() {\r\n        if (hideTimer) {\r\n          $timeout.cancel(hideTimer);\r\n        }\r\n      };\r\n\r\n      scope.hoverRow = function(index) {\r\n        scope.currentIndex = index;\r\n      };\r\n\r\n      scope.selectResult = function(result) {\r\n        // Restore original values\r\n        if (scope.matchClass) {\r\n          result.title = extractTitle(result.originalObject);\r\n          result.description = extractValue(result.originalObject, scope.descriptionField);\r\n        }\r\n\r\n        if (scope.clearSelected) {\r\n          scope.searchStr = null;\r\n        }\r\n        else {\r\n          scope.searchStr = result.title;\r\n        }\r\n        callOrAssign(result);\r\n        clearResults();\r\n      };\r\n\r\n      scope.inputChangeHandler = function(str) {\r\n        if (str.length < minlength) {\r\n          cancelHttpRequest();\r\n          clearResults();\r\n        }\r\n        else if (str.length === 0 && minlength === 0) {\r\n          scope.searching = false;\r\n          showAll();\r\n        }\r\n\r\n        if (scope.inputChanged) {\r\n          str = scope.inputChanged(str);\r\n        }\r\n        return str;\r\n      };\r\n\r\n      // check required\r\n      if (scope.fieldRequiredClass && scope.fieldRequiredClass !== '') {\r\n        requiredClassName = scope.fieldRequiredClass;\r\n      }\r\n\r\n      // check min length\r\n      if (scope.minlength && scope.minlength !== '') {\r\n        minlength = parseInt(scope.minlength, 10);\r\n      }\r\n\r\n      // check pause time\r\n      if (!scope.pause) {\r\n        scope.pause = PAUSE;\r\n      }\r\n\r\n      // check clearSelected\r\n      if (!scope.clearSelected) {\r\n        scope.clearSelected = false;\r\n      }\r\n\r\n      // check override suggestions\r\n      if (!scope.overrideSuggestions) {\r\n        scope.overrideSuggestions = false;\r\n      }\r\n\r\n      // check required field\r\n      if (scope.fieldRequired && ctrl) {\r\n        // check initial value, if given, set validitity to true\r\n        if (scope.initialValue) {\r\n          handleRequired(true);\r\n        }\r\n        else {\r\n          handleRequired(false);\r\n        }\r\n      }\r\n\r\n      scope.inputType = attrs.type ? attrs.type : 'text';\r\n\r\n      // set strings for \"Searching...\" and \"No results\"\r\n      scope.textSearching = attrs.textSearching ? attrs.textSearching : TEXT_SEARCHING;\r\n      scope.textNoResults = attrs.textNoResults ? attrs.textNoResults : TEXT_NORESULTS;\r\n      displaySearching = scope.textSearching === 'false' ? false : true;\r\n      displayNoResults = scope.textNoResults === 'false' ? false : true;\r\n\r\n      // set max length (default to maxlength deault from html\r\n      scope.maxlength = attrs.maxlength ? attrs.maxlength : MAX_LENGTH;\r\n\r\n      // register events\r\n      inputField.on('keydown', keydownHandler);\r\n      inputField.on('keyup', keyupHandler);\r\n\r\n      // set response formatter\r\n      responseFormatter = callFunctionOrIdentity('remoteUrlResponseFormatter');\r\n\r\n      // set isScrollOn\r\n      $timeout(function() {\r\n        var css = getComputedStyle(dd);\r\n        isScrollOn = css.maxHeight && css.overflowY === 'auto';\r\n      });\r\n    }\r\n\r\n    return {\r\n      restrict: 'EA',\r\n      require: '^?form',\r\n      scope: {\r\n        selectedObject: '=',\r\n        disableInput: '=',\r\n        initialValue: '=',\r\n        localData: '=',\r\n        remoteUrlRequestFormatter: '=',\r\n        remoteUrlRequestWithCredentials: '@',\r\n        remoteUrlResponseFormatter: '=',\r\n        remoteUrlErrorCallback: '=',\r\n        remoteApiHandler: '=',\r\n        id: '@',\r\n        type: '@',\r\n        placeholder: '@',\r\n        remoteUrl: '@',\r\n        remoteUrlDataField: '@',\r\n        titleField: '@',\r\n        descriptionField: '@',\r\n        imageField: '@',\r\n        inputClass: '@',\r\n        pause: '@',\r\n        searchFields: '@',\r\n        minlength: '@',\r\n        matchClass: '@',\r\n        clearSelected: '@',\r\n        overrideSuggestions: '@',\r\n        fieldRequired: '=',\r\n        fieldRequiredClass: '@',\r\n        inputChanged: '=',\r\n        autoMatch: '@',\r\n        focusOut: '&',\r\n        focusIn: '&',\r\n        inputName: '@',\r\n        focusFirst: '@',\r\n        parseInput: '&',\r\n        subTitleField: '@'\r\n      },\r\n      templateUrl: function(element, attrs) {\r\n        return attrs.templateUrl || TEMPLATE_URL;\r\n      },\r\n      compile: function(tElement) {\r\n        var startSym = $interpolate.startSymbol();\r\n        var endSym = $interpolate.endSymbol();\r\n        if (!(startSym === '{{' && endSym === '}}')) {\r\n          var interpolatedHtml = tElement.html()\r\n            .replace(/\\{\\{/g, startSym)\r\n            .replace(/\\}\\}/g, endSym);\r\n          tElement.html(interpolatedHtml);\r\n        }\r\n        return link;\r\n      }\r\n    };\r\n  }]);\n'use strict';\r\nangular.module('trainingModule').config(function ($routeProvider, $sceDelegateProvider, localStorageServiceProvider)\r\n{\r\n    $routeProvider.when('/training',\r\n            {\r\n                templateUrl: 'app/modules/training/views/trainingRoom.html',\r\n                controller: 'TrainingRoomController',\r\n                controllerAs: 'app/modules/training/controllers/trainingRoom'\r\n            });\r\n\r\n});\n'use strict';\r\nangular.module('mainModule').config(function ($routeProvider) {\r\n    $routeProvider.when('/home', {\r\n        templateUrl: 'app/modules/main/views/main.html',\r\n        controller: 'HomeController',\r\n        controllerAs: 'app/modules/main/controllers/main'\r\n    })\r\n    .when('/trustedlogin', {\r\n        templateUrl: 'app/modules/main/views/trustedlogin.html',\r\n        controller: 'TrustedLoginController',\r\n        controllerAs: 'app/modules/main/controllers/trustedlogin'\r\n    });  \r\n});\n'use strict';\r\nangular.module('conferenceModule').config(function ($routeProvider, $sceDelegateProvider, localStorageServiceProvider)\r\n{\r\n    $routeProvider.when('/room',\r\n            {\r\n                templateUrl: 'app/modules/conference/views/room.html',\r\n                controller: 'RoomController',\r\n                controllerAs: 'app/modules/conference/controllers/room'\r\n            });\r\n\r\n});\n'use strict';\r\n\r\nangular.module('adminModule',['api','toastr','config','underscore','LocalStorageModule']);\n'use strict';\r\nangular.module('adminModule').config(function ($routeProvider) {\r\n    $routeProvider\r\n        .when('/admin', {\r\n            templateUrl: 'app/modules/admin/views/adminAuthView.html',\r\n            controller: 'AdminAuthCtrl',\r\n            controllerAs: 'app/modules/admin/controllers/adminAuthController'\r\n        })\r\n        .when('/admin/rooms', {\r\n            templateUrl: 'app/modules/admin/views/adminRoomsListView.html',\r\n            controller: 'AdminRoomsListCtrl',\r\n            controllerAs: 'app/modules/admin/controllers/adminRoomsListController'\r\n        })\r\n        .when('/admin/rooms/create', {\r\n            templateUrl: 'app/modules/admin/views/adminCreateRoomView.html',\r\n            controller: 'AdminCreateRoomCtrl',\r\n            controllerAs: 'app/modules/admin/controllers/adminCreateRoomController'\r\n        })\r\n        .when('/admin/rooms/edit', {\r\n            templateUrl: 'app/modules/admin/views/adminEditRoomView.html',\r\n            controller: 'AdminEditRoomCtrl',\r\n            controllerAs: 'app/modules/admin/controllers/adminEditRoomCtrl'\r\n        })\r\n        .otherwise({\r\n            redirectTo: '/'\r\n        });        \r\n});\n'use strict';\nangular.module('config', [])\n  .constant('apiUrl', \"https://training.demo.vietinterview.com:9444/api\")\n  .constant('trainingSocketUrl', \"wss://training.demo.vietinterview.com:9445/one2many\")\n  .constant('conferenceSocketUrl', \"wss://training.demo.vietinterview.com:9446/many2many\")\n  .constant('iceServers', [{\"url\":\"turn:125.212.233.5:3478?transport=udp\",\"credential\":\"123456\",\"username\":\"quang\"}])\n  .constant('enabledLog', true);\n\n/**\r\n * @author thanhvk\r\n * created on 30.09.2016\r\n */\r\n'use strict';\r\n\r\nangular.module('app')\r\n    .service('sharedProperties', function () {\r\n        var objectValue = null;\r\n\r\n        return {\r\n            setObject: function(obj) {\r\n                objectValue = obj;\r\n            },\r\n            getObject: function () {\r\n                return objectValue;\r\n            }            \r\n        };\r\n    });\r\nangular.module('app')    \r\n    .service('viMdToast', function($mdToast) {\r\n        var position        = 'top right',\r\n            timeDelay       = 2000,\r\n            errorClass      = 'vi-toast-danger',\r\n            successClass    = 'vi-toast-success';\r\n\r\n        function showToast(msg, msgClass) {\r\n            $mdToast.show(\r\n                $mdToast.simple()\r\n                    .textContent(msg)\r\n                    .position(position)\r\n                    .toastClass(msgClass)\r\n                    .hideDelay(timeDelay)\r\n            );\r\n        }\r\n        \r\n        function error(msg) {\r\n            showToast(msg, errorClass);\r\n        }\r\n\r\n        function success(msg) {\r\n            showToast(msg, successClass);\r\n        }\r\n\r\n        return {\r\n            error: error,\r\n            success: success\r\n        };\r\n    });\n'use strict';\r\n\r\nangular\r\n    .module('app')\r\n    .run(function ($log) {\r\n    $log.debug('Application started');\r\n});\r\n\r\n\n'use strict';\r\nangular.module('app').config(function ($routeProvider)\r\n{\r\n    $routeProvider.when('/', {\r\n        templateUrl: 'app/modules/main/views/main.html',\r\n        controller: 'HomeController',\r\n        controllerAs: 'app/modules/main/controllers/main'\r\n    });\r\n});\r\n\n/**\r\n * @author thanhvk\r\n * created on 10.10.2016\r\n */\r\n 'use strict';\r\n\r\nangular.module('app')\r\n.filter('decodeBase64', ['$base64', function($base64) {\r\n    return function(base64Str) {\r\n        var url = '';\r\n\r\n        if (base64Str) {\r\n            url = $base64.decode(base64Str);\r\n        }\r\n\r\n        return url;\r\n    }   \r\n}]);\n'use strict';\r\nangular.module('app')\r\n.value('duScrollOffset', 0)\r\n.value('duScrollDuration', 1000)\r\n.config(function ($logProvider, $mdThemingProvider, $mdIconProvider, $translateProvider, \r\n        toastrConfig, enabledLog,$activityIndicatorProvider) {\r\n    // Enable log\r\n    $logProvider.debugEnabled(enabledLog);\r\n    // Set options third-party lib\r\n      toastrConfig.allowHtml = true;\r\n      toastrConfig.timeOut = 3000;\r\n      toastrConfig.positionClass = 'toast-top-right';\r\n      toastrConfig.preventDuplicates = true;\r\n      toastrConfig.closeButton = true;\r\n      toastrConfig.progressBar = true;\r\n    // Enable multi-language\r\n    $translateProvider.useStaticFilesLoader({\r\n        prefix:'./assets/locale/locale-',\r\n        suffix: '.json'\r\n    });\r\n    $translateProvider.preferredLanguage('vi');\r\n    $translateProvider.fallbackLanguage('vi');\r\n    $activityIndicatorProvider.setActivityIndicatorStyle('SpinnerDark');\r\n\r\n});\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/modules/admin/views/adminAuthView.html\",\"<main class=auth-main layout=column layout-align=\\\"center center\\\" ng-keypress=loginAccountKeyPress($event)><div class=auth-block><div class=\\\"md-display-1 vi-center auth-admin-logo\\\"><img src=assets/images/logo_trananh.jpg alt=\\\"\\\"></div><form name=authForm><md-input-container class=md-block><label>Email</label><input name=email ng-model=auth.emailLogin required><div ng-messages=authForm.email.$error><div ng-message=required>{{\\\"auth.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{\\\"auth.password\\\" | translate}}</label><input name=password type=password ng-model=auth.passwordLogin required><div ng-messages=authForm.password.$error><div ng-message=required>{{\\\"auth.required\\\" | translate}}</div></div></md-input-container><md-button ng-click=loginAccount() class=\\\"md-raised md-primary vi-btn-reset\\\">{{\\\"auth.login\\\" | translate}}</md-button></form></div></main>\");\n$templateCache.put(\"app/modules/admin/views/adminCreateRoomView.html\",\"<div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/toolbarView.html\\'\\\"></div><div layout=row flex><md-sidenav class=\\\"md-whiteframe-2dp md-sidenav-left vi-sidenav\\\" md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" md-whiteframe=4><div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/roomsListView.html\\'\\\"></div></md-sidenav><md-content flex id=content><div layout=row><h3 class=\\\"md-display-1 vi-row vi-headline\\\">{{\\\"admin.roomsList.createTitle\\\" | translate}}</h3></div><div layout=row class=\\\"room-info vi-row vi-col\\\"><div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/roomFormView.html\\'\\\"></div></div></md-content></div>\");\n$templateCache.put(\"app/modules/admin/views/adminEditRoomView.html\",\"<div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/toolbarView.html\\'\\\"></div><div layout=row flex><md-sidenav class=\\\"md-whiteframe-2dp md-sidenav-left vi-sidenav\\\" md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" md-whiteframe=4><div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/roomsListView.html\\'\\\"></div></md-sidenav><md-content flex id=content><div layout=row><h3 class=\\\"md-display-1 vi-row vi-headline\\\">{{\\\"admin.roomsList.editTitle\\\" | translate}} \\\"{{room.name}}\\\"</h3></div><div layout=row class=\\\"room-info vi-row vi-col\\\"><md-tabs flex md-dynamic-height md-border-bottom><md-tab label=\\\"{{\\'admin.roomsList.room\\' | translate}}\\\"><md-content class=md-padding><div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/roomFormView.html\\'\\\"></div></md-content></md-tab><md-tab label=\\\"{{\\'admin.roomsList.member\\' | translate}}\\\"><md-content class=md-padding><h3 class=md-title>{{\\\"admin.roomsList.totalMembers\\\" | translate}}: {{membersList.length | number}}</h3><div layout=row><div flex=30><div class=vi-panel><md-list class=vi-members-list><md-list-item class=md-2-line ng-repeat=\\\"member in membersList\\\" ng-click=showMemberDetail(member)><div class=\\\"md-list-item-text vi-member-item\\\"><h3 class=\\\"md-title vi-member-name\\\">{{member.name}}</h3><p class=vi-member-email>{{member.role}}</p></div></md-list-item></md-list><p style=text-align:center ng-show=\\\"membersList.length == 0\\\">{{\\\"admin.roomsList.addMemberMsg\\\" | translate}}</p></div></div><div flex=70 class=vi-row><!-- Begin btn group --><div layout=row class=vi-btn-group-member><div flex=70 layout=row layout-align=start><md-button class=\\\"md-raised vi-btn vi-warn\\\" ng-click=showEditMemberForm(); style=\\\"margin-left: 0\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=true></i> {{\\\"admin.roomsList.edit\\\" | translate}}</md-button><md-button class=\\\"md-raised vi-btn vi-success\\\" ng-click=showAddMemberForm();><i class=\\\"fa fa-plus\\\" aria-hidden=true></i> {{\\\"admin.roomsList.add\\\" | translate}}</md-button></div><div flex=30 layout=row layout-align=end><md-button class=\\\"md-raised vi-btn vi-danger\\\" style=\\\"margin-right: 0\\\" ng-click=removeMember();><i class=\\\"fa fa-times\\\" aria-hidden=true></i> {{\\\"admin.roomsList.add\\\" | translate}}</md-button></div></div><!-- End btn group --><!-- Begin user info panel --><div class=vi-panel><div ng-show=!showMemberForm><md-list ng-show=member><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>{{\\\"admin.roomsList.memberName\\\" | translate}}</div><div flex=80>{{member.name}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>{{\\\"admin.roomsList.memberRole\\\" | translate}}</div><div flex=80>{{member.name}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>Email</div><div flex=80>{{member.email}}</div></md-list-item></md-list><p style=text-align:center ng-show=!member>{{\\\"admin.roomsList.chooseMember\\\" | translate}}</p></div><!-- Begin form edit user --><form name=memberForm ng-show=showMemberForm class=vi-col><div layout=row><md-input-container flex=60 class=md-block><label>{{\\\"admin.roomsList.memberName\\\" | translate}}</label><input name=name ng-model=member.name required><div ng-messages=memberForm.name.$error><div ng-message=required>This is required!</div></div></md-input-container><md-input-container flex class=md-block><label>{{\\\"admin.roomsList.memberRole\\\" | translate}}</label><md-select ng-model=member.role><md-option value=presenter>Presenter</md-option><md-option value=member>Member</md-option></md-select></md-input-container></div><div layout=row><md-input-container flex=60 class=md-block><label>Email</label><input name=email ng-model=member.email required><div ng-messages=memberForm.email.$error><div ng-message=required>{{\\\"admin.roomsList.required\\\" | translate}}</div></div></md-input-container><md-input-container flex class=md-block><label>{{\\\"auth.password\\\" | translate}}</label><input name=password type=password ng-model=member.password required><div ng-messages=\\\"memberForm.password.$error && !member.password\\\"><div ng-message=required>{{\\\"admin.roomsList.required\\\" | translate}}</div></div></md-input-container></div><div layout=row><md-button ng-click=cancelMember() class=\\\"md-raised vi-btn vi-danger\\\">{{\\\"admin.roomsList.cancel\\\" | translate}}</md-button><md-button ng-click=saveMember() class=\\\"md-raised md-primary\\\">{{\\\"admin.roomsList.save\\\" | translate}}</md-button></div></form><!-- End form edit user --></div><!-- End user info panel --></div></div></md-content></md-tab></md-tabs></div></md-content></div>\");\n$templateCache.put(\"app/modules/admin/views/adminRoomsListView.html\",\"<div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/toolbarView.html\\'\\\"></div><div layout=row flex><md-sidenav class=\\\"md-whiteframe-2dp md-sidenav-left vi-sidenav\\\" md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" md-whiteframe=4><div style=\\\"width: 100%\\\" ng-include=\\\"\\'app/modules/admin/views/shared/roomsListView.html\\'\\\"></div></md-sidenav><md-content flex id=content class=content-admin-rooms-list><div layout=row class=\\\"vi-btn-group vi-btn-group-room\\\"><div flex=70 layout=row layout-align=start><md-button class=\\\"md-raised vi-btn vi-warn\\\" ng-click=gotoEditRoom();><i class=\\\"fa fa-pencil\\\" aria-hidden=true></i> {{\\\"admin.roomsList.edit\\\" | translate}}</md-button><md-button ng-href=#/admin/rooms/create class=\\\"md-raised vi-btn vi-success\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=true></i> {{\\\"admin.roomsList.create\\\" | translate}}</md-button></div><!-- <div flex=\\\"30\\\" layout=\\\"row\\\" layout-align=\\\"end\\\">\\r\\n        <md-button class=\\\"md-raised vi-btn vi-danger\\\">\\r\\n          <i class=\\\"fa fa-ban\\\" aria-hidden=\\\"true\\\"></i> Close\\r\\n        </md-button>\\r\\n      </div>  --></div><div layout=row><h3 flex=60 flex-xs=100 class=\\\"md-display-1 vi-row vi-headline\\\">{{\\\"admin.roomsList.totalRooms\\\" | translate}}: {{roomsList.length | number}}</h3></div><div layout=row layout-xs=column><div flex=50 flex-xs=100 class=\\\"vi-panel vi-row vi-col\\\"><h3 class=md-headline>{{room.name ? room.name : \\\"admin.roomsList.chooseRoom\\\" | translate}}</h3><div layout=column><md-list ng-show=room><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Room Id</div><div flex=70>{{room._id}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Room Reference</div><div flex=70>{{room.meetingRef}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{\\\"admin.roomsList.duration\\\" | translate}}</div><div flex=70>{{room.duration ? room.duration : \\\"\\\" | number}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{\\\"admin.roomsList.status\\\" | translate}}</div><div flex=70>{{room.active ? \\\"active\\\" : \\\"inactive\\\"}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Logout Url</div><div flex=70 style=\\\"word-wrap: break-word\\\">{{room.logoutUrl ? room.logoutUrl : \\\"\\\" | decodeBase64}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Welcome title</div><div flex=70>{{room.welcome ? room.welcome : \\\"\\\"}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{\\\"admin.roomsList.totalMembers\\\" | translate}}</div><div flex=70>{{room.membersList.length | number}}</div></md-list-item></md-list></div></div><div flex=50 flex-xs=100 class=\\\"vi-panel vi-row vi-col members-list\\\"><h3 class=md-headline>{{\\\"admin.roomsList.membersList\\\" | translate}}</h3><md-list class=vi-members-list><md-list-item class=\\\"md-3-line vi-md-list-user-item\\\" ng-repeat=\\\"member in room.membersList\\\"><div class=\\\"md-list-item-text vi-member-item\\\"><h3 class=\\\"md-title vi-member-name\\\">{{member.name}}</h3><p>{{member.email}}</p><p class=vi-member-email>{{member.role}}</p></div></md-list-item></md-list></div></div></md-content></div>\");\n$templateCache.put(\"app/modules/conference/views/room.html\",\"<!-- Start toolbar --><md-toolbar layout=row class=\\\"md-toolbar-tools vi-toolbar\\\"><div flex=40><!-- <button hide-gt-sm class=\\\"vi-center menuBtn\\\" ng-click=\\\"toggleSidenav(\\'left\\')\\\" aria-label=\\\"Toggle Menu\\\">\\r\\n            <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i>\\r\\n        </button> --> <img src=assets/images/logo_trananh_blue.png alt=Trananh style=\\\"width: 200px\\\"></div><div flex=20 flex-sm=40 flex-xs=40 class=vi-center><h2 class=\\\"md-display-1 vi-logo\\\">{{meeting.name}}</h2></div><div flex=40 class=vi-right><ul class=\\\"list-inline vi-nav-right\\\"><!-- <li class=\\\"vi-nav-right-item\\\"\\r\\n                ng-show=\\\"me.profile.role==\\'presenter\\'\\\"\\r\\n                ng-click=\\\"endLesson()\\\">\\r\\n                <i class=\\\"fa fa-hourglass-end\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                <span>{{\\\"conference.endLesson\\\" | translate}}</span>\\r\\n            </li> --><!-- <li class=\\\"vi-nav-right-item\\\"\\r\\n                ng-click=\\\"showSettingDialog($event)\\\">\\r\\n                <i class=\\\"fa fa-cog\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                <span>{{\\\"conference.setting\\\" | translate}}</span>\\r\\n            </li> --><li ng-click=leave() class=vi-nav-right-item><i class=\\\"fa fa-sign-out\\\" aria-hidden=true></i> <span>{{\\\"conference.logout\\\" | translate}}</span></li></ul></div></md-toolbar><!-- End toolbar --><div layout=row><!-- Start sidebar --><md-sidenav class=\\\"md-sidenav-left vi-sidenav\\\" md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\"><div class=\\\"panel panel-info\\\" style=\\\"height: 100%; padding: 0px; margin: 0px\\\"><div class=\\\"localCameraDiv box\\\" style=\\\"width: 100%\\\"><div align=center class=web-cam><video id=localCamera autoplay muted poster=assets/images/avatar-03.png></video></div><div class=\\\"btn-local-group-video vi-center\\\"><span ng-click=toggleAudio() class=vi-icon ng-class=\\\"audio?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-microphone\\\"></i><md-tooltip>{{video ? \\'conference.offVolume\\' : \\'conference.offVolume\\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleVideo() class=vi-icon ng-class=\\\"video?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-camera\\\"></i><md-tooltip>{{video ? \\'conference.offCamera\\' : \\'conference.onCamera\\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleHand() ng-show=\\\"me.profile.role!=\\'presenter\\'\\\" class=vi-icon ng-class=\\\"handUp?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-hand-paper-o\\\"></i></span></div><div class=vi-center><md-button class=\\\"md-fab md-mini\\\" aria-label=Connect ng-click=connect() ng-disabled=me.pubState ng-class=\\\"\\'btn-icon-on\\'\\\"><i class=\\\"fa fa-volume-control-phone\\\"></i><md-tooltip>{{ \\'conference.connect\\' | translate}}</md-tooltip></md-button><md-button class=\\\"md-fab md-mini\\\" aria-label=Disconnect ng-click=disconnect() ng-disabled=!me.pubState ng-class=\\\"\\'btn-icon-off\\'\\\"><i class=\\\"glyphicon glyphicon-phone-alt\\\"></i><md-tooltip>{{ \\'conference.disconnect\\' | translate}}</md-tooltip></md-button></div></div><div class=panel-body style=\\\"height: 100%\\\"><ul class=\\\"list-unstyled members-list-room box\\\"><li class=title>{{\\\"conference.presenter\\\" | translate}}</li><li class=content><span ng-class=\\\"presenter.online ? \\'fa fa-circle vi-online\\' : \\'fa fa-circle vi-offline\\'\\\" aria-hidden=true></span> {{presenter.profile.name}}</li><li class=title>{{\\\"conference.learners\\\" | translate}} <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-hand-paper-o btn-handup\\\" ng-class=\\\"!notiHandUp ? \\'icon-on animated infinite bounce\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=\\\"\\\"></span></li><li class=content style=\\\"position: relative\\\" ng-repeat=\\\"viewer in viewerList\\\"><span ng-class=\\\"viewer.online ? \\'fa fa-circle vi-online\\' : \\'fa fa-circle vi-offline\\'\\\" aria-hidden=true></span> {{viewer.profile.name}} <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-video-camera\\\" ng-class=\\\"viewer.invited ? \\'icon-on\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=memberInvite(viewer.id)></span> <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-hand-paper-o btn-handup\\\" ng-class=\\\"viewer.handUp ? \\'icon-on animated infinite bounce\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=\\\"\\\"></span></li></ul></div></div></md-sidenav><!-- End sidebar --><section layout=row flex class=content-wrapper><div class=overlay ng-show=!me.pubState></div><!-- Start conference board --><md-content flex><div class=main-content><div class=\\\"conference-board box\\\"><div layout=row layout-wrap><div flex={{firstSlot}} class=video-wrapper><md-progress-circular ng-show=\\\"presenter.subState == 1 || presenter.subState == 2\\\" class=\\\"md-hue-2 md-warn progress\\\" md-diameter=30px></md-progress-circular><video id=remoteCamera0 controls poster=assets/images/avatar-03.png autoplay></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{presenter.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(presenter.id) class=btn-refresh style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-refresh\\\"></i><md-tooltip>Refresh video</md-tooltip></span></div></div></div><div flex={{slot.width}} class=video-wrapper ng-show=slot.allocated ng-repeat=\\\"slot in videoSlots | filter:byIndex\\\"><md-progress-circular ng-show=\\\"slot.member.subState == 1 || slot.member.subState == 2\\\" class=\\\"md-hue-2 md-warn progress\\\" md-diameter=30px></md-progress-circular><video ng-attr-id=\\\"{{ \\'remoteCamera\\' + ($index+1) }}\\\" controls autoplay poster=assets/images/avatar-03.png style=\\\"width: 100%\\\"></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{slot.member.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(slot.member.id) class=btn-refresh style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-refresh\\\"></i><md-tooltip md-direction=left>Refresh video</md-tooltip></span><span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" ng-click=memberDiscard(slot) class=\\\"btn-close vi-center\\\"><i class=\\\"fa fa-times fa-lg\\\"></i><md-tooltip md-direction=right>Close</md-tooltip></span></div></div></div></div></div></div></md-content><!-- End conference board --><!-- Start chat panel --><md-sidenav class=\\\"md-sidenav-right vi-chat-sidenav\\\" md-is-locked-open=\\\"$mdMedia(\\'min-width: 400px\\')\\\" md-component-id=right><div class=\\\"chat-content-wrapper box\\\"><div id=chat-content class=\\\"chat-content chat-content-conference box\\\" style=\\\"overflow-y: auto\\\"><div class=chat-box-title>Chat box</div><ul class=\\\"messages-list list-unstyled\\\"><li class=\\\"md-1-line message-item\\\" ng-repeat=\\\"msg in chatMessage\\\"><div class=md-list-item-text id={{msg.idx}}><span class=user>{{msg.user}}: </span><span class=message>{{msg.text}}</span></div></li></ul></div><div layout=row class=\\\"input-message-group-training box\\\" ng-keypress=sendChatMessage($event)><md-input-container flex=80><label>{{\\\"conference.chatMsg\\\" | translate}}</label><input type=text ng-model=chatInput></md-input-container><div flex=20 class=btn-send-wrapper><md-button class=\\\"md-fab md-primary\\\" aria-label=\\\"Send message\\\" ng-click=chat()><i class=\\\"fa fa-paper-plane\\\" aria-hidden=true></i></md-button></div></div></div></md-sidenav><!-- End chat panel --></section></div>\");\n$templateCache.put(\"app/modules/conference/views/settingDialog.html\",\"<md-dialog class=setting-dialog aria-label=Setting><md-toolbar><div class=md-toolbar-tools><h2>{{\\\"conference.setting\\\" | translate}}</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon aria-label=\\\"Close dialog\\\"><i class=\\\"fa fa-times\\\" aria-hidden=true></i></md-icon></md-button></div></md-toolbar><div ng-cloak><md-content><md-tabs md-dynamic-height md-border-bottom><md-tab label=\\\"{{\\'general.netSpeed\\' | translate}}\\\"><md-content class=\\\"md-padding vi-center\\\"><show-bandwidth max=50 scale=20></show-bandwidth></md-content></md-tab><md-tab label=\\\"{{\\'general.devices\\' | translate}}\\\"><md-content class=md-padding><show-devices></show-devices></md-content></md-tab></md-tabs></md-content></div></md-dialog>\");\n$templateCache.put(\"app/modules/main/views/main.html\",\"<main class=auth-main layout=column layout-align=\\\"center center\\\" ng-keypress=loginMeetingKeyPress($event)><div class=auth-block><div class=\\\"md-display-1 vi-center auth-room-logo\\\"><img src=assets/images/logo_trananh.jpg alt=\\\"\\\"></div><form name=authMeetingForm><md-input-container class=md-block><label>RoomId</label><input name=roomId ng-model=meetingAuth.meetingId required><div ng-messages=authMeetingForm.roomId.$error><div ng-message=required>{{\\\"auth.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Email</label><input name=email ng-model=meetingAuth.email required><div ng-messages=authMeetingForm.email.$error><div ng-message=required>{{\\\"auth.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{\\\"auth.password\\\" | translate}}</label><input name=password type=password ng-model=meetingAuth.password required><div ng-messages=authMeetingForm.password.$error><div ng-message=required>{{\\\"auth.required\\\" | translate}}</div></div></md-input-container><md-radio-group ng-model=meetingAuth.kind layout=row class=md-block><md-radio-button flex value=training class=md-primary>Training</md-radio-button><md-radio-button flex value=conference class=md-primary>Conference</md-radio-button></md-radio-group><md-button ng-click=loginMeeting() class=\\\"md-raised md-primary vi-btn-reset btn-login\\\">{{\\\"auth.login\\\" | translate}}</md-button></form></div></main>\");\n$templateCache.put(\"app/modules/main/views/trustedlogin.html\",\"<main class=\\\"auth-main auth-main-trusted\\\" layout=column layout-align=\\\"center center\\\" ng-keypress=loginMeetingKeyPress($event)><div class=auth-block-trusted layout=row><div class=vi-col flex=60 flex-xs=100 flex-offset=40 flex-offset-xs=0><img class=logo-trusted src=assets/images/logo_trananh_white_color.png alt=VietInterview><h3 class=md-headline>{{\\\"training.title\\\" | translate}}</h3><md-button class=\\\"md-raised btn-trusted vi-btn-reset\\\" ng-click=loginMeeting()>{{\\\"training.enter\\\" | translate}}</md-button></div></div></main>\");\n$templateCache.put(\"app/modules/training/views/trainingRoom.html\",\"<!-- Start toolbar --><md-toolbar layout=row class=\\\"md-toolbar-tools vi-toolbar\\\"><div flex=30><!-- <button hide-gt-sm class=\\\"vi-center menuBtn\\\" ng-click=\\\"toggleSidenav(\\'left\\')\\\" aria-label=\\\"Toggle Menu\\\">\\r\\n            <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i>\\r\\n        </button> --> <img src=assets/images/logo_trananh_blue.png alt=Trananh style=\\\"width: 200px\\\"></div><div flex=40 flex-sm=40 flex-xs=40 class=vi-center><h2 class=\\\"md-display-1 vi-logo\\\">{{meeting.name}}</h2></div><div flex=30 class=vi-right><ul class=\\\"list-inline vi-nav-right\\\"><li class=vi-nav-right-item ng-show=\\\"me.profile.role==\\'presenter\\'\\\" ng-click=endLesson()><i class=\\\"fa fa-hourglass-end\\\" aria-hidden=true></i> <span>{{\\\"training.endLesson\\\" | translate}}</span></li><li ng-click=leave() class=vi-nav-right-item><i class=\\\"fa fa-sign-out\\\" aria-hidden=true></i> <span>{{\\\"training.logout\\\" | translate}}</span></li></ul></div></md-toolbar><!-- End toolbar --><div layout=row flex style=\\\"height: 100%\\\"><!-- Start sidebar --><md-sidenav class=\\\"md-sidenav-left vi-sidenav\\\" md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'min-width: 280px\\')\\\" ng-show=!fullScreen><div class=\\\"panel panel-info\\\" style=\\\"height: 100%; padding: 0px; margin: 0px\\\"><div class=\\\"localCameraDiv box\\\" style=\\\"width: 100%\\\"><div align=center class=web-cam><video id=localCamera autoplay muted poster=assets/images/avatar-03.png></video></div><div class=\\\"btn-local-group-video vi-center\\\"><span ng-click=toggleAudio() class=vi-icon ng-class=\\\"audio?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-microphone\\\"></i><md-tooltip>{{video ? \\'training.offVolume\\' : \\'training.offVolume\\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleVideo() class=vi-icon ng-class=\\\"video?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-camera\\\"></i><md-tooltip>{{video ? \\'training.offCamera\\' : \\'training.onCamera\\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleHand() ng-show=\\\"me.profile.role!=\\'presenter\\'\\\" class=vi-icon ng-class=\\\"handUp?\\'icon-on\\':\\'icon-off\\'\\\" style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-hand-paper-o\\\"></i></span></div><div class=vi-center><md-button class=\\\"md-fab md-mini\\\" aria-label=Connect ng-click=connect() ng-disabled=me.pubState ng-class=\\\"\\'btn-icon-on\\'\\\"><i class=\\\"fa fa-volume-control-phone\\\"></i><md-tooltip>{{ \\'training.connect\\' | translate}}</md-tooltip></md-button><md-button class=\\\"md-fab md-mini\\\" aria-label=Disconnect ng-click=disconnect() ng-disabled=!me.pubState ng-class=\\\"\\'btn-icon-off\\'\\\"><i class=\\\"glyphicon glyphicon-phone-alt\\\"></i><md-tooltip>{{ \\'training.disconnect\\' | translate}}</md-tooltip></md-button></div></div><div class=panel-body style=\\\"height: 100%\\\"><ul class=\\\"list-unstyled members-list-room box\\\"><li class=title>{{\\\"training.presenter\\\" | translate}}</li><li class=content><span ng-class=\\\"presenter.online ? \\'fa fa-circle vi-online\\' : \\'fa fa-circle vi-offline\\'\\\" aria-hidden=true></span> {{presenter.profile.name}}</li><li class=title>{{\\\"training.learners\\\" | translate}} <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-hand-paper-o btn-handup\\\" ng-class=\\\"!notiHandUp ? \\'icon-on animated infinite bounce\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=\\\"\\\"></span></li><li class=content style=\\\"position: relative\\\" ng-repeat=\\\"viewer in viewerList\\\"><span ng-class=\\\"viewer.online ? \\'fa fa-circle vi-online\\' : \\'fa fa-circle vi-offline\\'\\\" aria-hidden=true></span> {{viewer.profile.name}} <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-video-camera\\\" ng-class=\\\"viewer.invited ? \\'icon-on\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=memberInvite(viewer.id)></span> <span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"fa fa-hand-paper-o btn-handup\\\" ng-class=\\\"viewer.handUp ? \\'icon-on animated infinite bounce\\' : \\'icon-off\\'\\\" style=\\\"cursor: pointer; float: right; margin-left: 10px\\\" aria-hidden=true ng-click=\\\"\\\"></span></li></ul></div></div></md-sidenav><!-- End sidebar --><section layout=row flex class=\\\"content-wrapper content-wrapper-training\\\"><!-- <div class=\\\"overlay\\\" ng-show=\\\"!me.pubState\\\"></div> --><div class=\\\"main-content main-content-training vi-custom-tabs\\\" flex><span class=btn-size ng-click=changeSizeSlide()><i class=\\\"fa fa-arrows-alt\\\" aria-hidden=true ng-show=!fullScreen></i> <img style=\\\"width: 15px; height: 15px\\\" src=assets/images/minimize.png alt=maximize ng-show=fullScreen></span><div class=\\\"box vi-full-height\\\"><md-tabs md-dynamic-height=false><md-tab label=\\\"{{\\'training.presentation\\' | translate}}\\\"><md-content class=md-padding><!-- Start conference board --><div class=my-pdf-container><div class=\\\"pdf-content box vi-center\\\" style=\\\"height: calc(100% - 55px); overflow: auto\\\"><pdf-viewer delegate-handle=my-pdf-container url=pdfUrl scale=.9 show-toolbar=false headers=\\\"{ \\'x-you-know-whats-awesome\\': \\'EVERYTHING\\' }\\\"></pdf-viewer></div><div class=\\\"toolbar-pdf-viewer box\\\" layout=row><div flex=30 ng-show=\\\"me.profile.role==\\'presenter\\'\\\"><md-button class=\\\"md-raised vi-success vi-btn\\\" ngf-select=uploadPresentation($file) ngf-max-size=10MB><i class=\\\"fa fa-upload\\\" aria-hidden=true></i> {{\\\"training.upload\\\" | translate}}</md-button></div><div flex=40 class=vi-center ng-show=\\\"me.profile.role==\\'presenter\\'\\\"><md-button class=\\\"md-raised vi-btn-default\\\" ng-click=pdfSwitchPage(-1)><i class=\\\"fa fa-chevron-left\\\" aria-hidden=true></i></md-button><input type=text class=\\\"vi-input vi-pdf-input\\\" ng-value=\\\"currPage + \\'/\\' + totalPages\\\"><md-button class=\\\"md-raised vi-btn-default\\\" ng-click=pdfSwitchPage(1)><i class=\\\"fa fa-chevron-right\\\" aria-hidden=true></i></md-button></div><div flex=30 ng-class=\\\"{\\'vi-right\\': (me.profile.role==\\'presenter\\')}\\\"><md-button class=\\\"md-raised vi-btn-default\\\" ng-click=zoomOut(0.1)><i class=\\\"fa fa-search-minus\\\" aria-hidden=true></i></md-button><input flex=60 class=\\\"vi-input vi-pdf-input\\\" type=text ng-value=\\\"zoom + \\'%\\'\\\" disabled><md-button class=\\\"md-raised vi-btn-default\\\" ng-click=zoomIn(0.1)><i class=\\\"fa fa-search-plus\\\" aria-hidden=true></i></md-button></div></div></div><!-- End conference board --></md-content></md-tab><md-tab label=\\\"{{\\'training.screenSharing\\' | translate}}\\\"><md-content class=\\\"md-padding box share-screen-content\\\"><md-button ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"md-raised vi-success vi-btn\\\" ng-click=shareScreen() style=\\\"margin: 0; margin-bottom: 5px\\\"><i class=\\\"fa fa-desktop\\\" aria-hidden=true></i> {{\\\"training.screenSharing\\\" | translate}}</md-button><a href=https://chrome.google.com/webstore/detail/screen-capturing/ajhifddimkapgcifgcodmmfdlknahffk>Chrome extension</a><video id=screenCamera autoplay muted poster=assets/images/avatar-03.png></video></md-content></md-tab><md-tab label=\\\"{{\\'training.fileSharing\\' | translate}}\\\"><md-content class=\\\"md-padding box share-file-training-content\\\"><md-button ng-show=\\\"me.profile.role==\\'presenter\\'\\\" class=\\\"md-raised vi-success vi-btn\\\" ngf-select=shareFile($file) ngf-max-size=10MB style=\\\"margin: 0 !important\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=true></i> {{\\\"training.upload\\\" | translate}}</md-button><md-list class=files-sharing-list><md-list-item class=secondary-button-padding ng-repeat=\\\"file in fileList\\\"><p class=title><a href={{file.url}} target=_blank>{{file.name}}</a></p><md-button class=\\\"md-raised vi-danger vi-btn vi-btn-default\\\" ng-click=removeFile(file)><i class=\\\"fa fa-trash\\\" aria-hidden=true></i></md-button><md-divider ng-if=!$last></md-divider></md-list-item></md-list></md-content></md-tab></md-tabs></div></div><!-- Start chat panel --><md-sidenav class=\\\"md-sidenav-right vi-chat-sidenav vi-chat-sidenav-training\\\" md-is-locked-open=\\\"$mdMedia(\\'min-width: 280px\\')\\\" md-component-id=right ng-show=!fullScreen><div class=\\\"presenter main box video-wrapper\\\" layout=row layout-wrap ng-show=\\\"me.profile.role!=\\'presenter\\'\\\"><md-progress-circular ng-show=\\\"presenter.subState == 1 || presenter.subState == 2\\\" class=\\\"md-hue-2 md-warn progress\\\" ng-class=\\\"toggleVideoFlag ? \\'hide-panel\\' : \\'\\'\\\" md-diameter=40px></md-progress-circular><video id=remoteCamera0 controls poster=assets/images/avatar-03.png autoplay style=\\\"min-height: 200px\\\" ng-class=\\\"toggleVideoFlag ? \\'hide-panel\\' : \\'\\'\\\"></video><div layout=row class=btn-group-video ng-class=\\\"!toggleVideoFlag ? \\'abs-bar\\' : \\'static-bar\\'\\\"><div flex=60><span class=label-name>{{\\\"training.presenter\\\" | translate}}: {{presenter.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(presenter.id) class=btn-refresh style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-refresh\\\"></i><md-tooltip>{{\\'training.refresh\\' | translate}}</md-tooltip></span><!-- <span ng-click=\\\"toggleMainVideo()\\\"\\r\\n                        class=\\\"btn-collapse\\\"\\r\\n                        style=\\\"cursor: pointer\\\">\\r\\n                            <i class=\\\"fa fa-minus-square-o\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                            <md-tooltip>{{!toggleVideoFlag ? \\'training.collapse\\' : \\'training.expand\\' | translate}}</md-tooltip>\\r\\n                        </span> --></div></div></div><div ng-class=\\\"(me.profile.role!=\\'presenter\\') ? \\'calc-sidenav-training\\' : \\'vi-full-height\\'\\\"><md-tabs md-dynamic-height=true class=\\\"box vi-custom-tabs\\\"><md-tab label=Chat><md-content class=md-padding><div id=chat-content class=\\\"chat-content chat-content-training box\\\" style=\\\"overflow-y: auto\\\"><div class=chat-box-title>Chat box</div><ul class=\\\"messages-list list-unstyled\\\"><li class=\\\"md-1-line message-item\\\" ng-repeat=\\\"msg in chatMessage\\\"><div class=md-list-item-text id={{msg.idx}}><span class=user>{{msg.user}}: </span><span class=message>{{msg.text}}</span></div></li></ul></div><div layout=row class=\\\"input-message-group-training box\\\" ng-keypress=sendChatMessage($event)><md-input-container flex=80><label>{{\\\"training.chatMsg\\\" | translate}}</label><input type=text ng-model=chatInput></md-input-container><div flex=20 class=btn-send-wrapper><md-button class=\\\"md-fab md-mini md-primary\\\" aria-label=\\\"Send message\\\" ng-click=chat()><i class=\\\"fa fa-paper-plane\\\" aria-hidden=true></i></md-button></div></div></md-content></md-tab><md-tab label=Videos><md-content class=md-padding><div layout=row layout-wrap class=\\\"participant main members-video-panel members-video-training-panel\\\"><div flex=50 class=\\\"video-member video-wrapper\\\" ng-show=slot.allocated ng-repeat=\\\"slot in videoSlots | filter:byIndex\\\"><md-progress-circular ng-show=\\\"slot.member.subState == 1 || slot.member.subState == 2\\\" class=\\\"md-hue-2 md-warn progress\\\" md-diameter=30px></md-progress-circular><video ng-attr-id=\\\"{{ \\'remoteCamera\\' + ($index+1) }}\\\" controls autoplay poster=assets/images/avatar_1.png style=\\\"width: 100%\\\"></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{slot.member.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(slot.member.id) class=btn-refresh style=\\\"cursor: pointer\\\"><i class=\\\"fa fa-refresh\\\"></i> </span><span ng-show=\\\"me.profile.role==\\'presenter\\'\\\" ng-click=memberDiscard(slot) class=\\\"btn-close vi-center\\\"><i class=\\\"fa fa-times fa-lg\\\"></i></span></div></div></div><div flex=50 ng-hide=\\\"countAllocated == 1\\\"><img src=assets/images/video-placeholder.png style=\\\"width: 100%; display: block; margin-bottom: 5px\\\"></div><div flex=50 ng-hide=\\\"countAllocated == 2\\\"><img src=assets/images/video-placeholder.png style=\\\"width: 100%; display: block; margin-bottom: 5px\\\"></div><div flex=50 ng-hide=\\\"countAllocated == 3\\\"><img src=assets/images/video-placeholder.png style=\\\"width: 100%; display: block; margin-bottom: 5px\\\"></div></div></md-content></md-tab></md-tabs></div></md-sidenav><!-- End chat panel --></section></div>\");\n$templateCache.put(\"app/shared/directives/showBandwidth/showBandwidthView.html\",\"<canvas data-type=radial-gauge data-width=200 data-height=200 data-units=Mb/s data-title=\\\"{{speedDownMbps}} Mbps\\\" data-value={{speedDownMbps}} data-min-value=0 data-max-value={{max}} data-major-ticks=\\\"0, 10, 20, 30, 40, {{max}}\\\" , data-highlights=\\'[\\r\\n            { \\\"from\\\": 0, \\\"to\\\": 10, \\\"color\\\": \\\"rgba(250,104,0,1 )\\\" },\\r\\n            { \\\"from\\\": 10, \\\"to\\\": 20, \\\"color\\\": \\\"rgba(240,163,10,1 )\\\" },        \\r\\n            { \\\"from\\\": 20, \\\"to\\\": 50, \\\"color\\\": \\\"rgba(164,196,0,1 )\\\" }            \\r\\n        ]\\' data-minor-ticks={{scale}} data-stroke-ticks=false data-highlights=false data-value-box=false></canvas><div><span class=vi-right style=\\\"min-width: 50px; font-weight: bold; display: inline-block\\\">{{(speedDownMbpsAvg == 0) ? \\'\\' : speedDownMbpsAvg}}</span>Mbps</div><md-button class=\\\"md-raised md-primary\\\" ng-click=measureDownloadSpeedAverage()><i class=\\\"fa fa-clock-o\\\" aria-hidden=true></i> <span>{{\\'general.testSpeed\\' | translate}}</span></md-button>\");\n$templateCache.put(\"app/shared/directives/showDevices/showDevices.html\",\"<div layout=row class=item-device><div flex=30>Webcam</div><div flex=70><i class=\\\"fa fa-check-circle\\\" ng-class=\\\"{\\'enable-device\\': (videoDevices > 0)}\\\" aria-hidden=true></i> <span ng-show=\\\"videoDevices <= 0\\\">{{\\'general.notAvailable\\' | translate}}</span></div></div><md-divider></md-divider><div layout=row class=item-device><div flex=30>Audio</div><div flex=70><i class=\\\"fa fa-check-circle\\\" ng-class=\\\"{\\'enable-device\\': (audioInputDevices > 0)}\\\" aria-hidden=true></i> <span ng-show=\\\"audioInputDevices <= 0\\\">{{\\'general.notAvailable\\' | translate}}</span></div></div><!-- <md-divider></md-divider> --><!-- <div layout=\\\"row\\\">\\r\\n    <div flex=\\\"30\\\">Speaker</div>\\r\\n    <div flex=\\\"70\\\">\\r\\n        <i class=\\\"fa fa-check-circle\\\" ng-class=\\\"{\\'enable-device\\': (audioOutputDevices > 0)}\\\" aria-hidden=\\\"true\\\"></i>\\r\\n        {{audioOutputDevices}}\\r\\n    </div>\\r\\n</div> --> <!-- <div class=\\\"main\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of audio/video devices available:</div><div class=\\\"content\\\">{{allDevices}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of video devices available: </div><div class=\\\"content\\\">{{videoDevices}}</div>                           \\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of audio devices available: </div><div class=\\\"content\\\">{{audioDevices}}</div>                           \\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of video-input devices available: </div><div class=\\\"content\\\">{{videoInputDevices}}</div>                           \\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of audio-input devices available: </div><div class=\\\"content\\\">{{audioInputDevices}}</div>           \\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"title\\\">Number of audio-output devices available: </div><div class=\\\"content\\\">{{audioOutputDevices}}</div>                           \\r\\n    </div>     \\r\\n    <div class=\\\"row\\\">\\r\\n        <div>All audio input devices:</div>\\r\\n    </div>\\r\\n    <div ng-repeat=\\\"deviceAudioInputName in audioInputDevicesName\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"title\\\">Audio input device name: </div><div class=\\\"content\\\">{{deviceAudioInputName.label}}</div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div>All video input devices:</div>\\r\\n    </div>\\r\\n    <div ng-repeat=\\\"deviceVideoInputName in deviceVideoInputName\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"title\\\">Audio output device name: </div><div class=\\\"content\\\">{{deviceVideoInputName.label}}</div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div>All audio output devices:</div>\\r\\n    </div>\\r\\n    <div ng-repeat=\\\"deviceAudioOutputName in audioOutputDevicesName\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"title\\\">Audio output device name: </div><div class=\\\"content\\\">{{deviceAudioOutputName.label}}</div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div> -->\");\n$templateCache.put(\"app/modules/admin/views/shared/roomFormView.html\",\"<form name=creatRoomForm><md-input-container class=md-block><label>{{\\\"admin.roomsList.nameRoom\\\" | translate}}</label><input name=name type=text ng-model=room.name required><div ng-messages=creatRoomForm.name.$error><div ng-message=required>{{\\\"admin.roomsList.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Room Refercence</label><input name=meetingRef type=text ng-model=room.meetingRef required><div ng-messages=creatRoomForm.meetingRef.$error><div ng-message=required>{{\\\"admin.roomsList.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{\\\"admin.roomsList.duration\\\" | translate}}</label><input name=duration type=number ng-model=room.duration required><div ng-messages=creatRoomForm.duration.$error><div ng-message=required>{{\\\"admin.roomsList.required\\\" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Logout Url</label><input name=logoutUrl type=text ng-model=room.logoutUrl></md-input-container><md-input-container class=md-block><label>Webcome title</label><input name=welcome type=text ng-model=room.welcome></md-input-container><md-button ng-click=cancel() class=\\\"md-raised vi-btn vi-danger\\\">{{\\\"admin.roomsList.cancel\\\" | translate}}</md-button><md-button ng-click=save() class=\\\"md-raised md-primary\\\">{{\\\"admin.roomsList.save\\\" | translate}}</md-button></form>\");\n$templateCache.put(\"app/modules/admin/views/shared/roomsListView.html\",\"<md-list class=rooms-list><md-list-item ng-repeat=\\\"room in roomsList\\\"><span style=\\\"margin-top: -15px\\\" ng-class=\\\"room.active ? \\'fa fa-circle vi-online\\' : \\'fa fa-circle vi-offline\\'\\\" aria-hidden=true></span><md-button ng-click=showRoomDetail(room)><h3 class=md-title>{{room.name}}</h3><div class=room-status-group><span>RefId: {{room.meetingRef}}</span></div></md-button></md-list-item></md-list>\");\n$templateCache.put(\"app/modules/admin/views/shared/toolbarView.html\",\"<md-toolbar layout=row class=\\\"md-toolbar-tools vi-toolbar\\\"><div flex hide-gt-sm><button class=\\\"vi-center menuBtn\\\" ng-click=\\\"toggleSidenav(\\'left\\')\\\" aria-label=\\\"Toggle Menu\\\"><i class=\\\"fa fa-bars\\\" aria-hidden=true></i></button></div><h2 flex class=\\\"md-display-1 vi-logo\\\">Vietinterview <span hide-sm hide-xs>- Conference Room</span></h2><ul flex class=\\\"list-inline vi-right\\\"><li><a href=#/admin/home>Home</a></li><li><a href=#/admin/rooms>Admin</a></li></ul></md-toolbar>\");}]);"],"sourceRoot":"/source/"}