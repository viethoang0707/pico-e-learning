"use strict";angular.module("app",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngRoute","ngLocale","toastr","pascalprecht.translate","ui.bootstrap","ui.router","underscore","FBAngular","ui.bootstrap.datetimepicker","pageslide-directive","angular-simple-chat","ngAudio","LocalStorageModule","ngFileUpload","ui.select","ngFileSaver","base64","textAngular","ng.deviceDetector","timer","ngMaterial","ngMessages","pascalprecht.translate","ngActivityIndicator","pdf","duScroll","config","api","mainModule","adminModule","conferenceModule","trainingModule"]),angular.module("app").directive("showDevices",function(){return{restrict:"E",templateUrl:"app/shared/directives/showDevices/showDevices.html",link:function(e){function t(e,t){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),!navigator.enumerateDevices)return void t(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.");var n=[],i=[],a=[],o=[],r=[];navigator.enumerateDevices(function(t){t.forEach(function(e){var t={};for(var s in e)t[s]=e[s];var d;n.forEach(function(e){e.id===t.id&&(d=!0)}),d||("audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput"),t.deviceId||(t.deviceId=t.id),t.id||(t.id=t.deviceId),t.label||(t.label="Please invoke getUserMedia once."),("audioinput"===t.kind||"audio"===t.kind)&&o.push(t),("videoinput"===t.kind||"video"===t.kind)&&r.push(t),-1!==t.kind.indexOf("audio")&&i.push(t),-1!==t.kind.indexOf("video")&&a.push(t),n.push(t))}),e&&e({allMdiaDevices:n,allVideoDevices:a,allAudioDevices:i,videoInputDevices:r,audioInputDevices:o})})}function n(e,t,n){navigator.mediaDevices.getUserMedia(e).then(t)["catch"](n)}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)}),n({audio:!0,video:!0},function(n){t(function(t){t.allMdiaDevices.length&&(console.log("Number of audio/video devices available:",t.allMdiaDevices.length),e.allDevices=t.allMdiaDevices.length),t.allVideoDevices.length&&(console.log("Number of video devices available:",t.allVideoDevices.length),e.videoDevices=t.allVideoDevices.length),t.allAudioDevices.length&&(console.log("Number of audio devices available:",t.allAudioDevices.length),e.audioDevices=t.allAudioDevices.length),t.videoInputDevices.length&&(console.log("Number of video-input devices available:",t.videoInputDevices.length),e.videoInputDevices=t.videoInputDevices.length),t.audioInputDevices.length&&(console.log("Number of audio-input devices available:",t.audioInputDevices.length),e.audioInputDevices=t.audioInputDevices.length),t.allMdiaDevices.length&&"Please invoke getUserMedia once."===t.allMdiaDevices[0].label&&console.log("It seems you did not invoke navigator-getUserMedia before using these API.","warning"),e.audioInputDevicesName=t.audioInputDevices,e.deviceVideoInputName=t.videoInputDevices,e.$apply()},function(e){alert(e)})},function(e){console.log(e)})}}}),angular.module("app").directive("showBandwidth",["$http","$q","$location","$timeout",function(e,t,n,i){return{restrict:"E",templateUrl:"app/shared/directives/showBandwidth/showBandwidthView.html",scope:{max:"=max",scale:"=scale"},link:function(n){function a(){var a,s,d=t.defer();return a=(new Date).getTime(),e({method:"GET",url:o}).then(function(e){s=(new Date).getTime();var t=(s-a)/1e3,o=8*r,l=(o/t).toFixed(2),c=(l/1024).toFixed(2),m=(c/1024).toFixed(2);i(function(){0===n.speedDownMbps?(n.speedDownMbpsAvg=Number(m),n.speedDownMbps=Number(m)):(m=(n.speedDownMbpsAvg+Number(m))/2,n.speedDownMbpsAvg=Number(m.toFixed(2)),n.speedDownMbps=Number(m.toFixed(2))),d.resolve()},60)},function(e){d.resolve(null)}),d.promise}var o="https://localhost:3000/assets/images/hybrid.jpg",r=23670,s=[];n.measureDownloadSpeedAverage=function(){n.speedDownMbpsAvg=0,n.speedDownMbps=0;for(var e=0;100>e;e++)s.push(a);s.reduce(function(e,t){return e.then(function(){return t()})},t.resolve())},n.measureDownloadSpeedAverage()}}}]),angular.module("api",["config","blockUI"]),angular.module("api").factory("$screenShare",["http","$log",function(e,t){return{isEnabled:function(e){e(!0)},start:function(e){function n(a){if(a.data){if(a.data.chromeMediaSourceId)if("PermissionDeniedError"===a.data.chromeMediaSourceId)t.error("permission-denied"),e(!1);else{var o=a.data.chromeMediaSourceId,r=i(null,o);navigator.getUserMedia(r,function(t){e(!0,t,o)},function(n){t.error("Share screen in Chome failed",n),e(!1)})}if(a.data.chromeExtensionStatus){var s=a.data.chromeExtensionStatus,r=i(s);navigator.getUserMedia(r,function(t){e(!0,t,null)},function(n){t.error("Share screen in Chome failed",n),e(!1)})}window.removeEventListener("message",n)}}function i(e,t){var n={audio:!1,video:{mandatory:{chromeMediaSource:e?"screen":"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};return t&&(n.video.mandatory.chromeMediaSourceId=t),n}function a(){return r?r.isLoaded?void r.contentWindow.postMessage({captureSourceId:!0},"*"):void setTimeout(a,100):void o(a)}function o(e){return r?void e():(r=document.createElement("iframe"),r.onload=function(){r.isLoaded=!0,e()},r.src="https://www.webrtc-experiment.com/getSourceId/",r.style.display="none",void(document.body||document.documentElement).appendChild(r))}if(navigator.getUserMedia=navigator.mozGetUserMedia||navigator.webkitGetUserMedia,navigator.mozGetUserMedia)return option={video:{mozMediaSource:"window",mediaSource:"window"}},void navigator.getUserMedia(option,function(t){e(!0,t,"firefox")},function(n){t.error("Share screen in firfox failed",n),e(!1)});a(),window.addEventListener("message",n);var r;window.getScreenConstraints=function(e){o(function(){getScreenId(function(t,n,i){e(t,(i||{}).video)})})}}}}]),angular.module("api").factory("$member",["http",function(e){return{addMember:function(t,n){var i="/member",a={token:t.token,meetingId:t.meetingId,member:angular.toJson(t.member)};e.postRequest(i,a,n)},updateMember:function(t,n){var i="/member",a={token:t.token,meetingId:t.meetingId,member:angular.toJson(t.member)};e.putRequest(i,a,n)},removeMember:function(t,n){var i="/member",a={token:t.token,id:t.id};e.deleteRequest(i,a,n)},listMember:function(t,n){var i="/member",a={token:t.token,meetingId:t.meetingId};e.getRequest(i,a,n)},login:function(t,n){var i="/member/login",a={meetingId:t.meetingId,email:t.email,password:t.password};e.postRequest(i,a,n)},trustedLogin:function(t,n){var i="/trusted/login",a={payload:t.payload,checksum:t.checksum};e.postRequest(i,a,n)}}}]),angular.module("api").factory("$meeting",["http",function(e){return{createMeeting:function(t,n){var i="/meeting",a={token:t.token,meeting:angular.toJson(t.meeting)};e.postRequest(i,a,n)},updateMeeting:function(t,n){var i="/meeting",a={token:t.token,meeting:angular.toJson(t.meeting)};e.putRequest(i,a,n)},endMeeting:function(t,n){var i="/meeting/end",a={token:t.token,id:t.meetingId};e.postRequest(i,a,n)},listMeeting:function(t,n){var i="/meeting/",a={token:t.token};e.getRequest(i,a,n)},getMeeting:function(t,n){var i="/meeting/",a={token:t.token,id:t.meetingId};e.getRequest(i,a,n)},setMeetingConfig:function(t,n){var i="/meeting/config",a={token:t.token,config:t.config};e.putRequest(i,a,n)},getMeetingConfig:function(t,n){var i="/meeting/config",a={token:t.token};e.getRequest(i,a,n)},uploadPresentation:function(t,n){var i="/meeting/uploadPresentation",a=t.file;e.uploadRequest(i,a,n)},shareFile:function(t,n){var i="/meeting/shareFile",a=t.file;e.uploadRequest(i,a,n)}}}]),angular.module("api").factory("$measure",["http",function(e){return{downChannel:function(t,n){var i="/measure/downChannel",a={};e.getRequest(i,a,n)},upChannel:function(t,n){var i="/measure/upChannel",a={};e.postRequest(i,a,n)}}}]),angular.module("api").factory("$auth",["http",function(e){return{loginAccount:function(t,n){var i="/auth/local",a={email:t.email,password:t.password};e.postRequest(i,a,n)}}}]),angular.module("api").factory("$trainingSocket",["$log","trainingSocketUrl",function(e,t){try{var n=new WebSocket(t);return n}catch(i){return e.error("Cannot connect to server"),null}}]).factory("$conferenceSocket",["$log","conferenceSocketUrl",function(e,t){try{var n=new WebSocket(t);return n}catch(i){return e.error("Cannot connect to server"),null}}]),angular.module("api").factory("http",["$http","apiUrl","blockUI","$log",function(e,t,n,i){var a=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};return{postRequest:function(o,r,s){var d=t+o,l={method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:a,timeout:3e5,data:r};n.start(),i.info("POST request: "+l.data),e(l).then(function(e){200===e.status&&(n.stop(),s("boolean"!=typeof e.data.result||e.data.result?{status:!0,data:e.data}:{status:!1}))},function(e){n.stop(),i.error(e),s({status:!1})})},getRequest:function(o,r,s){var d=t+o,l={method:"GET",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:a,params:r};n.start(),i.info("GET request: "+l.params),e(l).then(function(e){n.stop(),200===e.status&&s("boolean"!=typeof e.data.result||e.data.result?{status:!0,data:e.data}:{status:!1})},function(e){n.stop(),i.error(e),s({status:!1})})},putRequest:function(o,r,s){var d=t+o,l={method:"PUT",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:a,data:r};i.info("PUT request: "+l.params),n.start(),e(l).then(function(e){n.stop(),200===e.status&&s("boolean"!=typeof e.data.result||e.data.result?{status:!0,data:e.data}:{status:!1})},function(e){n.stop(),i.error(e),s({status:!1})})},deleteRequest:function(o,r,s){var d=t+o,l={method:"DELETE",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:a,data:r};i.info("DELETE request: "+l.data),n.start(),e(l).then(function(e){200===e.status&&(n.stop(),s("boolean"!=typeof e.data.result||e.data.result?{status:!0,data:e.data}:{status:!1}))},function(e){n.stop(),i.error(e),s({status:!1})})},uploadRequest:function(e,a,o){var r=t+e,s=new XMLHttpRequest,d=new FormData;s.open("POST",r,!0),n.start(),i.info("UPLOAD request: "+e),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(n.stop(),o({status:!0,data:angular.fromJson(s.responseText)}))},d.append("file",a),s.send(d)}}}]),angular.module("trainingModule",["api","toastr","config","underscore","LocalStorageModule","pageslide-directive","base64","angular-simple-chat","ngAudio","ngActivityIndicator"]),angular.module("trainingModule").controller("TrainingRoomController",["$scope","$rootScope","$location","$routeParams","_","localStorageService","$log","$interval","$sce","$trainingSocket","$window","$document","deviceDetector","iceServers","$recorder","$mdSidenav","$base64","$timeout","ngAudio","toastr","$route","pdfDelegate","$meeting","$screenShare",function(e,t,n,i,a,o,r,s,d,l,c,m,u,p,g,v,f,h,b,w,S,y,x,k){function R(e,t){this.id=e,this.avail=!1,this.profile=t,this.invited=!1,this.pubWebRtcEndpoint=null,this.pubOfferSdp=null,this.pubState=me,this.pubGatherToken=null,this.pubTimeoutToken=null,this.pubCandidateSendQueue=[],this.subWebRtcEndpoint=null,this.subOfferSdp=null,this.subState=ve,this.subGatherToken=null,this.subCandidateSendQueue=[],this.pubCamera=null,this.subVideoSlot=null}function $(){this.webRtcEndpoint=null,this.offerSdp=null,this.state=me,this.gatherToken=null,this.timeoutToken=null,this.candidateSendQueue=[],this.camera=null,this.avail=!1}function I(){e.audio=!0,e.video=!0,e.handUp=!0,e.notiHandUp=!0,e.toggleVideoFlag=!1,e.sound=b.load("assets/sounds/ring.mp3"),e.fullScreen=!1,e.pdfUrl="assets/images/Intro.pdf",e.zoom=90,e.countAllocated=0,e.meeting=o.get("meeting"),e.myProfile=o.get("member"),e.memberProfiles=o.get("memberList"),e.memberList=[],e.videoSlots=[],e.chatMessage=[],e.fileList=[];var t=0;a.each(e.memberProfiles,function(n){e.memberList.push(new R(n._id,n)),e.videoSlots.push({allocated:!1,videoId:"remoteCamera"+t,index:t,member:null}),t++}),e.me=a.find(e.memberList,function(t){return t.id==e.myProfile._id}),e.me.pubCamera=document.getElementById("localCamera"),e.presenter=a.find(e.memberList,function(e){return"presenter"==e.profile.role}),e.presenter.subVideoSlot=e.videoSlots[0],e.viewerList=a.filter(e.memberList,function(e){return"presenter"!=e.profile.role}),e.screenShare=new $}function C(t){t.memberId=e.me.id,t.meetingId=e.meeting._id;var n=JSON.stringify(t);r.info("Senging message: "+n);try{l.send(n)}catch(i){r.info("Error sending message: "),c.location.reload()}}function M(e){"accepted"==e.response?(L(),z(e.presentation),K(e.fileShare)):n.path("/")}function L(){var t={localVideo:e.me.pubCamera,onicecandidate:D,iceServers:p,oncandidategatheringdone:E};e.me.pubWebRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(t,function(e){return e?void r.error(e):void this.generateOffer(A)}),e.me.pubGatherToken=h(function(){e.me.pubState!=pe&&(e.me.pubState=pe,T())},we)}function D(t){e.me.pubCandidateSendQueue.push(t)}function A(t,n){return t?void r.info(t):void(e.me.pubOfferSdp=n)}function U(t){"accepted"!=t.response?(r.info("Disconnect due to reject from server"),e.disconnect()):(e.me.pubWebRtcEndpoint.processAnswer(t.sdpAnswer),a.each(t.candidateList,function(t){e.me.pubWebRtcEndpoint.addIceCandidate(t)}),C({id:"publishAvail"}),e.me.pubState=ge,e.sound.stop())}function E(){h.cancel(e.me.pubGatherToken),e.me.pubState!=pe&&(e.me.pubState=pe,T())}function T(){if(!e.me.pubOfferSdp||!e.me.pubCandidateSendQueue.length)return r.info("Disconnect due to device error"),void e.disconnect();var t={id:"publish",sdpOffer:e.me.pubOfferSdp,candidateList:e.me.pubCandidateSendQueue};C(t),e.me.pubOfferSdp=null,e.me.pubCandidateSendQueue=[],e.me.pubTimeoutToken=h(function(){e.me.pubState!=ge&&(r.info("Disconnect due to calling timeout"),e.disconnect())},Se)}function F(t){if(t.subVideoSlot){t.subState=ve,t.id!=e.presenter.id&&(t.subVideoSlot.allocated&&e.countAllocated--,t.subVideoSlot.allocated=!1,t.subVideoSlot.member=null,t.subVideoSlot=null),t.subGatherToken&&h.cancel(t.subGatherToken);try{t.subWebRtcEndpoint&&t.subWebRtcEndpoint.peerConnection.close()}catch(n){r.error(n)}}}function q(t){if(e.me.avail){var n=null;if(n=t.subVideoSlot?t.subVideoSlot:a.find(e.videoSlots,function(e){return!e.allocated&&e.index>0})){t.id!==e.presenter.id&&e.countAllocated++,t.subVideoSlot=n,n.member=t,n.allocated=!0,t.subState=fe;var i=document.getElementById(n.videoId),o={remoteVideo:i,onicecandidate:V.bind({member:t}),iceServers:p,oncandidategatheringdone:W.bind({member:t})};t.subGatherToken=h(function(e){e.subState!=he&&(B(e),e.subState=he)},we,!0,t),t.subWebRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(o,function(e){return e?void r.error(e):void this.generateOffer(O.bind({member:t}))})}}}function V(e){this.member.subCandidateSendQueue.push(e)}function O(e,t){return e?void r.error(e):void(this.member.subSdpOffer=t)}function P(t){var n=a.find(e.memberList,function(e){return e.id==t.pubId});"accepted"!=t.response?(n.subState=ve,w.error("Server error, please try again later")):(n.subWebRtcEndpoint.processAnswer(t.sdpAnswer),n.id==e.me.id&&(n.subWebRtcEndpoint.remoteVideo.muted=!0),n.subVideoSlot&&(n.subState=be,a.each(t.candidateList,function(e){n.subWebRtcEndpoint.addIceCandidate(e)}),C({id:"subscribeAvail",pubId:t.pubId})))}function W(){h.cancel(this.member.subGatherToken),this.member.subState!=he&&(B(this.member),this.member.subState=he)}function B(e){if(!e.subSdpOffer||!e.subCandidateSendQueue.length)return void w.error("Device error");var t={id:"subscribe",pubId:e.id,sdpOffer:e.subSdpOffer,candidateList:e.subCandidateSendQueue};C(t),e.subSdpOffer=null,e.subCandidateSendQueue=[]}function N(t){var n="/";if(e.meeting.logoutUrl){var i=decodeURIComponent(e.meeting.logoutUrl);n=f.decode(i)}c.location.href=n}function H(e){_(e.onlineList)}function _(t){var n=[],i=[],o=!1;a.each(e.memberList,function(r){var s=a.find(t,function(e){return r.id==e._id});s?(r.avail=s.avail,r.screenAvail=s.screenAvail,r.invited=s.invited,r.online=!0,r.invited?(r.avail?(r.subVideoSlot||i.push(r),r.subVideoSlot&&r.subState==ve&&i.push(r)):r.subVideoSlot&&n.push(r),r.screenAvail&&e.screenShare.state==ve&&(o=!0)):n.push(r)):(r.invited&&n.push(r),r.invited=!1,r.avail=!1,r.screenAvail=!1,r.online=!1)}),a.each(n,function(e){F(e)}),a.each(i,function(t){(t.id!=e.me.id||"presenter"!=e.me.profile.role)&&q(t)}),"presenter"!=e.me.profile.role&&(o?oe():ae())}function j(t){var n=e.chatMessage.length;t.idx="message_"+n,e.chatMessage.push({user:t.user,text:t.text,idx:t.idx});var i=angular.element(document.querySelector("#message_"+(n-1))),o=angular.element(document.querySelector("#chat-content"));a.isEmpty(i)||o.scrollTo(i,0,500)}function z(e){var t=a.findLastIndex(e,{event:"insertSlide"}),n=[];t&&e&&(n=e.slice(t),a.each(n,function(e){onWhiteboardEvent(e.event,e.object),J()}))}function Q(e,t){G(e,t),J()}function G(e,t){"insertSlide"==e&&y.$getByHandle("my-pdf-container").load(t),"switchPage"==e&&y.$getByHandle("my-pdf-container").goToPage(t.currPage),"zoomOutSlide"==e&&y.$getByHandle("my-pdf-container").zoomTo(t.zoomAmount),"zoomInSlide"==e&&y.$getByHandle("my-pdf-container").zoomTo(t.zoomAmount)}function J(){e.currPage=y.$getByHandle("my-pdf-container").getCurrentPage(),e.totalPages=y.$getByHandle("my-pdf-container").getPageCount()}function K(e){a.each(e,function(e){Y(e.event,e.object)})}function Y(t,n){"addFile"==t&&e.fileList.push(n),"removeFile"==t&&(e.fileList=a.reject(e.fileList,function(e){return e.url==n.url}))}function X(t){e.screenShare.candidateSendQueue.push(t)}function Z(t,n){return t?void r.info(t):void(e.screenShare.offerSdp=n)}function ee(t){"accepted"!=t.response?(r.info("Disconnect due to reject from server"),e.disconnect()):(e.screenShare.webRtcEndpoint.processAnswer(t.sdpAnswer),a.each(t.candidateList,function(t){e.screenShare.webRtcEndpoint.addIceCandidate(t)}),C({id:"publishScreenAvail"}),e.screenShare.state=ge)}function te(){console.log("Unshare screen"),e.screenShare.gatherToken&&h.cancel(e.screenShare.gatherToken),e.screenShare.timeoutToken&&h.cancel(e.screenShare.timeoutToken),C({id:"publishScreenUnavail"}),e.screenShare.state=me}function ne(){h.cancel(e.screenShare.gatherToken),e.screenShare.state!=pe&&(e.screenShare.state=pe,ie())}function ie(){if(!e.screenShare.offerSdp||!e.screenShare.candidateSendQueue.length)return r.info("Disconnect due to device error"),void e.disconnect();var t={id:"publishScreen",sdpOffer:e.screenShare.offerSdp,candidateList:e.screenShare.candidateSendQueue};C(t),e.screenShare.offerSdp=null,e.screenShare.candidateSendQueue=[],e.screenShare.timeoutToken=h(function(){e.screenShare.state!=ge&&(r.info("Disconnect due to calling timeout"),e.disconnect())},Se)}function ae(){e.screenShare.state=ve,e.screenShare.gatherToken&&h.cancel(e.screenShare.gatherToken);try{e.screenShare.webRtcEndpoint&&e.screenShare.wWebRtcEndpoint.peerConnection.close()}catch(t){r.error(t)}}function oe(){if(e.me.avail){e.screenShare.state=fe,e.screenShare.camera=document.getElementById("screenCamera");var t={remoteVideo:e.screenShare.camera,onicecandidate:re,iceServers:p,oncandidategatheringdone:le};e.screenShare.gatherToken=h(function(){e.screenShare.state!=he&&(ce(),e.screenShare.state=he)},we),e.screenShare.webRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(t,function(e){return e?void r.error(e):void this.generateOffer(se)})}}function re(t){e.screenShare.candidateSendQueue.push(t)}function se(t,n){return t?void r.error(t):void(e.screenShare.sdpOffer=n)}function de(t){"accepted"!=t.response?(e.screenShare.state=ve,w.error("Server error, please try again later")):(e.screenShare.webRtcEndpoint.processAnswer(t.sdpAnswer),e.screenShare.state=be,a.each(t.candidateList,function(t){e.screenShare.webRtcEndpoint.addIceCandidate(t)}),C({id:"subscribeScreenAvail",pubId:e.presenter.id}))}function le(){h.cancel(e.screenShare.gatherToken),e.screenShare.state!=he&&(ce(),e.screenShare.state=he)}function ce(){if(!e.screenShare.sdpOffer||!e.screenShare.candidateSendQueue.length)return void w.error("Device error");var t={id:"subscribeScreen",sdpOffer:e.screenShare.sdpOffer,candidateList:e.screenShare.candidateSendQueue,pubId:e.presenter.id};C(t),e.screenShare.sdpOffer=null,e.screenShare.candidateSendQueue=[]}var me=0,ue=1,pe=2,ge=3,ve=10,fe=11,he=12,be=13,we=3e4,Se=3e4;e.connect=function(){1==l.readyState?(C({id:"join"}),e.sound.loop=!0,e.sound.play(),e.me.pubState=ue):c.location.reload()},e.disconnect=function(){e.me.pubState=me,e.sound.stop();try{e.me.pubWebRtcEndpoint&&e.me.pubWebRtcEndpoint.peerConnection.close(),a.each(e.memberList,function(e){e.subState!=ve&&F(e)}),e.screenShare.webRtcEndpoint&&e.screenShare.webRtcEndpoint.peerConnection.close(),C({id:"leave"})}catch(t){r.error(t)}},l.onmessage=function(t){var n=JSON.parse(t.data);switch(console.info("Received message: "+t.data),n.id){case"joinResponse":M(n);break;case"end":N();break;case"memberStatus":H(n);break;case"handUp":ye(n);break;case"handDown":xe(n);break;case"publishResponse":U(n);break;case"publishScreenResponse":ee(n);break;case"subscribeResponse":P(n);break;case"subscribeScreenResponse":de(n);break;case"chat":j(n);break;case"presentation":Q(n.event,n.object);break;case"fileShare":processFileShareEvent(n.event,n.object);break;default:console.error("Unrecognized message",n)}e.$apply()},e.resubscribe=function(t){var n=a.find(e.memberList,function(e){return e.id==t});n.invited&&n.avail&&(F(n),q(n))},e.leave=function(){var t="/";if(e.meeting.logoutUrl){var n=decodeURIComponent(e.meeting.logoutUrl);t=f.decode(n)}C({id:"leave"}),c.location.href=t},e.endLesson=function(){C({id:"end"})},e.toggleAudio=function(){var t=e.me.pubWebRtcEndpoint.getLocalStream();if(t){var n=t.getAudioTracks()[0];e.audio=!e.audio,n.enabled=e.audio}},e.toggleVideo=function(){var t=e.me.pubWebRtcEndpoint.getLocalStream();if(t){var n=t.getVideoTracks()[0];e.video=!e.video,n.enabled=e.video}},e.toggleHand=function(){e.handUp=!e.handUp,e.notiHandUp=!1,C(e.handUp?{id:"handDown"}:{id:"handUp"})},e.toggleSidenav=function(e){v(e).toggle()},e.toggleMainVideo=function(){e.toggleVideoFlag=!e.toggleVideoFlag},e.changeSizeSlide=function(){e.fullScreen=!e.fullScreen},e.memberInvite=function(t){if(!(e.countAllocated>3)){e.notiHandUp=!0;var n=a.find(e.memberList,function(e){return e.id==t});n.handUp=!1,!n.invited&&n.online&&C({id:"invite",inviteeId:n.id})}},e.memberDiscard=function(t){var n=t.member;n&&(e.countAllocated--,n.handUp=!1,C({id:"discard",inviteeId:n.id}))};var ye=function(t){var n=a.find(e.memberList,function(e){return e.id==t.memberId});n.handUp=!0},xe=function(t){var n=a.find(e.memberList,function(e){return e.id==t.memberId});n.handUp=!1};e.chat=function(){var t={id:"chat",text:e.chatInput};C(t),e.chatInput=""},e.sendChatMessage=function(t){"Enter"===event.code&&e.chat()},e.byIndex=function(e){return e.index>0},t.$on("$routeChangeStart",function(e,t,n){n||l.close()}),c.onbeforeunload=function(){l.close(),s.cancel(recordToken)},I(),e.pdfSwitchPage=function(e){var t={currPage:0,totalPages:y.$getByHandle("my-pdf-container").getPageCount()};1==e?y.$getByHandle("my-pdf-container").next():y.$getByHandle("my-pdf-container").prev(),J(),t.currPage=y.$getByHandle("my-pdf-container").getCurrentPage(),C({id:"presentation",event:"switchPage",object:t})},e.zoomOut=function(){y.$getByHandle("my-pdf-container").zoomOut(),e.zoom=50===e.zoom?50:e.zoom-10},e.zoomIn=function(){y.$getByHandle("my-pdf-container").zoomIn(),e.zoom+=10},e.uploadPresentation=function(t){t&&x.uploadPresentation({file:t},function(t){t.status&&t.data.status&&(console.log("url",t.data.url),e.pdfUrl=t.data.url,e.$apply(),y.$getByHandle("my-pdf-container").load(t.data.url),C({id:"presentation",event:"insertSlide",object:t.data.url}))})},e.shareFile=function(t){t&&(console.log(t),x.shareFile({file:t},function(n){n.status&&n.data.status&&(console.log("url",n.data.url),e.fileList.push({name:t.name,url:n.data.url}),e.$apply(),C({id:"fileShare",event:"addFile",object:{name:t.name,url:n.data.url}}))}))},e.removeFile=function(t){t&&(e.fileList=a.reject(e.fileList,function(e){return e.url==t.url}),C({id:"fileShare",event:"removeFile",object:t}))},e.shareScreen=function(){e.screenShare.state!=me&&te(),e.screenShare.camera=document.getElementById("screenCamera"),k.start(function(t,n,i){e.screenShare.camera.src=URL.createObjectURL(n);var a={localVideo:e.screenShare.camera,iceServers:p,videoStream:n,onicecandidate:X,oncandidategatheringdone:ne};n.getVideoTracks()[0].onended=function(){te()},e.screenShare.webRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(a,function(e){return e?void r.error(e):void this.generateOffer(Z)}),e.screenShare.gatherToken=h(function(){e.screenShare.state!=pe&&(e.screenShare.state=pe,ie())},we)})}}]),angular.module("mainModule",["api","toastr","config","underscore","LocalStorageModule","pascalprecht.translate","base64"]),angular.module("mainModule").controller("TrustedLoginController",["$rootScope","$scope","$member","$location","$log","$routeParams","viMdToast","Fullscreen","localStorageService","$base64",function(e,t,n,i,a,o,r,s,d,l){t.trustedLoginKind="training",t.loginMeeting=function(){s.all();var e={payload:l.decode(o.payload),checksum:o.checksum};n.trustedLogin(e,function(e){e.status&&e.data.status?(d.set("meeting",e.data.meeting),d.set("member",e.data.member),d.set("memberList",e.data.memberList),"conference"===o.kind?i.path("/room"):i.path("/training")):(a.error(e),r.error("Đã có lỗi xảy ra!"))})},t.loginMeetingKeyPress=function(e){"Enter"===e.code&&t.loginMeeting()}}]),angular.module("mainModule").controller("HomeController",["$rootScope","$scope","$member","$location","$log","viMdToast","Fullscreen","localStorageService",function(e,t,n,i,a,o,r,s){t.meetingAuth={kind:"conference"},t.loginMeeting=function(){r.all();var e={meetingId:t.meetingAuth.meetingId,email:t.meetingAuth.email,password:t.meetingAuth.password};n.login(e,function(e){e.status&&e.data.status?(s.set("meeting",e.data.meeting),s.set("member",e.data.member),s.set("memberList",e.data.memberList),"training"===t.meetingAuth.kind?i.path("/training"):i.path("/room")):(a.error(e),o.error("Input incorrect!"))})},t.loginMeetingKeyPress=function(e){"Enter"===e.code&&t.loginMeeting()}}]),angular.module("conferenceModule",["api","toastr","config","underscore","LocalStorageModule","pageslide-directive","base64","angular-simple-chat","ngAudio","ngActivityIndicator"]),angular.module("conferenceModule").controller("RoomController",["$scope","$rootScope","$location","$routeParams","_","localStorageService","$log","$interval","$sce","$conferenceSocket","$window","$mdDialog","deviceDetector","iceServers","$recorder","$mdSidenav","$base64","$timeout","ngAudio","$activityIndicator","toastr","$route",function(e,t,n,i,a,o,r,s,d,l,c,m,u,p,g,v,f,h,b,w,S,y){function x(e,t){this.id=e,this.avail=!1,this.profile=t,this.invited=!1,this.pubWebRtcEndpoint=null,this.pubOfferSdp=null,this.pubState=Q,this.pubGatherToken=null,this.pubTimeoutToken=null,this.pubCandidateSendQueue=[],this.subWebRtcEndpoint=null,this.subOfferSdp=null,this.subState=Y,this.subGatherToken=null,this.subCandidateSendQueue=[],this.pubCamera=null,this.subVideoSlot=null,this.markedForSubscription=!1}function k(){e.audio=!0,e.video=!0,e.handUp=!0,e.notiHandUp=!0,e.sound=b.load("assets/sounds/ring.mp3"),e.meeting=o.get("meeting"),e.myProfile=o.get("member"),e.memberProfiles=o.get("memberList"),e.memberList=[],e.videoSlots=[],e.chatMessage=[];var t=0;a.each(e.memberProfiles,function(n){e.memberList.push(new x(n._id,n)),e.videoSlots.push({allocated:!1,videoId:"remoteCamera"+t,index:t,member:null,width:0}),t++}),e.me=a.find(e.memberList,function(t){return t.id==e.myProfile._id}),e.me.pubCamera=document.getElementById("localCamera"),e.presenter=a.find(e.memberList,function(e){return"presenter"==e.profile.role}),e.presenter.subVideoSlot=e.videoSlots[0],e.viewerList=a.filter(e.memberList,function(e){return"presenter"!=e.profile.role})}function R(t){t.memberId=e.me.id,t.meetingId=e.meeting._id;var n=JSON.stringify(t);r.info("Senging message: "+n);try{l.send(n)}catch(i){r.info("Error sending message: "),c.location.reload()}}function $(e){"accepted"==e.response?I():n.path("/")}function I(){var t={localVideo:localCamera,onicecandidate:C,iceServers:p,oncandidategatheringdone:D};e.me.pubWebRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(t,function(e){return e?(w.stopAnimating(),void r.error(e)):void this.generateOffer(M)}),w.startAnimating(),e.me.pubGatherToken=h(function(){r.info("Time out gather publishing data"),e.me.pubState!=J&&(e.me.pubState=J,A())},te)}function C(t){e.me.pubCandidateSendQueue.push(t)}function M(t,n){return t?(w.stopAnimating(),void r.info(t)):void(e.me.pubOfferSdp=n)}function L(t){w.stopAnimating(),"accepted"!=t.response?(r.info("Disconnect due to reject from server"),e.disconnect()):(e.me.pubWebRtcEndpoint.processAnswer(t.sdpAnswer),a.each(t.candidateList,function(t){e.me.pubWebRtcEndpoint.addIceCandidate(t)}),R({id:"publishAvail"}),e.me.pubState=K,e.sound.stop())}function D(){h.cancel(e.me.pubGatherToken),e.me.pubState!=J&&(e.me.pubState=J,A())}function A(){if(!e.me.pubOfferSdp||!e.me.pubCandidateSendQueue.length)return r.info("Disconnect due to device error"),void e.disconnect();var t={id:"publish",sdpOffer:e.me.pubOfferSdp,candidateList:e.me.pubCandidateSendQueue};R(t),e.me.pubOfferSdp=null,e.me.pubCandidateSendQueue=[],e.me.pubTimeoutToken=h(function(){e.me.pubState!=K&&(r.info("Disconnect due to calling timeout"),e.disconnect())},ne)}function U(t){if(t.markedForSubscription=!1,t.subVideoSlot){t.subState=Y,t.id!=e.presenter.id&&(t.subVideoSlot.allocated=!1,t.subVideoSlot.member=null,t.subVideoSlot=null),t.subGatherToken&&h.cancel(t.subGatherToken);try{t.subWebRtcEndpoint&&t.subWebRtcEndpoint.peerConnection.close()}catch(n){r.error(n)}}}function E(t){if(e.me.avail){var n=null;if(n=t.subVideoSlot?t.subVideoSlot:a.find(e.videoSlots,function(e){return!e.allocated&&e.index>0})){t.subVideoSlot=n,n.member=t,n.allocated=!0,t.subState=X,e.numOfAllocated=F(e.videoSlots).length,T(3,e.numOfAllocated,e.videoSlots);var i=document.getElementById(n.videoId),o={remoteVideo:i,onicecandidate:q.bind({member:t}),iceServers:p,oncandidategatheringdone:P.bind({member:t})};t.subGatherToken=h(function(e){r.info("Time out gather subscribing data"),e.subState!=Z&&(W(e),e.subState=Z)},te,!0,t),t.subWebRtcEndpoint=kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(o,function(e){return e?void r.error(e):void this.generateOffer(V.bind({member:t}))})}}}function T(t,n,i){var a=Math.floor(n/t);0===a?1===n?e.firstSlot=100:2===n&&(e.firstSlot=Math.floor(50),i.map(function(e){e.allocated&&(e.width=Math.floor(50))})):i.map(function(n){n.allocated&&(n.width=Math.floor(100/t),e.firstSlot=n.width)})}function F(e){var t=a.filter(e,function(e){return e.allocated});return t}function q(e){this.member.subCandidateSendQueue.push(e)}function V(e,t){return e?void r.error(e):void(this.member.subSdpOffer=t)}function O(t){var n=a.find(e.memberList,function(e){return e.id==t.pubId});"accepted"!=t.response?(n.subState=Y,S.error("Server error, please try again later")):(n.subWebRtcEndpoint.processAnswer(t.sdpAnswer),n.id==e.me.id&&(n.subWebRtcEndpoint.remoteVideo.muted=!0),n.subVideoSlot&&(n.subState=ee,a.each(t.candidateList,function(e){n.subWebRtcEndpoint.addIceCandidate(e)}),R({id:"subscribeAvail",pubId:t.pubId})),H())}function P(){h.cancel(this.member.subGatherToken),this.member.subState!=Z&&(W(this.member),this.member.subState=Z)}function W(e){if(!e.subSdpOffer||!e.subCandidateSendQueue.length)return void S.error("Device error");var t={id:"subscribe",
pubId:e.id,sdpOffer:e.subSdpOffer,candidateList:e.subCandidateSendQueue};R(t),e.subSdpOffer=null,e.subCandidateSendQueue=[]}function B(t){var n="/";if(e.meeting.logoutUrl){var i=decodeURIComponent(e.meeting.logoutUrl);n=f.decode(i)}c.location.href=n}function N(e){_(e.onlineList)}function H(){var t=a.find(e.memberList,function(e){return e.markedForSubscription});t&&(t.markedForSubscription=!1,E(t))}function _(t){var n=[];a.each(e.memberList,function(e){var i=a.find(t,function(t){return e.id==t._id});i?(e.avail=i.avail,e.invited=i.invited,e.online=!0,e.invited?e.avail?(e.subVideoSlot||(e.markedForSubscription=!0),e.subVideoSlot&&e.subState==Y&&(e.markedForSubscription=!0)):e.subVideoSlot&&n.push(e):n.push(e)):(e.invited&&n.push(e),e.invited=!1,e.avail=!1,e.online=!1)}),a.each(n,function(e){U(e)}),H()}function j(t){var n=e.chatMessage.length;t.idx="message_"+n,e.chatMessage.push({user:t.user,text:t.text,idx:t.idx});var i=angular.element(document.querySelector("#message_"+(n-1))),o=angular.element(document.querySelector("#chat-content"));a.isEmpty(i)||o.scrollTo(i,0,500)}function z(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}z.$inject=["$scope","$mdDialog"];var Q=0,G=1,J=2,K=3,Y=0,X=1,Z=2,ee=3,te=3e4,ne=3e4;e.connect=function(){1==l.readyState?(R({id:"join"}),e.sound.loop=!0,e.sound.play(),e.me.pubState=G):c.location.reload()},e.disconnect=function(){e.me.pubState=Q,e.sound.stop();try{e.me.pubWebRtcEndpoint&&e.me.pubWebRtcEndpoint.peerConnection.close(),a.each(e.memberList,function(e){e.subState!=Y&&U(e)}),R({id:"leave"})}catch(t){r.error(t)}},l.onmessage=function(t){var n=JSON.parse(t.data);switch(console.info("Received message: "+t.data),n.id){case"joinResponse":$(n);break;case"end":B();break;case"memberStatus":N(n);break;case"handUp":ie(n);break;case"handDown":ae(n);break;case"publishResponse":L(n);break;case"subscribeResponse":O(n);break;case"chat":j(n);break;default:console.error("Unrecognized message",n)}e.$apply()},e.resubscribe=function(t){e.disableState=!0;var n=a.find(e.memberList,function(e){return e.id==t});n.invited&&n.avail&&(U(n),E(n)),h(function(){e.disableState=!1},3e4)},e.leave=function(){var t="/";if(e.meeting.logoutUrl){var n=decodeURIComponent(e.meeting.logoutUrl);t=f.decode(n)}R({id:"leave"}),c.location.href=t},e.endLesson=function(){R({id:"end"})},e.toggleAudio=function(){var t=e.me.pubWebRtcEndpoint.getLocalStream();if(t){var n=t.getAudioTracks()[0];e.audio=!e.audio,n.enabled=e.audio}},e.toggleVideo=function(){var t=e.me.pubWebRtcEndpoint.getLocalStream();if(t){var n=t.getVideoTracks()[0];e.video=!e.video,n.enabled=e.video}},e.toggleHand=function(){e.handUp=!e.handUp,R(e.handUp?{id:"handUp"}:{id:"handDown"})},e.toggleSidenav=function(e){v(e).toggle()},e.memberInvite=function(t){var n=a.find(e.memberList,function(e){return e.id==t});n.handUp=!1,!n.invited&&n.online&&R({id:"invite",inviteeId:n.id})},e.memberDiscard=function(e){var t=e.member;t&&(t.handUp=!1,R({id:"discard",inviteeId:t.id}))};var ie=function(t){var n=a.find(e.memberList,function(e){return e.id==t.memberId});n.handUp=!0},ae=function(t){var n=a.find(e.memberList,function(e){return e.id==t.memberId});n.handUp=!1};e.chat=function(){var t={id:"chat",text:e.chatInput};R(t),e.chatInput=""},e.sendChatMessage=function(t){"Enter"===event.code&&e.chat()},e.byIndex=function(e){return e.index>0},t.$on("$routeChangeStart",function(e,t,n){n||l.close()}),c.onbeforeunload=function(){l.close(),s.cancel(recordToken)},e.showSettingDialog=function(t){m.show({templateUrl:"app/modules/conference/views/settingDialog.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:e.customFullscreen,controller:z}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},k()}]),angular.module("mainModule").controller("AdminRoomsListCtrl",["$meeting","$member","$rootScope","$scope","$q","$location","$log","$mdSidenav","$base64","sharedProperties","localStorageService",function(e,t,n,i,a,o,r,s,d,l,c){function m(e){var n=a.defer(),o=null,s={token:i.token,meetingId:e._id};return t.listMember(s,function(e){e.status?o=e.data.memberList:r.error("Error get list member:",e),n.resolve(o)}),n.promise}function u(){var t=a.defer(),n=null,o={token:i.token};return e.listMeeting(o,function(e){e.status?n=e.data.meetingList:r.error("Error get rooms list:",e),t.resolve(n)}),t.promise}i.token=c.get("tokenConference"),i.room=null,i.toggleSidenav=function(e){s(e).toggle()},i.showRoomDetail=function(e){i.room=e,m(e).then(function(e){i.room.membersList=e?e:[]})},i.gotoEditRoom=function(){c.set("roomAdmin",i.room),o.path("/admin/rooms/edit")},u().then(function(e){i.roomsList=e?e.reverse():[]})}]),angular.module("mainModule").controller("AdminEditRoomCtrl",["$meeting","$member","$rootScope","$scope","$q","$location","$log","$mdToast","$mdSidenav","$base64","viMdToast","sharedProperties","localStorageService","_",function(e,t,n,i,a,o,r,s,d,l,c,m,u,p){function g(){var t=a.defer(),n=null,o={token:i.token};return e.listMeeting(o,function(e){e.status?n=e.data.meetingList:r.error("Error get rooms list"),t.resolve(n)}),t.promise}function v(){var e=a.defer(),n=null,o={token:i.token,meetingId:i.room._id};return t.listMember(o,function(t){t.status?n=t.data.memberList:r.error("Error get list member"),e.resolve(n)}),e.promise}function f(){i.roomsList=i.roomsList.map(function(e){return e=e._id===i.room._id?i.room:e})}function h(){var t={token:i.token,meeting:{id:i.room._id,name:i.room.name,meetingRef:i.room.meetingRef,welcome:i.room.welcome,duration:i.room.duration,logoutUrl:i.room.logoutUrl}};if(t.meeting.logoutUrl){var n=l.encode(t.meeting.logoutUrl);t.meeting.logoutUrl=encodeURIComponent(n)}e.updateMeeting(t,function(e){e.status?(c.success("Update room success!"),f(),u.set("roomAdmin",i.roomsList[0])):c.error("Update room error!")})}function b(e,t){var n;"create"===e&&t?(i.member._id=t,i.membersList.unshift(i.member)):"remove"===e&&t?(n=p.findIndex(i.membersList,{_id:t}),-1!==n&&i.membersList.splice(n,1)):(n=p.findIndex(i.membersList,{_id:t}),-1!==n&&(i.membersList[t]=i.member))}function w(){var e=a.defer(),n={token:i.token,meetingId:i.room._id,member:i.member};return t.addMember(n,function(t){var n=null;t.status&&t.data.status?(c.success("Add member success!"),n=t.data):c.error("Add member error!"),e.resolve(n)}),e.promise}function S(){i.member.role=i.member.role.toLowerCase();var e=a.defer(),n=null,o={token:i.token,meetingId:i.room._id,member:i.member};return t.updateMember(o,function(t){t.status&&t.data.status?(c.success("Update member success!"),n=t.data):c.error("Update member error!"),e.resolve(n)}),e.promise}function y(){var e=a.defer(),n={token:i.token,id:i.member._id};return t.removeMember(n,function(t){t.status?c.success("Delete member success!"):c.error("Delete member error!"),e.resolve(i.member._id)}),e.promise}if(i.token=u.get("tokenConference"),i.room=u.get("roomAdmin"),i.room.logoutUrl){var x=decodeURIComponent(i.room.logoutUrl);i.room.logoutUrl=l.decode(x)}i.member=null,i.showMemberForm=!1,g().then(function(e){i.roomsList=e?e.reverse():[]}).then(function(){return v()}).then(function(e){i.membersList=e?e.reverse():[]}),i.cancel=function(){o.path("/admin/rooms")},i.save=function(){h()},i.showRoomDetail=function(e){i.showMemberForm=!1,i.room=e,v().then(function(e){i.membersList=e?e.reverse():[]})},i.saveMember=function(){i.member&&i.member._id?S().then(function(e){e&&b("update",null)}):w().then(function(e){e&&b("create",e.id)})},i.removeMember=function(){y().then(function(e){i.member=null,b("remove",e)})},i.showEditMemberForm=function(){i.showMemberForm=!0},i.showAddMemberForm=function(){i.showMemberForm=!0,i.member={}},i.cancelMember=function(){i.showMemberForm=!1},i.showMemberDetail=function(e){i.showMemberForm=!1,i.member=e},i.toggleSidenav=function(e){d(e).toggle()}}]),angular.module("mainModule").controller("AdminCreateRoomCtrl",["$meeting","$rootScope","$scope","$q","$location","$log","$mdSidenav","$base64","viMdToast","Fullscreen","localStorageService",function(e,t,n,i,a,o,r,s,d,l,c){function m(){var t={token:n.token,meeting:n.room};if(n.room.logoutUrl){var i=s.encode(n.room.logoutUrl);t.meeting.logoutUrl=encodeURIComponent(i)}e.createMeeting(t,function(e){e.status&&e.data.status?(d.success("Create room success!"),n.room._id=e.data.id,c.set("roomAdmin",n.room),a.path("/admin/rooms/edit")):d.error("Create room error!")})}function u(){var t=i.defer(),a=null,r={token:n.token};return e.listMeeting(r,function(e){e.status?a=e.data.meetingList:o.error("Error get rooms list:",e),t.resolve(a)}),t.promise}n.token=c.get("tokenConference"),n.room={},n.token||a.path("/admin"),n.save=function(){m()},n.cancel=function(){a.path("/admin/rooms")},u().then(function(e){n.roomsList=e?e.reverse():[]}),n.toggleSidenav=function(e){r(e).toggle()}}]),angular.module("mainModule").controller("AdminAuthCtrl",["$auth","$rootScope","$scope","$q","$location","$mdToast","viMdToast","Fullscreen","localStorageService",function(e,t,n,i,a,o,r,s,d){n.auth={emailLogin:"",passwordLogin:""},n.loginAccount=function(){var t={};t.email=n.auth.emailLogin,t.password=n.auth.passwordLogin,e.loginAccount(t,function(e){e.status?(d.set("tokenConference",e.data.token),a.path("/admin/rooms")):r.error("Email or password incorrect!")})},n.loginAccountKeyPress=function(e){"Enter"===e.code&&n.loginAccount()}}]),angular.module("app").factory("$utilities",function(){var e={resizeImg:function(e,t,n,i){var a=e.width,o=e.height,r=1,s=1,d=1;s=t/a,d=n/o,r=d>s?s:d;var l=document.createElement("canvas"),c=l.getContext("2d"),m=document.createElement("canvas"),u=m.getContext("2d"),p=document.createElement("canvas"),g=p.getContext("2d");m.width=a,m.height=o,u.drawImage(e,0,0),p.width=a,p.height=o,g.drawImage(m,0,0,m.width,m.height,0,0,p.width,p.height);for(var v=1,f=r*v,h=1;v>=h;h++)m.width=a*f/h,m.height=o*f/h,u.drawImage(p,0,0,p.width,p.height,0,0,m.width,m.height),p.width=a*f/h,p.height=o*f/h,g.drawImage(m,0,0,m.width,m.height,0,0,p.width,p.height);l.width=a*f/v,l.height=o*f/v,c.drawImage(p,0,0,p.width,p.height,0,0,l.width,l.height),90==i||270==i?(l.width=p.height,l.height=p.width):(l.width=p.width,l.height=p.height),c.clearRect(0,0,l.width,l.height),90==i||270==i?c.translate(p.height/2,p.width/2):c.translate(p.width/2,p.height/2),c.rotate(i*Math.PI/180),c.drawImage(p,-p.width/2,-p.height/2);var b=l.toDataURL();return b},b64toBlob:function(e,t,n){t=t||"",n=n||512;for(var i=atob(e),a=[],o=0;o<i.length;o+=n){for(var r=i.slice(o,o+n),s=new Array(r.length),d=0;d<r.length;d++)s[d]=r.charCodeAt(d);var l=new Uint8Array(s);a.push(l)}var c=new Blob(a,{type:t});return c}};return e}),angular.module("app").factory("$utilities",function(){var e={resizeImg:function(e,t,n,i){var a=e.width,o=e.height,r=1,s=1,d=1;s=t/a,d=n/o,r=d>s?s:d;var l=document.createElement("canvas"),c=l.getContext("2d"),m=document.createElement("canvas"),u=m.getContext("2d"),p=document.createElement("canvas"),g=p.getContext("2d");m.width=a,m.height=o,u.drawImage(e,0,0),p.width=a,p.height=o,g.drawImage(m,0,0,m.width,m.height,0,0,p.width,p.height);for(var v=1,f=r*v,h=1;v>=h;h++)m.width=a*f/h,m.height=o*f/h,u.drawImage(p,0,0,p.width,p.height,0,0,m.width,m.height),p.width=a*f/h,p.height=o*f/h,g.drawImage(m,0,0,m.width,m.height,0,0,p.width,p.height);l.width=a*f/v,l.height=o*f/v,c.drawImage(p,0,0,p.width,p.height,0,0,l.width,l.height),90==i||270==i?(l.width=p.height,l.height=p.width):(l.width=p.width,l.height=p.height),c.clearRect(0,0,l.width,l.height),90==i||270==i?c.translate(p.height/2,p.width/2):c.translate(p.width/2,p.height/2),c.rotate(i*Math.PI/180),c.drawImage(p,-p.width/2,-p.height/2);var b=l.toDataURL();return b},b64toBlob:function(e,t,n){t=t||"",n=n||512;for(var i=atob(e),a=[],o=0;o<i.length;o+=n){for(var r=i.slice(o,o+n),s=new Array(r.length),d=0;d<r.length;d++)s[d]=r.charCodeAt(d);var l=new Uint8Array(s);a.push(l)}var c=new Blob(a,{type:t});return c}};return e}),angular.module("api").factory("$recorder",["$log",function(e){function t(t){if(t.data&&t.data.size>0&&a.push(t.data),"firefox"==deviceDetector.browser&&!$scope.recording){var n=new Blob(a,{type:"video/webm"}),i=new File([n],"upload.webm");e.info("Broadcast firefox"),o(i)}}function n(t){e.info("Recorder stopped: ",t)}var i,a,o;return{start:function(o){a=[];var r={mimeType:"video/webm;codecs=vp8"};MediaRecorder.isTypeSupported(r.mimeType)||(e.info(r.mimeType+" is not Supported"),r={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(r.mimeType)||(e.info(r.mimeType+" is not Supported"),r={mimeType:"video/webm"},MediaRecorder.isTypeSupported(r.mimeType)||(e.info(r.mimeType+" is not Supported"),r={mimeType:""})));try{i=new MediaRecorder(o,r)}catch(s){return console.error("Exception while creating MediaRecorder: "+s),void alert("Exception while creating MediaRecorder: "+s+". mimeType: "+r.mimeType)}e.info("Created MediaRecorder",i,"with options",r),i.onstop=n,i.ondataavailable=t,i.start()},stop:function(t){if(o=t,i.stop(),e.info("Stop recording",a),"chrome"==deviceDetector.browser){var n=new Blob(a,{type:"video/webm"}),r=new File([n],"upload.webm");e.info("Broadcast chrome"),o(r)}}}}]),angular.module("app").directive("keyEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.keyEnter)}),t.preventDefault())})}}),angular.module("app").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,n,i){var a=e(i.fileModel),o=a.assign;n.bind("change",function(){t.$apply(function(){o(t,n[0].files[0])})})}}}]),angular.module("app").directive("angucompleteAlt",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(e,t,n,i,a,o,r){function s(t,o,r,s){function x(e){ue=null,t.hideResults(e),document.body.removeEventListener("click",x)}function k(e){t.notEmpty=e,de=t.searchStr,t.fieldRequired&&s&&t.inputName&&s[t.inputName].$setValidity(se,e)}function R(e){"function"==typeof t.selectedObject?t.selectedObject(e):t.selectedObject=e,k(e?!0:!1)}function $(e,t){var n,i;if(t){n=t.split("."),i=e;for(var a=0;a<n.length;a++)i=i[n[a]]}else i=e;return i}function I(e){return t.titleField.split(",").map(function(t){return $(e,t)}).join(" ")}function C(e,n){e&&("object"==typeof e?(t.searchStr=I(e),R({originalObject:e})):"string"==typeof e&&e.length>0?t.searchStr=e:console&&console.error&&console.error("Tried to set "+(n?"initial":"")+" value of angucomplete to",e,"which is an invalid value"),k(!0))}function M(){t.showDropdown=!1,t.results=[],ce&&(ce.scrollTop=0)}function L(e){return e.which?e.which:e.keyCode}function D(e){return function(n){return t[e]?t[e](n):n}}function A(e){R({originalObject:e}),t.clearSelected&&(t.searchStr=null),M()}function U(e,n){var a,o,r;return r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e?(e.match&&e.replace||(e=e.toString()),o=e.match(r),a=o?e.replace(r,'<span class="'+t.matchClass+'">'+o[0]+"</span>"):e,i.trustAsHtml(a)):void 0}function E(){t.showDropdown=ne,t.currentIndex=t.focusFirst?0:-1,t.results=[]}function T(e){!e||e.length<oe||(t.localData?t.$apply(function(){K(e)}):t.remoteApiHandler?J(e):G(e))}function F(e){var n=L(e);if(n!==m&&n!==l)if(n===c||n===p)e.preventDefault();else if(n===d)e.preventDefault(),!t.showDropdown&&t.searchStr&&t.searchStr.length>=oe&&(E(),t.searching=!0,T(t.searchStr));else if(n===u)M(),t.$apply(function(){ae.val(t.searchStr)});else{if(0===oe&&!t.searchStr)return;t.searchStr&&""!==t.searchStr?t.searchStr.length>=oe&&(E(),re&&a.cancel(re),t.searching=!0,re=a(function(){T(t.searchStr)},t.pause)):t.showDropdown=!1,de&&de!==t.searchStr&&!t.clearSelected&&t.$apply(function(){R()})}}function q(){le&&le.resolve()}function V(e){!t.overrideSuggestions||t.selectedObject&&t.selectedObject.originalObject===t.searchStr||(e&&e.preventDefault(),a.cancel(re),q(),A(t.searchStr))}function O(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function P(){return ce.getBoundingClientRect().top+parseInt(getComputedStyle(ce).maxHeight,10)}function W(){return o[0].querySelectorAll(".angucomplete-row")[t.currentIndex]}function B(){return W().getBoundingClientRect().top-(ce.getBoundingClientRect().top+parseInt(getComputedStyle(ce).paddingTop,10))}function N(e){ce.scrollTop=ce.scrollTop+e}function H(){var e=t.results[t.currentIndex];t.matchClass?ae.val(I(e.originalObject)):ae.val(e.title)}function _(e){var n=L(e),i=null,a=null;n===p&&t.results?(t.currentIndex>=0&&t.currentIndex<t.results.length?(e.preventDefault(),t.selectResult(t.results[t.currentIndex])):(V(e),M()),t.$apply()):n===d&&t.results?(e.preventDefault(),t.currentIndex+1<t.results.length&&t.showDropdown&&(t.$apply(function(){t.currentIndex++,H()}),me&&(i=W(),P()<i.getBoundingClientRect().bottom&&N(O(i))))):n===c&&t.results?(e.preventDefault(),t.currentIndex>=1?(t.$apply(function(){t.currentIndex--,H()}),me&&(a=B(),0>a&&N(a-1))):0===t.currentIndex&&t.$apply(function(){t.currentIndex=-1,ae.val(t.searchStr)})):n===g?t.results&&t.results.length>0&&t.showDropdown?-1===t.currentIndex&&t.overrideSuggestions?V():(-1===t.currentIndex&&(t.currentIndex=0),t.selectResult(t.results[t.currentIndex]),t.$digest()):t.searchStr&&t.searchStr.length>0&&V():n===u&&e.preventDefault()}function j(e,n){var i,a,o,r,s,d;if(e&&e.length>0)for(t.results=[],i=0;i<e.length;i++){if(t.titleField&&""!==t.titleField&&(r=s=I(e[i])),t.subTitleField&&""!==t.subTitleField){var l=$(e[i],t.subTitleField);l&&(r+="- "+l)}a="",t.descriptionField&&(a=d=$(e[i],t.descriptionField)),o="",t.imageField&&(o=$(e[i],t.imageField)),t.matchClass&&(s=U(r,n),d=U(a,n)),t.results[t.results.length]={title:s,description:d,image:o,originalObject:e[i]}}else t.results=[];t.autoMatch&&1===t.results.length&&Y(t.results[0],{title:r,desc:a||""},t.searchStr)?t.showDropdown=!1:0!==t.results.length||ie?t.showDropdown=!0:t.showDropdown=!1,t.results=t.results.slice(0,15)}function z(e){return function(n,i,a,o){i||a||o||!n.data||(n=n.data),t.searching=!1,j($(ee(n),t.remoteUrlDataField),e)}}function Q(e,n,i,a){0!==n&&-1!==n&&(n||i||a||(n=e.status),t.remoteUrlErrorCallback?t.remoteUrlErrorCallback(e,n,i,a):console&&console.error&&console.error("http error"))}function G(i){var a={},o=t.remoteUrl+encodeURIComponent(i);t.remoteUrlRequestFormatter&&(a={params:t.remoteUrlRequestFormatter(i)},o=t.remoteUrl),t.remoteUrlRequestWithCredentials&&(a.withCredentials=!0),q(),le=e.defer(),a.timeout=le.promise,n.get(o,a).success(z(i)).error(Q)}function J(n){q(),le=e.defer(),t.remoteApiHandler(n,le.promise).then(z(n))["catch"](Q)}function K(e){var n,i,a,o,r=t.searchFields.split(","),s=[];for("undefined"!=typeof t.parseInput()&&(e=t.parseInput()(e)),n=0;n<t.localData.length;n++){for(i=!1,a=0;a<r.length;a++)o=$(t.localData[n],r[a])||"",i=i||o.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0;i&&(s[s.length]=t.localData[n])}t.searching=!1,j(s,e)}function Y(e,n,i){if(!i)return!1;for(var a in n)if(n[a].toLowerCase()===i.toLowerCase())return t.selectResult(e),!0;return!1}function X(){t.localData?j(t.localData,""):t.remoteApiHandler?J(""):G("")}var Z,ee,te,ne,ie,ae=o.find("input"),oe=v,re=null,se=w,de=null,le=null,ce=o[0].querySelector(".angucomplete-dropdown"),me=!1,ue=null;o.on("mousedown",function(e){e.target.id?(ue=e.target.id,ue===t.id+"_dropdown"&&document.body.addEventListener("click",x)):ue=e.target.className}),t.currentIndex=t.focusFirst?0:null,t.searching=!1,te=t.$watch("initialValue",function(e){e&&(te(),C(e,!0))}),t.$watch("fieldRequired",function(e,n){e!==n&&(e?k(de&&-1!==t.currentIndex?!0:!1):s[t.inputName].$setValidity(se,!0))}),t.$on("angucomplete-alt:clearInput",function(e,n){n&&n!==t.id||(t.searchStr=null,R(),k(!1),M())}),t.$on("angucomplete-alt:changeInput",function(e,n,i){n&&n===t.id&&C(i)}),t.onFocusHandler=function(){t.focusIn&&t.focusIn(),0!==oe||t.searchStr&&0!==t.searchStr.length||(t.currentIndex=t.focusFirst?0:t.currentIndex,t.showDropdown=!0,X())},t.hideResults=function(){ue&&(ue===t.id+"_dropdown"||ue.indexOf("angucomplete")>=0)?ue=null:(Z=a(function(){M(),t.$apply(function(){t.searchStr&&t.searchStr.length>0&&ae.val(t.searchStr)})},b),q(),t.focusOut&&t.focusOut(),t.overrideSuggestions&&t.searchStr&&t.searchStr.length>0&&-1===t.currentIndex&&V())},t.resetHideResults=function(){Z&&a.cancel(Z)},t.hoverRow=function(e){t.currentIndex=e},t.selectResult=function(e){t.matchClass&&(e.title=I(e.originalObject),e.description=$(e.originalObject,t.descriptionField)),t.clearSelected?t.searchStr=null:t.searchStr=e.title,R(e),M()},t.inputChangeHandler=function(e){return e.length<oe?(q(),M()):0===e.length&&0===oe&&(t.searching=!1,X()),t.inputChanged&&(e=t.inputChanged(e)),e},t.fieldRequiredClass&&""!==t.fieldRequiredClass&&(se=t.fieldRequiredClass),t.minlength&&""!==t.minlength&&(oe=parseInt(t.minlength,10)),t.pause||(t.pause=h),t.clearSelected||(t.clearSelected=!1),t.overrideSuggestions||(t.overrideSuggestions=!1),t.fieldRequired&&s&&k(t.initialValue?!0:!1),t.inputType=r.type?r.type:"text",t.textSearching=r.textSearching?r.textSearching:S,t.textNoResults=r.textNoResults?r.textNoResults:y,ne="false"===t.textSearching?!1:!0,ie="false"===t.textNoResults?!1:!0,t.maxlength=r.maxlength?r.maxlength:f,ae.on("keydown",_),ae.on("keyup",F),ee=D("remoteUrlResponseFormatter"),a(function(){var e=getComputedStyle(ce);me=e.maxHeight&&"auto"===e.overflowY})}var d=40,l=39,c=38,m=37,u=27,p=13,g=9,v=3,f=524288,h=500,b=200,w="autocomplete-required",S="Searching...",y="No results found",x="/angucomplete-alt/index.html";return o.put(x,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input style="margin: 0px; border: none; height: 34px; width: 90%;" id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&",subTitleField:"@"},templateUrl:function(e,t){return t.templateUrl||x},compile:function(e){var t=r.startSymbol(),n=r.endSymbol();if("{{"!==t||"}}"!==n){var i=e.html().replace(/\{\{/g,t).replace(/\}\}/g,n);e.html(i)}return s}}}]),angular.module("trainingModule").config(["$routeProvider","$sceDelegateProvider","localStorageServiceProvider",function(e,t,n){e.when("/training",{templateUrl:"app/modules/training/views/trainingRoom.html",controller:"TrainingRoomController",controllerAs:"app/modules/training/controllers/trainingRoom"})}]),angular.module("mainModule").config(["$routeProvider",function(e){e.when("/home",{templateUrl:"app/modules/main/views/main.html",controller:"HomeController",controllerAs:"app/modules/main/controllers/main"}).when("/trustedlogin",{templateUrl:"app/modules/main/views/trustedlogin.html",controller:"TrustedLoginController",controllerAs:"app/modules/main/controllers/trustedlogin"})}]),angular.module("conferenceModule").config(["$routeProvider","$sceDelegateProvider","localStorageServiceProvider",function(e,t,n){e.when("/room",{templateUrl:"app/modules/conference/views/room.html",controller:"RoomController",controllerAs:"app/modules/conference/controllers/room"})}]),angular.module("adminModule",["api","toastr","config","underscore","LocalStorageModule"]),angular.module("adminModule").config(["$routeProvider",function(e){e.when("/admin",{templateUrl:"app/modules/admin/views/adminAuthView.html",controller:"AdminAuthCtrl",controllerAs:"app/modules/admin/controllers/adminAuthController"}).when("/admin/rooms",{templateUrl:"app/modules/admin/views/adminRoomsListView.html",controller:"AdminRoomsListCtrl",controllerAs:"app/modules/admin/controllers/adminRoomsListController"}).when("/admin/rooms/create",{templateUrl:"app/modules/admin/views/adminCreateRoomView.html",controller:"AdminCreateRoomCtrl",controllerAs:"app/modules/admin/controllers/adminCreateRoomController"}).when("/admin/rooms/edit",{templateUrl:"app/modules/admin/views/adminEditRoomView.html",controller:"AdminEditRoomCtrl",controllerAs:"app/modules/admin/controllers/adminEditRoomCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("config",[]).constant("apiUrl","https://training.demo.vietinterview.com:9444/api").constant("trainingSocketUrl","wss://training.demo.vietinterview.com:9445/one2many").constant("conferenceSocketUrl","wss://training.demo.vietinterview.com:9446/many2many").constant("iceServers",[{url:"turn:125.212.233.5:3478?transport=udp",credential:"123456",username:"quang"}]).constant("enabledLog",!0),angular.module("app").service("sharedProperties",function(){var e=null;return{setObject:function(t){e=t},getObject:function(){return e}}}),angular.module("app").service("viMdToast",["$mdToast",function(e){function t(t,n){e.show(e.simple().textContent(t).position(a).toastClass(n).hideDelay(o))}function n(e){t(e,r)}function i(e){t(e,s)}var a="top right",o=2e3,r="vi-toast-danger",s="vi-toast-success";return{error:n,success:i}}]),angular.module("app").run(["$log",function(e){e.debug("Application started")}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/modules/main/views/main.html",controller:"HomeController",controllerAs:"app/modules/main/controllers/main"})}]),angular.module("app").filter("decodeBase64",["$base64",function(e){return function(t){var n="";return t&&(n=e.decode(t)),n}}]),angular.module("app").value("duScrollOffset",0).value("duScrollDuration",1e3).config(["$logProvider","$mdThemingProvider","$mdIconProvider","$translateProvider","toastrConfig","enabledLog","$activityIndicatorProvider",function(e,t,n,i,a,o,r){e.debugEnabled(o),a.allowHtml=!0,a.timeOut=3e3,a.positionClass="toast-top-right",a.preventDuplicates=!0,a.closeButton=!0,a.progressBar=!0,i.useStaticFilesLoader({prefix:"./assets/locale/locale-",suffix:".json"}),i.preferredLanguage("vi"),i.fallbackLanguage("vi"),r.setActivityIndicatorStyle("SpinnerDark")}]),angular.module("app").run(["$templateCache",function(e){e.put("app/modules/admin/views/adminAuthView.html",'<main class=auth-main layout=column layout-align="center center" ng-keypress=loginAccountKeyPress($event)><div class=auth-block><div class="md-display-1 vi-center auth-admin-logo"><img src=assets/images/logo_trananh.jpg alt=""></div><form name=authForm><md-input-container class=md-block><label>Email</label><input name=email ng-model=auth.emailLogin required><div ng-messages=authForm.email.$error><div ng-message=required>{{"auth.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{"auth.password" | translate}}</label><input name=password type=password ng-model=auth.passwordLogin required><div ng-messages=authForm.password.$error><div ng-message=required>{{"auth.required" | translate}}</div></div></md-input-container><md-button ng-click=loginAccount() class="md-raised md-primary vi-btn-reset">{{"auth.login" | translate}}</md-button></form></div></main>'),e.put("app/modules/admin/views/adminCreateRoomView.html",'<div style="width: 100%" ng-include="\'app/modules/admin/views/shared/toolbarView.html\'"></div><div layout=row flex><md-sidenav class="md-whiteframe-2dp md-sidenav-left vi-sidenav" md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" md-whiteframe=4><div style="width: 100%" ng-include="\'app/modules/admin/views/shared/roomsListView.html\'"></div></md-sidenav><md-content flex id=content><div layout=row><h3 class="md-display-1 vi-row vi-headline">{{"admin.roomsList.createTitle" | translate}}</h3></div><div layout=row class="room-info vi-row vi-col"><div style="width: 100%" ng-include="\'app/modules/admin/views/shared/roomFormView.html\'"></div></div></md-content></div>'),e.put("app/modules/admin/views/adminEditRoomView.html",'<div style="width: 100%" ng-include="\'app/modules/admin/views/shared/toolbarView.html\'"></div><div layout=row flex><md-sidenav class="md-whiteframe-2dp md-sidenav-left vi-sidenav" md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" md-whiteframe=4><div style="width: 100%" ng-include="\'app/modules/admin/views/shared/roomsListView.html\'"></div></md-sidenav><md-content flex id=content><div layout=row><h3 class="md-display-1 vi-row vi-headline">{{"admin.roomsList.editTitle" | translate}} "{{room.name}}"</h3></div><div layout=row class="room-info vi-row vi-col"><md-tabs flex md-dynamic-height md-border-bottom><md-tab label="{{\'admin.roomsList.room\' | translate}}"><md-content class=md-padding><div style="width: 100%" ng-include="\'app/modules/admin/views/shared/roomFormView.html\'"></div></md-content></md-tab><md-tab label="{{\'admin.roomsList.member\' | translate}}"><md-content class=md-padding><h3 class=md-title>{{"admin.roomsList.totalMembers" | translate}}: {{membersList.length | number}}</h3><div layout=row><div flex=30><div class=vi-panel><md-list class=vi-members-list><md-list-item class=md-2-line ng-repeat="member in membersList" ng-click=showMemberDetail(member)><div class="md-list-item-text vi-member-item"><h3 class="md-title vi-member-name">{{member.name}}</h3><p class=vi-member-email>{{member.role}}</p></div></md-list-item></md-list><p style=text-align:center ng-show="membersList.length == 0">{{"admin.roomsList.addMemberMsg" | translate}}</p></div></div><div flex=70 class=vi-row><!-- Begin btn group --><div layout=row class=vi-btn-group-member><div flex=70 layout=row layout-align=start><md-button class="md-raised vi-btn vi-warn" ng-click=showEditMemberForm(); style="margin-left: 0"><i class="fa fa-pencil" aria-hidden=true></i> {{"admin.roomsList.edit" | translate}}</md-button><md-button class="md-raised vi-btn vi-success" ng-click=showAddMemberForm();><i class="fa fa-plus" aria-hidden=true></i> {{"admin.roomsList.add" | translate}}</md-button></div><div flex=30 layout=row layout-align=end><md-button class="md-raised vi-btn vi-danger" style="margin-right: 0" ng-click=removeMember();><i class="fa fa-times" aria-hidden=true></i> {{"admin.roomsList.add" | translate}}</md-button></div></div><!-- End btn group --><!-- Begin user info panel --><div class=vi-panel><div ng-show=!showMemberForm><md-list ng-show=member><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>{{"admin.roomsList.memberName" | translate}}</div><div flex=80>{{member.name}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>{{"admin.roomsList.memberRole" | translate}}</div><div flex=80>{{member.name}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=20 class=vi-title>Email</div><div flex=80>{{member.email}}</div></md-list-item></md-list><p style=text-align:center ng-show=!member>{{"admin.roomsList.chooseMember" | translate}}</p></div><!-- Begin form edit user --><form name=memberForm ng-show=showMemberForm class=vi-col><div layout=row><md-input-container flex=60 class=md-block><label>{{"admin.roomsList.memberName" | translate}}</label><input name=name ng-model=member.name required><div ng-messages=memberForm.name.$error><div ng-message=required>This is required!</div></div></md-input-container><md-input-container flex class=md-block><label>{{"admin.roomsList.memberRole" | translate}}</label><md-select ng-model=member.role><md-option value=presenter>Presenter</md-option><md-option value=member>Member</md-option></md-select></md-input-container></div><div layout=row><md-input-container flex=60 class=md-block><label>Email</label><input name=email ng-model=member.email required><div ng-messages=memberForm.email.$error><div ng-message=required>{{"admin.roomsList.required" | translate}}</div></div></md-input-container><md-input-container flex class=md-block><label>{{"auth.password" | translate}}</label><input name=password type=password ng-model=member.password required><div ng-messages="memberForm.password.$error && !member.password"><div ng-message=required>{{"admin.roomsList.required" | translate}}</div></div></md-input-container></div><div layout=row><md-button ng-click=cancelMember() class="md-raised vi-btn vi-danger">{{"admin.roomsList.cancel" | translate}}</md-button><md-button ng-click=saveMember() class="md-raised md-primary">{{"admin.roomsList.save" | translate}}</md-button></div></form><!-- End form edit user --></div><!-- End user info panel --></div></div></md-content></md-tab></md-tabs></div></md-content></div>'),
e.put("app/modules/admin/views/adminRoomsListView.html",'<div style="width: 100%" ng-include="\'app/modules/admin/views/shared/toolbarView.html\'"></div><div layout=row flex><md-sidenav class="md-whiteframe-2dp md-sidenav-left vi-sidenav" md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" md-whiteframe=4><div style="width: 100%" ng-include="\'app/modules/admin/views/shared/roomsListView.html\'"></div></md-sidenav><md-content flex id=content class=content-admin-rooms-list><div layout=row class="vi-btn-group vi-btn-group-room"><div flex=70 layout=row layout-align=start><md-button class="md-raised vi-btn vi-warn" ng-click=gotoEditRoom();><i class="fa fa-pencil" aria-hidden=true></i> {{"admin.roomsList.edit" | translate}}</md-button><md-button ng-href=#/admin/rooms/create class="md-raised vi-btn vi-success"><i class="fa fa-plus" aria-hidden=true></i> {{"admin.roomsList.create" | translate}}</md-button></div><!-- <div flex="30" layout="row" layout-align="end">\r\n        <md-button class="md-raised vi-btn vi-danger">\r\n          <i class="fa fa-ban" aria-hidden="true"></i> Close\r\n        </md-button>\r\n      </div>  --></div><div layout=row><h3 flex=60 flex-xs=100 class="md-display-1 vi-row vi-headline">{{"admin.roomsList.totalRooms" | translate}}: {{roomsList.length | number}}</h3></div><div layout=row layout-xs=column><div flex=50 flex-xs=100 class="vi-panel vi-row vi-col"><h3 class=md-headline>{{room.name ? room.name : "admin.roomsList.chooseRoom" | translate}}</h3><div layout=column><md-list ng-show=room><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Room Id</div><div flex=70>{{room._id}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Room Reference</div><div flex=70>{{room.meetingRef}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{"admin.roomsList.duration" | translate}}</div><div flex=70>{{room.duration ? room.duration : "" | number}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{"admin.roomsList.status" | translate}}</div><div flex=70>{{room.active ? "active" : "inactive"}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Logout Url</div><div flex=70 style="word-wrap: break-word">{{room.logoutUrl ? room.logoutUrl : "" | decodeBase64}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>Welcome title</div><div flex=70>{{room.welcome ? room.welcome : ""}}</div></md-list-item><md-list-item layout=row class=md-1-line><div flex=30 class=vi-title>{{"admin.roomsList.totalMembers" | translate}}</div><div flex=70>{{room.membersList.length | number}}</div></md-list-item></md-list></div></div><div flex=50 flex-xs=100 class="vi-panel vi-row vi-col members-list"><h3 class=md-headline>{{"admin.roomsList.membersList" | translate}}</h3><md-list class=vi-members-list><md-list-item class="md-3-line vi-md-list-user-item" ng-repeat="member in room.membersList"><div class="md-list-item-text vi-member-item"><h3 class="md-title vi-member-name">{{member.name}}</h3><p>{{member.email}}</p><p class=vi-member-email>{{member.role}}</p></div></md-list-item></md-list></div></div></md-content></div>'),e.put("app/modules/conference/views/room.html",'<!-- Start toolbar --><md-toolbar layout=row class="md-toolbar-tools vi-toolbar"><div flex=40><!-- <button hide-gt-sm class="vi-center menuBtn" ng-click="toggleSidenav(\'left\')" aria-label="Toggle Menu">\r\n            <i class="fa fa-bars" aria-hidden="true"></i>\r\n        </button> --> <img src=assets/images/logo_trananh_blue.png alt=Trananh style="width: 200px"></div><div flex=20 flex-sm=40 flex-xs=40 class=vi-center><h2 class="md-display-1 vi-logo">{{meeting.name}}</h2></div><div flex=40 class=vi-right><ul class="list-inline vi-nav-right"><!-- <li class="vi-nav-right-item"\r\n                ng-show="me.profile.role==\'presenter\'"\r\n                ng-click="endLesson()">\r\n                <i class="fa fa-hourglass-end" aria-hidden="true"></i>\r\n                <span>{{"conference.endLesson" | translate}}</span>\r\n            </li> --><!-- <li class="vi-nav-right-item"\r\n                ng-click="showSettingDialog($event)">\r\n                <i class="fa fa-cog" aria-hidden="true"></i>\r\n                <span>{{"conference.setting" | translate}}</span>\r\n            </li> --><li ng-click=leave() class=vi-nav-right-item><i class="fa fa-sign-out" aria-hidden=true></i> <span>{{"conference.logout" | translate}}</span></li></ul></div></md-toolbar><!-- End toolbar --><div layout=row><!-- Start sidebar --><md-sidenav class="md-sidenav-left vi-sidenav" md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')"><div class="panel panel-info" style="height: 100%; padding: 0px; margin: 0px"><div class="localCameraDiv box" style="width: 100%"><div align=center class=web-cam><video id=localCamera autoplay muted poster=assets/images/avatar-03.png></video></div><div class="btn-local-group-video vi-center"><span ng-click=toggleAudio() class=vi-icon ng-class="audio?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-microphone"></i><md-tooltip>{{video ? \'conference.offVolume\' : \'conference.offVolume\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleVideo() class=vi-icon ng-class="video?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-camera"></i><md-tooltip>{{video ? \'conference.offCamera\' : \'conference.onCamera\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleHand() ng-show="me.profile.role!=\'presenter\'" class=vi-icon ng-class="handUp?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-hand-paper-o"></i></span></div><div class=vi-center><md-button class="md-fab md-mini" aria-label=Connect ng-click=connect() ng-disabled=me.pubState ng-class="\'btn-icon-on\'"><i class="fa fa-volume-control-phone"></i><md-tooltip>{{ \'conference.connect\' | translate}}</md-tooltip></md-button><md-button class="md-fab md-mini" aria-label=Disconnect ng-click=disconnect() ng-disabled=!me.pubState ng-class="\'btn-icon-off\'"><i class="glyphicon glyphicon-phone-alt"></i><md-tooltip>{{ \'conference.disconnect\' | translate}}</md-tooltip></md-button></div></div><div class=panel-body style="height: 100%"><ul class="list-unstyled members-list-room box"><li class=title>{{"conference.presenter" | translate}}</li><li class=content><span ng-class="presenter.online ? \'fa fa-circle vi-online\' : \'fa fa-circle vi-offline\'" aria-hidden=true></span> {{presenter.profile.name}}</li><li class=title>{{"conference.learners" | translate}} <span ng-show="me.profile.role==\'presenter\'" class="fa fa-hand-paper-o btn-handup" ng-class="!notiHandUp ? \'icon-on animated infinite bounce\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=""></span></li><li class=content style="position: relative" ng-repeat="viewer in viewerList"><span ng-class="viewer.online ? \'fa fa-circle vi-online\' : \'fa fa-circle vi-offline\'" aria-hidden=true></span> {{viewer.profile.name}} <span ng-show="me.profile.role==\'presenter\'" class="fa fa-video-camera" ng-class="viewer.invited ? \'icon-on\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=memberInvite(viewer.id)></span> <span ng-show="me.profile.role==\'presenter\'" class="fa fa-hand-paper-o btn-handup" ng-class="viewer.handUp ? \'icon-on animated infinite bounce\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=""></span></li></ul></div></div></md-sidenav><!-- End sidebar --><section layout=row flex class=content-wrapper><div class=overlay ng-show=!me.pubState></div><!-- Start conference board --><md-content flex><div class=main-content><div class="conference-board box"><div layout=row layout-wrap><div flex={{firstSlot}} class=video-wrapper><md-progress-circular ng-show="presenter.subState == 1 || presenter.subState == 2" class="md-hue-2 md-warn progress" md-diameter=30px></md-progress-circular><video id=remoteCamera0 controls poster=assets/images/avatar-03.png autoplay></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{presenter.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(presenter.id) class=btn-refresh style="cursor: pointer"><i class="fa fa-refresh"></i><md-tooltip>Refresh video</md-tooltip></span></div></div></div><div flex={{slot.width}} class=video-wrapper ng-show=slot.allocated ng-repeat="slot in videoSlots | filter:byIndex"><md-progress-circular ng-show="slot.member.subState == 1 || slot.member.subState == 2" class="md-hue-2 md-warn progress" md-diameter=30px></md-progress-circular><video ng-attr-id="{{ \'remoteCamera\' + ($index+1) }}" controls autoplay poster=assets/images/avatar-03.png style="width: 100%"></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{slot.member.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(slot.member.id) class=btn-refresh style="cursor: pointer"><i class="fa fa-refresh"></i><md-tooltip md-direction=left>Refresh video</md-tooltip></span><span ng-show="me.profile.role==\'presenter\'" ng-click=memberDiscard(slot) class="btn-close vi-center"><i class="fa fa-times fa-lg"></i><md-tooltip md-direction=right>Close</md-tooltip></span></div></div></div></div></div></div></md-content><!-- End conference board --><!-- Start chat panel --><md-sidenav class="md-sidenav-right vi-chat-sidenav" md-is-locked-open="$mdMedia(\'min-width: 400px\')" md-component-id=right><div class="chat-content-wrapper box"><div id=chat-content class="chat-content chat-content-conference box" style="overflow-y: auto"><div class=chat-box-title>Chat box</div><ul class="messages-list list-unstyled"><li class="md-1-line message-item" ng-repeat="msg in chatMessage"><div class=md-list-item-text id={{msg.idx}}><span class=user>{{msg.user}}: </span><span class=message>{{msg.text}}</span></div></li></ul></div><div layout=row class="input-message-group-training box" ng-keypress=sendChatMessage($event)><md-input-container flex=80><label>{{"conference.chatMsg" | translate}}</label><input type=text ng-model=chatInput></md-input-container><div flex=20 class=btn-send-wrapper><md-button class="md-fab md-primary" aria-label="Send message" ng-click=chat()><i class="fa fa-paper-plane" aria-hidden=true></i></md-button></div></div></div></md-sidenav><!-- End chat panel --></section></div>'),e.put("app/modules/conference/views/settingDialog.html",'<md-dialog class=setting-dialog aria-label=Setting><md-toolbar><div class=md-toolbar-tools><h2>{{"conference.setting" | translate}}</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon aria-label="Close dialog"><i class="fa fa-times" aria-hidden=true></i></md-icon></md-button></div></md-toolbar><div ng-cloak><md-content><md-tabs md-dynamic-height md-border-bottom><md-tab label="{{\'general.netSpeed\' | translate}}"><md-content class="md-padding vi-center"><show-bandwidth max=50 scale=20></show-bandwidth></md-content></md-tab><md-tab label="{{\'general.devices\' | translate}}"><md-content class=md-padding><show-devices></show-devices></md-content></md-tab></md-tabs></md-content></div></md-dialog>'),e.put("app/modules/main/views/main.html",'<main class=auth-main layout=column layout-align="center center" ng-keypress=loginMeetingKeyPress($event)><div class=auth-block><div class="md-display-1 vi-center auth-room-logo"><img src=assets/images/logo_trananh.jpg alt=""></div><form name=authMeetingForm><md-input-container class=md-block><label>RoomId</label><input name=roomId ng-model=meetingAuth.meetingId required><div ng-messages=authMeetingForm.roomId.$error><div ng-message=required>{{"auth.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Email</label><input name=email ng-model=meetingAuth.email required><div ng-messages=authMeetingForm.email.$error><div ng-message=required>{{"auth.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{"auth.password" | translate}}</label><input name=password type=password ng-model=meetingAuth.password required><div ng-messages=authMeetingForm.password.$error><div ng-message=required>{{"auth.required" | translate}}</div></div></md-input-container><md-radio-group ng-model=meetingAuth.kind layout=row class=md-block><md-radio-button flex value=training class=md-primary>Training</md-radio-button><md-radio-button flex value=conference class=md-primary>Conference</md-radio-button></md-radio-group><md-button ng-click=loginMeeting() class="md-raised md-primary vi-btn-reset btn-login">{{"auth.login" | translate}}</md-button></form></div></main>'),e.put("app/modules/main/views/trustedlogin.html",'<main class="auth-main auth-main-trusted" layout=column layout-align="center center" ng-keypress=loginMeetingKeyPress($event)><div class=auth-block-trusted layout=row><div class=vi-col flex=60 flex-xs=100 flex-offset=40 flex-offset-xs=0><img class=logo-trusted src=assets/images/logo_trananh_white_color.png alt=VietInterview><h3 class=md-headline>{{"training.title" | translate}}</h3><md-button class="md-raised btn-trusted vi-btn-reset" ng-click=loginMeeting()>{{"training.enter" | translate}}</md-button></div></div></main>'),e.put("app/modules/training/views/trainingRoom.html",'<!-- Start toolbar --><md-toolbar layout=row class="md-toolbar-tools vi-toolbar"><div flex=30><!-- <button hide-gt-sm class="vi-center menuBtn" ng-click="toggleSidenav(\'left\')" aria-label="Toggle Menu">\r\n            <i class="fa fa-bars" aria-hidden="true"></i>\r\n        </button> --> <img src=assets/images/logo_trananh_blue.png alt=Trananh style="width: 200px"></div><div flex=40 flex-sm=40 flex-xs=40 class=vi-center><h2 class="md-display-1 vi-logo">{{meeting.name}}</h2></div><div flex=30 class=vi-right><ul class="list-inline vi-nav-right"><li class=vi-nav-right-item ng-show="me.profile.role==\'presenter\'" ng-click=endLesson()><i class="fa fa-hourglass-end" aria-hidden=true></i> <span>{{"training.endLesson" | translate}}</span></li><li ng-click=leave() class=vi-nav-right-item><i class="fa fa-sign-out" aria-hidden=true></i> <span>{{"training.logout" | translate}}</span></li></ul></div></md-toolbar><!-- End toolbar --><div layout=row flex style="height: 100%"><!-- Start sidebar --><md-sidenav class="md-sidenav-left vi-sidenav" md-component-id=left md-is-locked-open="$mdMedia(\'min-width: 280px\')" ng-show=!fullScreen><div class="panel panel-info" style="height: 100%; padding: 0px; margin: 0px"><div class="localCameraDiv box" style="width: 100%"><div align=center class=web-cam><video id=localCamera autoplay muted poster=assets/images/avatar-03.png></video></div><div class="btn-local-group-video vi-center"><span ng-click=toggleAudio() class=vi-icon ng-class="audio?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-microphone"></i><md-tooltip>{{video ? \'training.offVolume\' : \'training.offVolume\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleVideo() class=vi-icon ng-class="video?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-camera"></i><md-tooltip>{{video ? \'training.offCamera\' : \'training.onCamera\' | translate}}</md-tooltip></span>&nbsp; <span ng-click=toggleHand() ng-show="me.profile.role!=\'presenter\'" class=vi-icon ng-class="handUp?\'icon-on\':\'icon-off\'" style="cursor: pointer"><i class="fa fa-hand-paper-o"></i></span></div><div class=vi-center><md-button class="md-fab md-mini" aria-label=Connect ng-click=connect() ng-disabled=me.pubState ng-class="\'btn-icon-on\'"><i class="fa fa-volume-control-phone"></i><md-tooltip>{{ \'training.connect\' | translate}}</md-tooltip></md-button><md-button class="md-fab md-mini" aria-label=Disconnect ng-click=disconnect() ng-disabled=!me.pubState ng-class="\'btn-icon-off\'"><i class="glyphicon glyphicon-phone-alt"></i><md-tooltip>{{ \'training.disconnect\' | translate}}</md-tooltip></md-button></div></div><div class=panel-body style="height: 100%"><ul class="list-unstyled members-list-room box"><li class=title>{{"training.presenter" | translate}}</li><li class=content><span ng-class="presenter.online ? \'fa fa-circle vi-online\' : \'fa fa-circle vi-offline\'" aria-hidden=true></span> {{presenter.profile.name}}</li><li class=title>{{"training.learners" | translate}} <span ng-show="me.profile.role==\'presenter\'" class="fa fa-hand-paper-o btn-handup" ng-class="!notiHandUp ? \'icon-on animated infinite bounce\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=""></span></li><li class=content style="position: relative" ng-repeat="viewer in viewerList"><span ng-class="viewer.online ? \'fa fa-circle vi-online\' : \'fa fa-circle vi-offline\'" aria-hidden=true></span> {{viewer.profile.name}} <span ng-show="me.profile.role==\'presenter\'" class="fa fa-video-camera" ng-class="viewer.invited ? \'icon-on\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=memberInvite(viewer.id)></span> <span ng-show="me.profile.role==\'presenter\'" class="fa fa-hand-paper-o btn-handup" ng-class="viewer.handUp ? \'icon-on animated infinite bounce\' : \'icon-off\'" style="cursor: pointer; float: right; margin-left: 10px" aria-hidden=true ng-click=""></span></li></ul></div></div></md-sidenav><!-- End sidebar --><section layout=row flex class="content-wrapper content-wrapper-training"><!-- <div class="overlay" ng-show="!me.pubState"></div> --><div class="main-content main-content-training vi-custom-tabs" flex><span class=btn-size ng-click=changeSizeSlide()><i class="fa fa-arrows-alt" aria-hidden=true ng-show=!fullScreen></i> <img style="width: 15px; height: 15px" src=assets/images/minimize.png alt=maximize ng-show=fullScreen></span><div class="box vi-full-height"><md-tabs md-dynamic-height=false><md-tab label="{{\'training.presentation\' | translate}}"><md-content class=md-padding><!-- Start conference board --><div class=my-pdf-container><div class="pdf-content box vi-center" style="height: calc(100% - 55px); overflow: auto"><pdf-viewer delegate-handle=my-pdf-container url=pdfUrl scale=.9 show-toolbar=false headers="{ \'x-you-know-whats-awesome\': \'EVERYTHING\' }"></pdf-viewer></div><div class="toolbar-pdf-viewer box" layout=row><div flex=30 ng-show="me.profile.role==\'presenter\'"><md-button class="md-raised vi-success vi-btn" ngf-select=uploadPresentation($file) ngf-max-size=10MB><i class="fa fa-upload" aria-hidden=true></i> {{"training.upload" | translate}}</md-button></div><div flex=40 class=vi-center ng-show="me.profile.role==\'presenter\'"><md-button class="md-raised vi-btn-default" ng-click=pdfSwitchPage(-1)><i class="fa fa-chevron-left" aria-hidden=true></i></md-button><input type=text class="vi-input vi-pdf-input" ng-value="currPage + \'/\' + totalPages"><md-button class="md-raised vi-btn-default" ng-click=pdfSwitchPage(1)><i class="fa fa-chevron-right" aria-hidden=true></i></md-button></div><div flex=30 ng-class="{\'vi-right\': (me.profile.role==\'presenter\')}"><md-button class="md-raised vi-btn-default" ng-click=zoomOut(0.1)><i class="fa fa-search-minus" aria-hidden=true></i></md-button><input flex=60 class="vi-input vi-pdf-input" type=text ng-value="zoom + \'%\'" disabled><md-button class="md-raised vi-btn-default" ng-click=zoomIn(0.1)><i class="fa fa-search-plus" aria-hidden=true></i></md-button></div></div></div><!-- End conference board --></md-content></md-tab><md-tab label="{{\'training.screenSharing\' | translate}}"><md-content class="md-padding box share-screen-content"><md-button ng-show="me.profile.role==\'presenter\'" class="md-raised vi-success vi-btn" ng-click=shareScreen() style="margin: 0; margin-bottom: 5px"><i class="fa fa-desktop" aria-hidden=true></i> {{"training.screenSharing" | translate}}</md-button><a href=https://chrome.google.com/webstore/detail/screen-capturing/ajhifddimkapgcifgcodmmfdlknahffk>Chrome extension</a><video id=screenCamera autoplay muted poster=assets/images/avatar-03.png></video></md-content></md-tab><md-tab label="{{\'training.fileSharing\' | translate}}"><md-content class="md-padding box share-file-training-content"><md-button ng-show="me.profile.role==\'presenter\'" class="md-raised vi-success vi-btn" ngf-select=shareFile($file) ngf-max-size=10MB style="margin: 0 !important"><i class="fa fa-upload" aria-hidden=true></i> {{"training.upload" | translate}}</md-button><md-list class=files-sharing-list><md-list-item class=secondary-button-padding ng-repeat="file in fileList"><p class=title><a href={{file.url}} target=_blank>{{file.name}}</a></p><md-button class="md-raised vi-danger vi-btn vi-btn-default" ng-click=removeFile(file)><i class="fa fa-trash" aria-hidden=true></i></md-button><md-divider ng-if=!$last></md-divider></md-list-item></md-list></md-content></md-tab></md-tabs></div></div><!-- Start chat panel --><md-sidenav class="md-sidenav-right vi-chat-sidenav vi-chat-sidenav-training" md-is-locked-open="$mdMedia(\'min-width: 280px\')" md-component-id=right ng-show=!fullScreen><div class="presenter main box video-wrapper" layout=row layout-wrap ng-show="me.profile.role!=\'presenter\'"><md-progress-circular ng-show="presenter.subState == 1 || presenter.subState == 2" class="md-hue-2 md-warn progress" ng-class="toggleVideoFlag ? \'hide-panel\' : \'\'" md-diameter=40px></md-progress-circular><video id=remoteCamera0 controls poster=assets/images/avatar-03.png autoplay style="min-height: 200px" ng-class="toggleVideoFlag ? \'hide-panel\' : \'\'"></video><div layout=row class=btn-group-video ng-class="!toggleVideoFlag ? \'abs-bar\' : \'static-bar\'"><div flex=60><span class=label-name>{{"training.presenter" | translate}}: {{presenter.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(presenter.id) class=btn-refresh style="cursor: pointer"><i class="fa fa-refresh"></i><md-tooltip>{{\'training.refresh\' | translate}}</md-tooltip></span><!-- <span ng-click="toggleMainVideo()"\r\n                        class="btn-collapse"\r\n                        style="cursor: pointer">\r\n                            <i class="fa fa-minus-square-o" aria-hidden="true"></i>\r\n                            <md-tooltip>{{!toggleVideoFlag ? \'training.collapse\' : \'training.expand\' | translate}}</md-tooltip>\r\n                        </span> --></div></div></div><div ng-class="(me.profile.role!=\'presenter\') ? \'calc-sidenav-training\' : \'vi-full-height\'"><md-tabs md-dynamic-height=true class="box vi-custom-tabs"><md-tab label=Chat><md-content class=md-padding><div id=chat-content class="chat-content chat-content-training box" style="overflow-y: auto"><div class=chat-box-title>Chat box</div><ul class="messages-list list-unstyled"><li class="md-1-line message-item" ng-repeat="msg in chatMessage"><div class=md-list-item-text id={{msg.idx}}><span class=user>{{msg.user}}: </span><span class=message>{{msg.text}}</span></div></li></ul></div><div layout=row class="input-message-group-training box" ng-keypress=sendChatMessage($event)><md-input-container flex=80><label>{{"training.chatMsg" | translate}}</label><input type=text ng-model=chatInput></md-input-container><div flex=20 class=btn-send-wrapper><md-button class="md-fab md-mini md-primary" aria-label="Send message" ng-click=chat()><i class="fa fa-paper-plane" aria-hidden=true></i></md-button></div></div></md-content></md-tab><md-tab label=Videos><md-content class=md-padding><div layout=row layout-wrap class="participant main members-video-panel members-video-training-panel"><div flex=50 class="video-member video-wrapper" ng-show=slot.allocated ng-repeat="slot in videoSlots | filter:byIndex"><md-progress-circular ng-show="slot.member.subState == 1 || slot.member.subState == 2" class="md-hue-2 md-warn progress" md-diameter=30px></md-progress-circular><video ng-attr-id="{{ \'remoteCamera\' + ($index+1) }}" controls autoplay poster=assets/images/avatar_1.png style="width: 100%"></video><div layout=row class=abs-bar><div flex=60><span class=label-name>{{slot.member.profile.name}}</span></div><div flex=40 class=vi-right><span ng-click=resubscribe(slot.member.id) class=btn-refresh style="cursor: pointer"><i class="fa fa-refresh"></i> </span><span ng-show="me.profile.role==\'presenter\'" ng-click=memberDiscard(slot) class="btn-close vi-center"><i class="fa fa-times fa-lg"></i></span></div></div></div><div flex=50 ng-hide="countAllocated == 1"><img src=assets/images/video-placeholder.png style="width: 100%; display: block; margin-bottom: 5px"></div><div flex=50 ng-hide="countAllocated == 2"><img src=assets/images/video-placeholder.png style="width: 100%; display: block; margin-bottom: 5px"></div><div flex=50 ng-hide="countAllocated == 3"><img src=assets/images/video-placeholder.png style="width: 100%; display: block; margin-bottom: 5px"></div></div></md-content></md-tab></md-tabs></div></md-sidenav><!-- End chat panel --></section></div>'),e.put("app/shared/directives/showBandwidth/showBandwidthView.html",'<canvas data-type=radial-gauge data-width=200 data-height=200 data-units=Mb/s data-title="{{speedDownMbps}} Mbps" data-value={{speedDownMbps}} data-min-value=0 data-max-value={{max}} data-major-ticks="0, 10, 20, 30, 40, {{max}}" , data-highlights=\'[\r\n            { "from": 0, "to": 10, "color": "rgba(250,104,0,1 )" },\r\n            { "from": 10, "to": 20, "color": "rgba(240,163,10,1 )" },        \r\n            { "from": 20, "to": 50, "color": "rgba(164,196,0,1 )" }            \r\n        ]\' data-minor-ticks={{scale}} data-stroke-ticks=false data-highlights=false data-value-box=false></canvas><div><span class=vi-right style="min-width: 50px; font-weight: bold; display: inline-block">{{(speedDownMbpsAvg == 0) ? \'\' : speedDownMbpsAvg}}</span>Mbps</div><md-button class="md-raised md-primary" ng-click=measureDownloadSpeedAverage()><i class="fa fa-clock-o" aria-hidden=true></i> <span>{{\'general.testSpeed\' | translate}}</span></md-button>'),e.put("app/shared/directives/showDevices/showDevices.html",'<div layout=row class=item-device><div flex=30>Webcam</div><div flex=70><i class="fa fa-check-circle" ng-class="{\'enable-device\': (videoDevices > 0)}" aria-hidden=true></i> <span ng-show="videoDevices <= 0">{{\'general.notAvailable\' | translate}}</span></div></div><md-divider></md-divider><div layout=row class=item-device><div flex=30>Audio</div><div flex=70><i class="fa fa-check-circle" ng-class="{\'enable-device\': (audioInputDevices > 0)}" aria-hidden=true></i> <span ng-show="audioInputDevices <= 0">{{\'general.notAvailable\' | translate}}</span></div></div><!-- <md-divider></md-divider> --><!-- <div layout="row">\r\n    <div flex="30">Speaker</div>\r\n    <div flex="70">\r\n        <i class="fa fa-check-circle" ng-class="{\'enable-device\': (audioOutputDevices > 0)}" aria-hidden="true"></i>\r\n        {{audioOutputDevices}}\r\n    </div>\r\n</div> --> <!-- <div class="main">\r\n    <div class="row">\r\n        <div class="title">Number of audio/video devices available:</div><div class="content">{{allDevices}}</div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="title">Number of video devices available: </div><div class="content">{{videoDevices}}</div>                           \r\n    </div>\r\n    <div class="row">\r\n        <div class="title">Number of audio devices available: </div><div class="content">{{audioDevices}}</div>                           \r\n    </div>\r\n    <div class="row">\r\n        <div class="title">Number of video-input devices available: </div><div class="content">{{videoInputDevices}}</div>                           \r\n    </div>\r\n    <div class="row">\r\n        <div class="title">Number of audio-input devices available: </div><div class="content">{{audioInputDevices}}</div>           \r\n    </div>\r\n    <div class="row">\r\n        <div class="title">Number of audio-output devices available: </div><div class="content">{{audioOutputDevices}}</div>                           \r\n    </div>     \r\n    <div class="row">\r\n        <div>All audio input devices:</div>\r\n    </div>\r\n    <div ng-repeat="deviceAudioInputName in audioInputDevicesName">\r\n        <div class="row">\r\n            <div class="title">Audio input device name: </div><div class="content">{{deviceAudioInputName.label}}</div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div>All video input devices:</div>\r\n    </div>\r\n    <div ng-repeat="deviceVideoInputName in deviceVideoInputName">\r\n        <div class="row">\r\n            <div class="title">Audio output device name: </div><div class="content">{{deviceVideoInputName.label}}</div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div>All audio output devices:</div>\r\n    </div>\r\n    <div ng-repeat="deviceAudioOutputName in audioOutputDevicesName">\r\n        <div class="row">\r\n            <div class="title">Audio output device name: </div><div class="content">{{deviceAudioOutputName.label}}</div>\r\n        </div>\r\n    </div>\r\n</div> -->'),e.put("app/modules/admin/views/shared/roomFormView.html",'<form name=creatRoomForm><md-input-container class=md-block><label>{{"admin.roomsList.nameRoom" | translate}}</label><input name=name type=text ng-model=room.name required><div ng-messages=creatRoomForm.name.$error><div ng-message=required>{{"admin.roomsList.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Room Refercence</label><input name=meetingRef type=text ng-model=room.meetingRef required><div ng-messages=creatRoomForm.meetingRef.$error><div ng-message=required>{{"admin.roomsList.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{"admin.roomsList.duration" | translate}}</label><input name=duration type=number ng-model=room.duration required><div ng-messages=creatRoomForm.duration.$error><div ng-message=required>{{"admin.roomsList.required" | translate}}</div></div></md-input-container><md-input-container class=md-block><label>Logout Url</label><input name=logoutUrl type=text ng-model=room.logoutUrl></md-input-container><md-input-container class=md-block><label>Webcome title</label><input name=welcome type=text ng-model=room.welcome></md-input-container><md-button ng-click=cancel() class="md-raised vi-btn vi-danger">{{"admin.roomsList.cancel" | translate}}</md-button><md-button ng-click=save() class="md-raised md-primary">{{"admin.roomsList.save" | translate}}</md-button></form>'),e.put("app/modules/admin/views/shared/roomsListView.html",'<md-list class=rooms-list><md-list-item ng-repeat="room in roomsList"><span style="margin-top: -15px" ng-class="room.active ? \'fa fa-circle vi-online\' : \'fa fa-circle vi-offline\'" aria-hidden=true></span><md-button ng-click=showRoomDetail(room)><h3 class=md-title>{{room.name}}</h3><div class=room-status-group><span>RefId: {{room.meetingRef}}</span></div></md-button></md-list-item></md-list>'),e.put("app/modules/admin/views/shared/toolbarView.html",'<md-toolbar layout=row class="md-toolbar-tools vi-toolbar"><div flex hide-gt-sm><button class="vi-center menuBtn" ng-click="toggleSidenav(\'left\')" aria-label="Toggle Menu"><i class="fa fa-bars" aria-hidden=true></i></button></div><h2 flex class="md-display-1 vi-logo">Vietinterview <span hide-sm hide-xs>- Conference Room</span></h2><ul flex class="list-inline vi-right"><li><a href=#/admin/home>Home</a></li><li><a href=#/admin/rooms>Admin</a></li></ul></md-toolbar>')}]);
//# sourceMappingURL=../maps/scripts/app-d81d5eacc8.js.map
